<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google-adsense-account" content="ca-pub-4848539261829137" />
    <title>Onze Vidas FC v1.0 - Brasileirão 2025 Simulator</title>
    <link rel="stylesheet" href="Css/style-simples.css" />
    <link rel="stylesheet" href="Css/team-colors.css" />
    <style>
      /* Estilos para a tabela do squad */
      .squad-table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .squad-table th {
        background: #2c3e50;
        color: white;
        padding: 12px 8px;
        text-align: left;
        font-weight: 600;
        font-size: 14px;
      }
      
      .squad-table td {
        padding: 10px 8px;
        border-bottom: 1px solid #ecf0f1;
        font-size: 14px;
        color: #2c3e50;
        font-weight: 500;
      }
      
      .squad-table td:nth-child(2) {
        font-weight: 600;
        color: #34495e;
      }
      
      .squad-table tr:hover {
        background: #f8f9fa;
      }
      
      .jogador-row:nth-child(even) {
        background: #f8f9fa;
      }
      
      /* Estilos para os cards do mercado */
      .mercado-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        padding: 20px;
      }
      
      .jogador-mercado-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        border: 1px solid #e9ecef;
        transition: transform 0.2s, box-shadow 0.2s;
      }
      
      .jogador-mercado-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.15);
      }
      
      .jogador-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #3498db;
      }
      
      .jogador-header .jogador-nome {
        font-size: 18px;
        font-weight: 600;
        color: #2c3e50;
      }
      
      .jogador-header .jogador-posicao {
        background: #3498db;
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
      }
      
      .jogador-info {
        margin-bottom: 15px;
      }
      
      .info-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        padding: 4px 0;
      }
      
      .info-item .label {
        font-weight: 500;
        color: #7f8c8d;
        font-size: 14px;
      }
      
      .info-item .value {
        font-weight: 600;
        color: #2c3e50;
        font-size: 14px;
      }
      
      .jogador-acoes {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
      }
      
      .btn-contratar, .btn-detalhes, .btn-escalar {
        padding: 8px 16px;
        border: none;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .btn-contratar {
        background: #27ae60;
        color: white;
      }
      
      .btn-contratar:hover {
        background: #229954;
      }
      
      .btn-detalhes {
        background: #3498db;
        color: white;
      }
      
      .btn-detalhes:hover {
        background: #2980b9;
      }
      
      .btn-escalar {
        background: #f39c12;
        color: white;
      }
      
      .btn-escalar:hover {
        background: #e67e22;
      }
      
      /* Estilos para tela de simulação */
      .simulacao-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }
      
      .simulacao-container {
        background: white;
        border-radius: 15px;
        padding: 30px;
        max-width: 500px;
        width: 90%;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      }
      
      .simulacao-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid #3498db;
      }
      
      .simulacao-header h2 {
        margin: 0;
        color: #2c3e50;
        font-size: 24px;
      }
      
      .btn-fechar {
        background: #e74c3c;
        color: white;
        border: none;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        cursor: pointer;
        font-size: 16px;
      }
      
      .resultado-jogo {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 30px 0;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 10px;
      }
      
      .time-casa, .time-visitante {
        text-align: center;
        flex: 1;
      }
      
      .nome-time {
        font-size: 18px;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 10px;
      }
      
      .gols {
        font-size: 48px;
        font-weight: bold;
        color: #e74c3c;
      }
      
      .vs {
        font-size: 24px;
        font-weight: bold;
        color: #7f8c8d;
        margin: 0 20px;
      }
      
      .resultado-info {
        margin: 20px 0;
      }
      
      .resultado-tipo {
        font-size: 20px;
        font-weight: bold;
        padding: 10px 20px;
        border-radius: 25px;
        margin-bottom: 10px;
      }
      
      .resultado-tipo.vitoria {
        background: #27ae60;
        color: white;
      }
      
      .resultado-tipo.empate {
        background: #f39c12;
        color: white;
      }
      
      .resultado-tipo.derrota {
        background: #e74c3c;
        color: white;
      }
      
      .pontos-ganhos {
        font-size: 16px;
        color: #27ae60;
        font-weight: 600;
      }
      
      .simulacao-acoes {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 20px;
      }
      
      .btn-ver-tabela, .btn-proximo-jogo {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .btn-ver-tabela {
        background: #3498db;
        color: white;
      }
      
      .btn-ver-tabela:hover {
        background: #2980b9;
      }
      
      .btn-proximo-jogo {
        background: #27ae60;
        color: white;
      }
      
      .btn-proximo-jogo:hover {
        background: #229954;
      }
      
      /* Estilos para tabela do Brasileirão */
      .tabela-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }
      
      .tabela-container {
        background: white;
        border-radius: 15px;
        padding: 20px;
        max-width: 90%;
        max-height: 90%;
        overflow-y: auto;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      }
      
      .tabela-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid #3498db;
      }
      
      .tabela-header h2 {
        margin: 0;
        color: #2c3e50;
        font-size: 24px;
      }
      
      .tabela-brasileirao {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px;
      }
      
      .tabela-brasileirao th {
        background: #2c3e50;
        color: white;
        padding: 12px 8px;
        text-align: center;
        font-weight: 600;
      }
      
      .tabela-brasileirao td {
        padding: 10px 8px;
        text-align: center;
        border-bottom: 1px solid #ecf0f1;
        color: #2c3e50;
      }
      
      .tabela-brasileirao tr:hover {
        background: #f8f9fa;
      }
      
      .tabela-brasileirao tr.meu-time {
        background: #e8f5e8;
        font-weight: 600;
      }
      
      .tabela-brasileirao tr.meu-time:hover {
        background: #d4edda;
      }
      
      /* Estilos para negociação */
      .negociacao-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }
      
      .negociacao-container {
        background: white;
        border-radius: 15px;
        padding: 30px;
        max-width: 600px;
        width: 90%;
        max-height: 90%;
        overflow-y: auto;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      }
      
      .negociacao-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid #3498db;
      }
      
      .negociacao-header h2 {
        margin: 0;
        color: #2c3e50;
        font-size: 24px;
      }
      
      .jogador-info-negociacao {
        display: flex;
        gap: 20px;
        margin-bottom: 25px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 10px;
      }
      
      .jogador-foto {
        font-size: 60px;
        color: #7f8c8d;
      }
      
      .jogador-detalhes h3 {
        margin: 0 0 10px 0;
        color: #2c3e50;
        font-size: 20px;
      }
      
      .jogador-detalhes p {
        margin: 5px 0;
        color: #34495e;
        font-size: 14px;
      }
      
      .negociacao-opcoes {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }
      
      .opcao-negociacao {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        border: 2px solid #e9ecef;
      }
      
      .opcao-negociacao h4 {
        margin: 0 0 10px 0;
        color: #2c3e50;
        font-size: 16px;
      }
      
      .opcao-negociacao p {
        margin: 5px 0;
        color: #7f8c8d;
        font-size: 12px;
      }
      
      .btn-proposta {
        width: 100%;
        padding: 10px;
        border: none;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        margin-top: 10px;
      }
      
      .btn-proposta {
        background: #3498db;
        color: white;
      }
      
      .btn-proposta:hover {
        background: #2980b9;
      }
      
      .btn-proposta.alta {
        background: #27ae60;
      }
      
      .btn-proposta.alta:hover {
        background: #229954;
      }
      
      .btn-proposta.baixa {
        background: #e74c3c;
      }
      
      .btn-proposta.baixa:hover {
        background: #c0392b;
      }
      
      .negociacao-info {
        background: #e8f4fd;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #3498db;
      }
      
      .negociacao-info p {
        margin: 5px 0;
        color: #2c3e50;
        font-size: 14px;
      }
      
      /* Estilos para resultado da negociação */
      .resultado-negociacao-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1001;
      }
      
      .resultado-negociacao-container {
        background: white;
        border-radius: 15px;
        padding: 30px;
        max-width: 500px;
        width: 90%;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      }
      
      .resultado-negociacao-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid;
      }
      
      .resultado-negociacao-header.sucesso {
        border-color: #27ae60;
      }
      
      .resultado-negociacao-header.falha {
        border-color: #e74c3c;
      }
      
      .resultado-negociacao-header h2 {
        margin: 0;
        font-size: 20px;
      }
      
      .resultado-negociacao-header.sucesso h2 {
        color: #27ae60;
      }
      
      .resultado-negociacao-header.falha h2 {
        color: #e74c3c;
      }
      
      .jogador-info-resultado h3 {
        margin: 0 0 15px 0;
        color: #2c3e50;
        font-size: 18px;
      }
      
      .jogador-info-resultado p {
        margin: 8px 0;
        color: #34495e;
        font-size: 14px;
      }
      
      .resultado-negociacao-acoes {
        margin-top: 20px;
      }
      
      .btn-continuar {
        padding: 12px 30px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .btn-continuar:hover {
        background: #2980b9;
      }
      
      /* Estilos para competições */
      .competicoes-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        padding: 20px;
      }
      
      .competicao-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        border: 2px solid #e9ecef;
        transition: transform 0.2s, box-shadow 0.2s;
      }
      
      .competicao-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.15);
      }
      
      .competicao-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 2px solid #3498db;
      }
      
      .competicao-header h4 {
        margin: 0;
        color: #2c3e50;
        font-size: 18px;
      }
      
      .status {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
      }
      
      .status:contains("Em andamento") {
        background: #27ae60;
        color: white;
      }
      
      .status:contains("Não classificado") {
        background: #e74c3c;
        color: white;
      }
      
      .status:contains("Não iniciou") {
        background: #f39c12;
        color: white;
      }
      
      /* Estilos para negociações avançadas */
      .negociacoes-acoes {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }
      
      .btn-pichincha, .btn-barganha {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .btn-pichincha {
        background: #f39c12;
        color: white;
      }
      
      .btn-pichincha:hover {
        background: #e67e22;
      }
      
      .btn-barganha {
        background: #9b59b6;
        color: white;
      }
      
      .btn-barganha:hover {
        background: #8e44ad;
      }
      
      .negociacoes-tipos {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }
      
      .tipo-negociacao {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        border: 2px solid #e9ecef;
      }
      
      .tipo-negociacao h4 {
        margin: 0 0 10px 0;
        color: #2c3e50;
        font-size: 16px;
      }
      
      .tipo-negociacao p {
        margin: 0 0 15px 0;
        color: #7f8c8d;
        font-size: 14px;
      }
      
      .tipo-negociacao button {
        padding: 8px 16px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .tipo-negociacao button:hover {
        background: #2980b9;
      }
      
      /* Estilos para finanças detalhadas */
      .financeiro-detalhes {
        margin-top: 30px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
      }
      
      .detalhe-secao {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .detalhe-secao h4 {
        margin: 0 0 15px 0;
        color: #2c3e50;
        font-size: 16px;
        border-bottom: 2px solid #3498db;
        padding-bottom: 8px;
      }
      
      .dividas-lista, .emprestimos-lista {
        max-height: 200px;
        overflow-y: auto;
      }
      
      .projecao-financeira {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      
      .projecao-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid #ecf0f1;
      }
      
      .projecao-item:last-child {
        border-bottom: none;
      }
      
      .no-data {
        color: #7f8c8d;
        font-style: italic;
        text-align: center;
        padding: 20px;
      }
      
      /* Estilos para cards de jogadores */
      .jogador-card {
        background: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        border: 2px solid #e9ecef;
        transition: transform 0.2s, box-shadow 0.2s;
        text-align: center;
        position: relative;
        overflow: hidden;
      }
      
      .jogador-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      }
      
      .jogador-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #3498db, #e74c3c, #f39c12, #27ae60);
      }
      
      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }
      
      .card-number {
        background: #3498db;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 14px;
      }
      
      .card-position {
        background: #e74c3c;
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
      }
      
      .card-photo {
        position: relative;
        margin-bottom: 15px;
      }
      
      .player-avatar {
        font-size: 60px;
        color: #7f8c8d;
        margin-bottom: 10px;
      }
      
      .player-rating {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #f39c12;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 16px;
        border: 3px solid white;
      }
      
      .card-name {
        font-size: 18px;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 15px;
      }
      
      .card-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin-bottom: 15px;
      }
      
      .stat-item {
        text-align: center;
      }
      
      .stat-label {
        display: block;
        font-size: 10px;
        color: #7f8c8d;
        margin-bottom: 2px;
      }
      
      .stat-value {
        display: block;
        font-size: 14px;
        font-weight: 600;
        color: #2c3e50;
      }
      
      .card-club {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 8px;
        margin-bottom: 15px;
      }
      
      .club-name {
        display: block;
        font-size: 14px;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 2px;
      }
      
      .nationality {
        display: block;
        font-size: 12px;
        color: #7f8c8d;
      }
      
      .card-actions {
        display: flex;
        gap: 10px;
      }
      
      .btn-card-action {
        flex: 1;
        padding: 8px 12px;
        border: none;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .btn-card-action.contratar {
        background: #27ae60;
        color: white;
      }
      
      .btn-card-action.contratar:hover {
        background: #229954;
      }
      
      .btn-card-action.detalhes {
        background: #3498db;
        color: white;
      }
      
      .btn-card-action.detalhes:hover {
        background: #2980b9;
      }
      
      /* Estilos para treinadores */
      .treinador-atual {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .treinador-atual h4 {
        margin: 0 0 15px 0;
        color: #2c3e50;
        font-size: 18px;
      }
      
      .treinador-info {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #3498db;
      }
      
      /* Estilos para centro de treinamento */
      .treino-status {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .treino-status h4 {
        margin: 0 0 15px 0;
        color: #2c3e50;
        font-size: 18px;
      }
      
      .treino-stats {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }
      
      .treino-stat {
        display: flex;
        align-items: center;
        gap: 15px;
      }
      
      .treino-stat .stat-label {
        min-width: 150px;
        font-size: 14px;
        color: #2c3e50;
        font-weight: 500;
      }
      
      .treino-stat .stat-bar {
        flex: 1;
        height: 20px;
        background: #ecf0f1;
        border-radius: 10px;
        overflow: hidden;
      }
      
      .treino-stat .stat-fill {
        height: 100%;
        background: linear-gradient(90deg, #27ae60, #2ecc71);
        transition: width 0.3s ease;
      }
      
      .treino-stat .stat-value {
        min-width: 40px;
        font-size: 14px;
        font-weight: 600;
        color: #2c3e50;
        text-align: right;
      }
      
      .treino-beneficios {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin: 10px 0;
        flex-wrap: wrap;
      }
      
      .treino-beneficios span {
        background: #e8f5e8;
        color: #27ae60;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
      }
      
      .treino-acoes {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 20px;
      }
      
      .btn-treino-especial, .btn-treino-grupo {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .btn-treino-especial {
        background: linear-gradient(135deg, #f39c12, #e67e22);
        color: white;
      }
      
      .btn-treino-especial:hover {
        background: linear-gradient(135deg, #e67e22, #d35400);
      }
      
      .btn-treino-grupo {
        background: linear-gradient(135deg, #9b59b6, #8e44ad);
        color: white;
      }
      
      .btn-treino-grupo:hover {
        background: linear-gradient(135deg, #8e44ad, #7d3c98);
      }
      
      /* Estilos para lista de jogadores nas táticas */
      .players-list {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-bottom: 20px;
      }
      
      .list-header {
        display: grid;
        grid-template-columns: 40px 100px 80px 1fr 80px 80px 100px;
        gap: 10px;
        padding: 12px 15px;
        background: #2c3e50;
        color: white;
        font-weight: 600;
        font-size: 12px;
      }
      
      .list-content {
        max-height: 300px;
        overflow-y: auto;
      }
      
      .player-list-item {
        display: grid;
        grid-template-columns: 40px 100px 80px 1fr 80px 80px 100px;
        gap: 10px;
        padding: 10px 15px;
        border-bottom: 1px solid #ecf0f1;
        align-items: center;
        font-size: 12px;
        transition: background-color 0.2s;
      }
      
      .player-list-item:hover {
        background: #f8f9fa;
      }
      
      .player-list-item:last-child {
        border-bottom: none;
      }
      
      .col-pos {
        font-weight: 600;
        color: #7f8c8d;
      }
      
      .col-role {
        background: #3498db;
        color: white;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 10px;
        text-align: center;
      }
      
      .col-ability {
        font-weight: 600;
        color: #f39c12;
      }
      
      .col-player {
        font-weight: 600;
        color: #2c3e50;
      }
      
      .col-condition {
        color: #27ae60;
        font-weight: 600;
      }
      
      .col-moral {
        color: #e74c3c;
        font-weight: 600;
      }
      
      .player-actions {
        display: flex;
        gap: 5px;
      }
      
      .btn-escalar-taticas {
        padding: 4px 8px;
        background: #27ae60;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 10px;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .btn-escalar-taticas:hover {
        background: #229954;
      }
      
      /* Estilos para substituições */
      .substitutions-section {
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .substitutions-section h4 {
        margin: 0 0 10px 0;
        color: #2c3e50;
        font-size: 14px;
      }
      
      .substitutions-list {
        min-height: 50px;
        background: #f8f9fa;
        border-radius: 8px;
        padding: 10px;
        border: 2px dashed #bdc3c7;
      }
      
      /* Estilos para submenu sections */
      .submenu-section {
        padding: 8px 15px;
        background: #34495e;
        border-top: 1px solid #2c3e50;
        border-bottom: 1px solid #2c3e50;
      }
      
      .submenu-title {
        color: #ecf0f1;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      
      /* Estilos para listas de jogadores */
      .titulares-container,
      .reservas-container,
      .lesionados-container,
      .promessas-container {
        padding: 20px;
      }
      
      .titulares-grid,
      .reservas-grid,
      .lesionados-grid,
      .promessas-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }
      
      .jogador-card.titular {
        border: 2px solid #27ae60;
        background: linear-gradient(135deg, #27ae60, #2ecc71);
      }
      
      .jogador-card.reserva {
        border: 2px solid #f39c12;
        background: linear-gradient(135deg, #f39c12, #e67e22);
      }
      
      .jogador-card.lesionado {
        border: 2px solid #e74c3c;
        background: linear-gradient(135deg, #e74c3c, #c0392b);
      }
      
      .jogador-card.promessa {
        border: 2px solid #9b59b6;
        background: linear-gradient(135deg, #9b59b6, #8e44ad);
      }
      
      .no-data {
        grid-column: 1 / -1;
        text-align: center;
        padding: 40px;
        background: #f8f9fa;
        border-radius: 10px;
        color: #7f8c8d;
        font-size: 18px;
        font-weight: 600;
      }
      
      /* Estilos para tabela de contratos */
      .contratos-container {
        padding: 20px;
      }
      
      .contratos-table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .contratos-table th,
      .contratos-table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #ecf0f1;
      }
      
      .contratos-table th {
        background: #2c3e50;
        color: white;
        font-weight: 600;
        font-size: 14px;
      }
      
      .contratos-table tr:hover {
        background: #f8f9fa;
      }
      
      .status-ok {
        background: #27ae60;
        color: white;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
      }
      
      .status-renovar {
        background: #f39c12;
        color: white;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
      }
      
      .btn-renovar {
        padding: 6px 12px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.2s;
      }
      
      .btn-renovar:hover {
        background: #2980b9;
      }
      
      /* Estilos para filtros do mercado */
      .mercado-filtros {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        padding: 20px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-bottom: 20px;
      }
      
      .filtro-grupo {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }
      
      .filtro-grupo label {
        font-weight: 600;
        color: #2c3e50;
        font-size: 14px;
      }
      
      .filtro-grupo select {
        padding: 8px 12px;
        border: 1px solid #bdc3c7;
        border-radius: 6px;
        font-size: 14px;
        background: white;
        cursor: pointer;
      }
      
      .filtro-grupo select:focus {
        outline: none;
        border-color: #3498db;
        box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
      }
      
      .orcamento-info {
        font-weight: 700;
        color: #27ae60;
        font-size: 16px;
        padding: 8px 12px;
        background: #e8f5e8;
        border-radius: 6px;
        text-align: center;
      }
      
      /* Estilos para estádio */
      .estadio-container {
        padding: 20px;
      }
      
      .estadio-card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .estadio-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }
      
      /* Estilos para bilheteria */
      .bilheteria-container {
        padding: 20px;
      }
      
      .stat-card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .stat-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }
      
      /* Estilos para manutenção */
      .manutencao-container {
        padding: 20px;
      }
      
      .status-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }
      
      .status-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 15px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      }
      
      .status-value.excelente {
        color: #27ae60;
        font-weight: 600;
      }
      
      .status-value.bom {
        color: #f39c12;
        font-weight: 600;
      }
      
      /* Estilos para negócios */
      .negocios-container {
        padding: 20px;
      }
      
      .negocio-card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .reunioes-lista {
        margin-top: 15px;
      }
      
      .reuniao-item {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 10px;
        border-bottom: 1px solid #ecf0f1;
      }
      
      .reuniao-time {
        background: #3498db;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: 600;
        font-size: 12px;
      }
      
      .reuniao-tipo {
        background: #e74c3c;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
      }
      
      /* Estilos para patrocínios */
      .patrocinios-container {
        padding: 20px;
      }
      
      .patrocinios-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
      }
      
      .patrocinio-card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .patrocinio-info {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-top: 15px;
      }
      
      .patrocinio-info .valor {
        font-weight: 700;
        color: #27ae60;
        font-size: 18px;
      }
      
      /* Estilos para imprensa */
      .imprensa-container {
        padding: 20px;
      }
      
      .noticia-item {
        background: white;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 15px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        border-left: 4px solid #3498db;
      }
      
      .noticia-item.contratacao {
        border-left-color: #27ae60;
      }
      
      .noticia-item.financeiro {
        border-left-color: #f39c12;
      }
      
      .noticia-item.resultado {
        border-left-color: #e74c3c;
      }
      
      .noticia-item.torcida {
        border-left-color: #9b59b6;
      }
      
      .noticia-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 10px;
      }
      
      .noticia-meta {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 5px;
      }
      
      .fonte {
        font-weight: 600;
        color: #7f8c8d;
        font-size: 12px;
      }
      
      .data {
        color: #95a5a6;
        font-size: 11px;
      }
      
      /* Estilos para torcida */
      .torcida-container {
        padding: 20px;
      }
      
      .opiniao-torcida {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .opiniao-torcida.positiva {
        border-left: 4px solid #27ae60;
      }
      
      .opiniao-torcida.neutra {
        border-left: 4px solid #f39c12;
      }
      
      .opiniao-torcida.negativa {
        border-left: 4px solid #e74c3c;
      }
      
      .torcida-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }
      
      /* Estilos para competições */
      .grupos-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        padding: 20px;
      }
      
      .grupo-card {
        background: white;
        border-radius: 10px;
        padding: 15px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .grupo-card h3 {
        margin: 0 0 15px 0;
        color: #2c3e50;
        font-size: 16px;
        font-weight: 600;
      }
      
      .tabela-grupo {
        width: 100%;
        border-collapse: collapse;
        font-size: 12px;
      }
      
      .tabela-grupo th,
      .tabela-grupo td {
        padding: 6px 8px;
        text-align: left;
        border-bottom: 1px solid #ecf0f1;
      }
      
      .tabela-grupo th {
        background: #34495e;
        color: white;
        font-weight: 600;
        font-size: 11px;
      }
      
      .tabela-grupo tr:hover {
        background: #f8f9fa;
      }
      
      .chaveamento-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        padding: 20px;
      }
      
      .jogo-chaveamento {
        background: white;
        border-radius: 8px;
        padding: 15px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        text-align: center;
      }
      
      .time-casa,
      .time-visitante {
        font-weight: 600;
        color: #2c3e50;
        margin: 5px 0;
      }
      
      .vs {
        color: #7f8c8d;
        font-size: 12px;
        margin: 5px 0;
      }
      
      .resultado {
        background: #3498db;
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 600;
        margin-top: 8px;
      }
      
      .meu-time {
        background: linear-gradient(135deg, #27ae60, #2ecc71) !important;
        color: white !important;
        font-weight: 600;
      }
      
      .meu-time td {
        color: white !important;
      }
      
      /* Estilos para UI de Competições Melhorada */
      .competicoes-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding: 15px;
        background: linear-gradient(135deg, #2c3e50, #34495e);
        border-radius: 10px;
        color: white;
      }
      
      .btn-simular-rodada {
        background: linear-gradient(135deg, #27ae60, #2ecc71);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      
      .btn-simular-rodada:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4);
      }
      
      .competicoes-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }
      
      .competicao-card {
        background: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        border-left: 5px solid #3498db;
      }
      
      .competicao-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 30px rgba(0,0,0,0.15);
      }
      
      .competicao-card.brasileirao {
        border-left-color: #f39c12;
      }
      
      .competicao-card.libertadores {
        border-left-color: #e74c3c;
      }
      
      .competicao-card.copa-brasil {
        border-left-color: #9b59b6;
      }
      
      .competicao-card.estadual {
        border-left-color: #27ae60;
      }
      
      .competicao-header {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
        gap: 10px;
      }
      
      .competicao-logo {
        font-size: 24px;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f8f9fa;
        border-radius: 50%;
      }
      
      .competicao-header h4 {
        margin: 0;
        flex: 1;
        color: #2c3e50;
        font-weight: 600;
      }
      
      .status {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
      }
      
      .status.em-andamento {
        background: #d4edda;
        color: #155724;
      }
      
      .status.nao-classificado {
        background: #f8d7da;
        color: #721c24;
      }
      
      .status.nao-iniciou {
        background: #fff3cd;
        color: #856404;
      }
      
      .competicao-info p {
        margin: 8px 0;
        color: #6c757d;
        font-size: 14px;
      }
      
      .competicao-info strong {
        color: #2c3e50;
      }
      
      .competicao-acoes {
        display: flex;
        gap: 10px;
        margin-top: 15px;
      }
      
      .competicao-acoes button {
        flex: 1;
        padding: 8px 12px;
        border: none;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      
      .btn-ver-tabela {
        background: #3498db;
        color: white;
      }
      
      .btn-ver-grupos {
        background: #e74c3c;
        color: white;
      }
      
      .btn-ver-chaveamento {
        background: #9b59b6;
        color: white;
      }
      
      .btn-ver-premios {
        background: #f39c12;
        color: white;
      }
      
      .competicao-acoes button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      }
      
      /* Seção Extra */
      .competicoes-extra {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-top: 30px;
      }
      
      .historico-campeoes,
      .premios-individuais {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      
      .historico-campeoes h4,
      .premios-individuais h4 {
        margin: 0 0 15px 0;
        color: #2c3e50;
        font-size: 16px;
        font-weight: 600;
      }
      
      .historico-grid,
      .premios-grid {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      
      .historico-item,
      .premio-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px;
        background: #f8f9fa;
        border-radius: 6px;
        font-size: 14px;
      }
      
      .ano {
        color: #6c757d;
        font-weight: 600;
      }
      
      .campeao {
        color: #2c3e50;
        font-weight: 600;
      }
      
      .competicao {
        color: #6c757d;
        font-size: 12px;
      }
      
      .premio-tipo {
        color: #2c3e50;
        font-weight: 600;
      }
      
      .premio-valor {
        color: #27ae60;
        font-weight: 600;
      }
      
      /* Sistema de Notificações */
      .notificacao {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 10000;
        max-width: 400px;
        animation: slideIn 0.5s ease;
      }
      
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      
      .notificacao-conteudo {
        background: white;
        border-radius: 10px;
        padding: 15px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        border-left: 5px solid #3498db;
        position: relative;
      }
      
      .notificacao-rebaixamento .notificacao-conteudo {
        border-left-color: #e74c3c;
      }
      
      .notificacao-promocao .notificacao-conteudo {
        border-left-color: #27ae60;
      }
      
      .notificacao-campeao .notificacao-conteudo {
        border-left-color: #f39c12;
      }
      
      .notificacao-icone {
        font-size: 24px;
        margin-bottom: 10px;
      }
      
      .notificacao-texto {
        color: #2c3e50;
        line-height: 1.5;
        margin-bottom: 10px;
      }
      
      .notificacao-fechar {
        position: absolute;
        top: 10px;
        right: 10px;
        background: none;
        border: none;
        font-size: 18px;
        color: #6c757d;
        cursor: pointer;
        padding: 0;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .notificacao-fechar:hover {
        color: #e74c3c;
      }
      
      /* Sistema de Negociações */
      .negociacao-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10000;
      }
      
      .negociacao-container {
        background: white;
        border-radius: 15px;
        padding: 30px;
        max-width: 600px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      }
      
      .negociacao-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid #f0f0f0;
      }
      
      .negociacao-header h2 {
        margin: 0;
        color: #2c3e50;
        font-size: 24px;
      }
      
      .jogador-info-negociacao {
        display: flex;
        gap: 20px;
        margin-bottom: 25px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 10px;
      }
      
      .jogador-foto {
        width: 80px;
        height: 80px;
        background: #3498db;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 32px;
        color: white;
      }
      
      .jogador-detalhes h3 {
        margin: 0 0 10px 0;
        color: #2c3e50;
        font-size: 20px;
      }
      
      .jogador-detalhes p {
        margin: 5px 0;
        color: #6c757d;
        font-size: 14px;
      }
      
      .negociacao-opcoes {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }
      
      .opcao-negociacao {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 15px;
        text-align: center;
        border: 2px solid transparent;
        transition: all 0.3s ease;
      }
      
      .opcao-negociacao:hover {
        border-color: #3498db;
        transform: translateY(-2px);
      }
      
      .opcao-negociacao h4 {
        margin: 0 0 10px 0;
        color: #2c3e50;
        font-size: 16px;
      }
      
      .opcao-negociacao p {
        margin: 5px 0;
        color: #6c757d;
        font-size: 12px;
      }
      
      .btn-proposta {
        background: #3498db;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 10px;
      }
      
      .btn-proposta:hover {
        background: #2980b9;
        transform: translateY(-1px);
      }
      
      .btn-proposta.alta {
        background: #27ae60;
      }
      
      .btn-proposta.alta:hover {
        background: #229954;
      }
      
      .btn-proposta.baixa {
        background: #e74c3c;
      }
      
      .btn-proposta.baixa:hover {
        background: #c0392b;
      }
      
      .negociacao-info {
        background: #e8f4fd;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #3498db;
      }
      
      .negociacao-info p {
        margin: 5px 0;
        color: #2c3e50;
        font-size: 14px;
      }
      
      /* Sistema de Imprensa */
      .noticia-item {
        background: white;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        border-left: 4px solid #3498db;
        transition: all 0.3s ease;
      }
      
      .noticia-item:hover {
        transform: translateX(5px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      }
      
      .noticia-contratacao {
        border-left-color: #27ae60;
      }
      
      .noticia-recusa {
        border-left-color: #e74c3c;
      }
      
      .noticia-venda {
        border-left-color: #f39c12;
      }
      
      .noticia-falta {
        border-left-color: #e67e22;
      }
      
      .noticia-goleada {
        border-left-color: #9b59b6;
      }
      
      .noticia-polemica {
        border-left-color: #c0392b;
      }
      
      .noticia-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }
      
      .noticia-tipo {
        font-size: 18px;
      }
      
      .noticia-data {
        color: #6c757d;
        font-size: 12px;
      }
      
      .noticia-manchete {
        color: #2c3e50;
        font-weight: 600;
        margin-bottom: 8px;
        line-height: 1.4;
      }
      
      .noticia-impacto {
        font-size: 12px;
        font-weight: 600;
        padding: 4px 8px;
        border-radius: 4px;
        display: inline-block;
      }
      
      .noticia-impacto.positivo {
        background: #d4edda;
        color: #155724;
      }
      
      .noticia-impacto.negativo {
        background: #f8d7da;
        color: #721c24;
      }
      
      /* Sistema de Contratos */
      .contrato-info {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        margin: 10px 0;
        border-left: 4px solid #3498db;
      }
      
      .contrato-info h4 {
        margin: 0 0 10px 0;
        color: #2c3e50;
        font-size: 16px;
      }
      
      .contrato-detalhes {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        font-size: 14px;
      }
      
      .contrato-item {
        display: flex;
        justify-content: space-between;
        padding: 5px 0;
        border-bottom: 1px solid #e9ecef;
      }
      
      .contrato-item:last-child {
        border-bottom: none;
      }
      
      .contrato-label {
        color: #6c757d;
        font-weight: 600;
      }
      
      .contrato-valor {
        color: #2c3e50;
        font-weight: 600;
      }
      
      /* Sistema de Personalidade */
      .personalidade-info {
        background: #fff3cd;
        border-radius: 8px;
        padding: 15px;
        margin: 10px 0;
        border-left: 4px solid #ffc107;
      }
      
      .personalidade-info h4 {
        margin: 0 0 10px 0;
        color: #856404;
        font-size: 16px;
      }
      
      .personalidade-stats {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      
      .personalidade-stat {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 5px 0;
      }
      
      .personalidade-label {
        color: #856404;
        font-size: 12px;
        font-weight: 600;
      }
      
      .personalidade-valor {
        background: #856404;
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 11px;
        font-weight: 600;
      }
      
      /* Imprensa Melhorada */
      .imprensa-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding: 15px;
        background: linear-gradient(135deg, #2c3e50, #34495e);
        border-radius: 10px;
        color: white;
      }
      
      .imprensa-acoes {
        display: flex;
        gap: 10px;
      }
      
      .btn-gerar-noticia,
      .btn-gerar-falta {
        background: linear-gradient(135deg, #e74c3c, #c0392b);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      
      .btn-gerar-falta {
        background: linear-gradient(135deg, #f39c12, #e67e22);
      }
      
      .btn-gerar-noticia:hover,
      .btn-gerar-falta:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
      }
      
      .imprensa-stats {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 20px;
      }
      
      .imprensa-stats .stat-item {
        background: white;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .imprensa-stats .stat-label {
        color: #6c757d;
        font-weight: 600;
        font-size: 14px;
      }
      
      .imprensa-stats .stat-value {
        color: #2c3e50;
        font-weight: 700;
        font-size: 18px;
      }
      
      .sem-noticias {
        text-align: center;
        color: #6c757d;
        font-style: italic;
        padding: 40px;
        background: #f8f9fa;
        border-radius: 8px;
        border: 2px dashed #dee2e6;
      }
      
      /* Jogador Info Detalhada */
      .jogador-info-detalhada {
        display: grid;
        gap: 20px;
      }
      
      .jogador-basico {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        border-left: 4px solid #3498db;
      }
      
      .jogador-basico h3 {
        margin: 0 0 15px 0;
        color: #2c3e50;
        font-size: 18px;
      }
      
      .jogador-basico p {
        margin: 8px 0;
        color: #6c757d;
        font-size: 14px;
      }
      
      .jogador-basico strong {
        color: #2c3e50;
      }
      
      /* Estilos do menu principal reformulado */
      .game-menu-vertical {
        width: 280px;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        border-right: 2px solid #0f3460;
        padding: 20px 0;
        overflow-y: auto;
        height: 100vh;
      }
      
      .menu-section {
        margin-bottom: 30px;
      }
      
      .menu-section-title {
        color: #e94560;
        font-size: 14px;
        font-weight: bold;
        text-transform: uppercase;
        margin: 0 20px 15px;
        padding: 10px 15px;
        background: rgba(233, 69, 96, 0.1);
        border-radius: 8px;
        border-left: 3px solid #e94560;
      }
      
      .menu-item {
        position: relative;
        padding: 12px 20px;
        color: #ffffff;
        cursor: pointer;
        transition: all 0.3s ease;
        border-left: 3px solid transparent;
      }
      
      .menu-item:hover {
        background: rgba(233, 69, 96, 0.1);
        border-left-color: #e94560;
      }
      
      .menu-item .menu-icon {
        margin-right: 12px;
        font-size: 18px;
      }
      
      .menu-item .menu-text {
        font-weight: 500;
      }
      
      .submenu-vertical {
        display: none;
        background: rgba(15, 52, 96, 0.3);
        margin-left: 20px;
        border-radius: 8px;
        overflow: hidden;
      }
      
      .menu-item:hover .submenu-vertical {
        display: block;
      }
      
      .submenu-item {
        padding: 8px 15px;
        font-size: 13px;
        color: #b8b8b8;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      
      .submenu-item:hover {
        background: rgba(233, 69, 96, 0.2);
        color: #ffffff;
      }
      
      /* Estilos para notificações */
      .notificacao-item {
        background: #ffffff;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        border-left: 4px solid #4CAF50;
        animation: slideIn 0.3s ease;
      }
      
      .notificacao-sucesso {
        border-left-color: #4CAF50;
      }
      
      .notificacao-erro {
        border-left-color: #f44336;
      }
      
      .notificacao-aviso {
        border-left-color: #ff9800;
      }
      
      .notificacao-info {
        border-left-color: #2196F3;
      }
      
      .notificacao-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }
      
      .notificacao-tipo {
        font-size: 16px;
        margin-right: 8px;
      }
      
      .notificacao-titulo {
        font-weight: bold;
        color: #333;
        flex: 1;
      }
      
      .btn-fechar-notificacao {
        background: none;
        border: none;
        color: #999;
        cursor: pointer;
        font-size: 14px;
      }
      
      .notificacao-mensagem {
        color: #666;
        font-size: 14px;
        line-height: 1.4;
      }
      
      .notificacao-data {
        color: #999;
        font-size: 12px;
        margin-top: 8px;
      }
      
      @keyframes slideIn {
        from {
          transform: translateX(-100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      
      /* Estilos para imprensa e torcida */
      .imprensa-container, .torcida-container, .notificacoes-container {
        padding: 20px;
      }
      
      .imprensa-header, .notificacoes-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }
      
      .btn-gerar-noticia, .btn-limpar-notificacoes {
        background: #e94560;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 12px;
      }
      
      .noticia-item {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        border-left: 4px solid #2196F3;
      }
      
      .noticia-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }
      
      .noticia-tipo {
        font-size: 18px;
      }
      
      .noticia-data {
        color: #666;
        font-size: 12px;
      }
      
      .noticia-manchete {
        font-weight: bold;
        color: #333;
        margin-bottom: 8px;
      }
      
      .noticia-impacto {
        font-size: 12px;
        padding: 4px 8px;
        border-radius: 4px;
      }
      
      .noticia-impacto.positivo {
        background: #d4edda;
        color: #155724;
      }
      
      .noticia-impacto.negativo {
        background: #f8d7da;
        color: #721c24;
      }
      
      .torcida-stats {
        margin-bottom: 20px;
      }
      
      .torcida-stat {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }
      
      .moral-bar {
        width: 200px;
        height: 8px;
        background: #e9ecef;
        border-radius: 4px;
        margin: 0 10px;
        overflow: hidden;
      }
      
      .moral-fill {
        height: 100%;
        background: linear-gradient(90deg, #f44336 0%, #ff9800 50%, #4CAF50 100%);
        transition: width 0.3s ease;
      }
      
      .torcida-historico {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
      }
      
      .historico-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid #e9ecef;
      }
      
      .historico-item:last-child {
        border-bottom: none;
      }
    </style>
  </head>
  <body>
    <!-- Version Badge -->
    <div class="version-badge">v1.0</div>

    <!-- Tela de Título -->
    <div id="tela-titulo" class="tela-titulo">
      <!-- Background com campo de futebol -->
      <div class="background-field">
        <div class="field-lines"></div>
        <div class="field-lines"></div>
        <div class="field-lines"></div>
        <div class="center-circle"></div>
        <div class="penalty-area-left"></div>
        <div class="penalty-area-right"></div>
      </div>

      <!-- Overlay escuro -->
      <div class="dark-overlay"></div>

      <!-- Conteúdo principal -->
      <div class="main-content">
        <!-- Logo e título -->
        <div class="game-logo">
          <div class="logo-icon">⚽</div>
          <h1 class="game-title">ONZE VIDAS FC</h1>
          <p class="game-subtitle">Brasileirão 2025 Simulator</p>
          <p class="game-tagline">A Realidade é Cruel!</p>
        </div>

        <!-- Menu principal -->
        <div class="main-menu">
          <div class="menu-section">
            <div class="menu-item" data-menu="iniciar">
              <div class="menu-icon">🎮</div>
              <div class="menu-content">
                <h3>INICIAR JOGO</h3>
                <p>Comece sua jornada no futebol brasileiro</p>
              </div>
              <div class="menu-arrow">→</div>
            </div>

            <div class="menu-item" data-menu="carregar">
              <div class="menu-icon">📂</div>
              <div class="menu-content">
                <h3>CARREGAR JOGO</h3>
                <p>Continue de onde parou</p>
              </div>
              <div class="menu-arrow">→</div>
            </div>

            <div class="menu-item" data-menu="configuracoes">
              <div class="menu-icon">⚙️</div>
              <div class="menu-content">
                <h3>CONFIGURAÇÕES</h3>
                <p>Ajuste suas preferências</p>
              </div>
              <div class="menu-arrow">→</div>
            </div>
          </div>

          <div class="menu-section">
            <div class="menu-item secondary" data-menu="creditos">
              <div class="menu-icon">👥</div>
              <div class="menu-content">
                <h3>CRÉDITOS</h3>
                <p>Conheça a equipe</p>
              </div>
            </div>

            <div class="menu-item secondary" data-menu="sair">
              <div class="menu-icon">❌</div>
              <div class="menu-content">
                <h3>SAIR</h3>
                <p>Encerrar o jogo</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Informações do jogo -->
        <div class="game-info">
          <div class="info-item">
            <span class="info-label">Versão:</span>
            <span class="info-value">1.0</span>
          </div>
          <div class="info-item">
            <span class="info-label">Desenvolvido com:</span>
            <span class="info-value">❤️ IA + Humano</span>
          </div>
          <div class="info-item">
            <span class="info-label">Controles:</span>
            <span class="info-value">Mouse + Teclado</span>
          </div>
        </div>

        <!-- Dicas de teclado -->
        <div class="keyboard-tips">
          <div class="tip-item"><kbd>ESC</kbd> <span>Voltar</span></div>
          <div class="tip-item"><kbd>Enter</kbd> <span>Confirmar</span></div>
          <div class="tip-item"><kbd>1-4</kbd> <span>Seleção rápida</span></div>
        </div>

        <!-- Botão de teste -->
        <div style="position: absolute; top: 20px; right: 20px">
          <button
            id="teste-botao"
            style="
              background: red;
              color: white;
              padding: 10px;
              border: none;
              border-radius: 5px;
              cursor: pointer;
            "
          >
            TESTE CLIQUE
          </button>
          <br /><br />
          <button
            id="teste-controller"
            style="
              background: blue;
              color: white;
              padding: 10px;
              border: none;
              border-radius: 5px;
              cursor: pointer;
            "
          >
            TESTE CONTROLLER
          </button>
        </div>
      </div>

      <!-- Partículas flutuantes -->
      <div class="floating-particles">
        <div class="particle">⚽</div>
        <div class="particle">🏆</div>
        <div class="particle">⭐</div>
        <div class="particle">🔥</div>
        <div class="particle">💎</div>
      </div>
    </div>

    <!-- Tela de Seleção de Desafio -->
    <div id="tela-desafio" class="tela-jogo hidden">
      <div class="desafio-container">
        <h2>ESCOLHA SEU DESAFIO</h2>
        <div class="desafios-grid">
          <div class="desafio-card" data-desafio="rico">
            <h3>🏆 CLUBE RICO</h3>
            <p>Comece com um clube SAF bem estruturado</p>
            <ul>
              <li>💰 Orçamento alto</li>
              <li>⭐ Elenco qualificado</li>
              <li>🎯 Expectativas altas</li>
              <li>🏅 Pressão por resultados</li>
            </ul>
            <div class="desafio-dificuldade">
              <span class="dificuldade-label">Dificuldade:</span>
              <span class="dificuldade-estrelas">⭐</span>
            </div>
            <div class="key-hint">Pressione <kbd>1</kbd></div>
          </div>
          <div class="desafio-card" data-desafio="medio">
            <h3>⚖️ CLUBE MÉDIO</h3>
            <p>Equilibre recursos e ambições</p>
            <ul>
              <li>💵 Orçamento moderado</li>
              <li>⚽ Elenco misto</li>
              <li>🎲 Desafio equilibrado</li>
              <li>📈 Potencial de crescimento</li>
            </ul>
            <div class="desafio-dificuldade">
              <span class="dificuldade-label">Dificuldade:</span>
              <span class="dificuldade-estrelas">⭐⭐</span>
            </div>
            <div class="key-hint">Pressione <kbd>2</kbd></div>
          </div>
          <div class="desafio-card" data-desafio="pobre">
            <h3>💪 CLUBE POBRE</h3>
            <p>Supere as limitações financeiras</p>
            <ul>
              <li>💸 Orçamento baixo</li>
              <li>🔧 Elenco limitado</li>
              <li>🔥 Desafio máximo</li>
              <li>💎 Jóias escondidas</li>
            </ul>
            <div class="desafio-dificuldade">
              <span class="dificuldade-label">Dificuldade:</span>
              <span class="dificuldade-estrelas">⭐⭐⭐</span>
            </div>
            <div class="key-hint">Pressione <kbd>3</kbd></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tela de Seleção de Time -->
    <div id="tela-time" class="tela-jogo hidden">
      <div class="time-container">
        <h2>ESCOLHA SEU TIME</h2>

        <!-- Opções de Criação de Time -->
        <div class="criar-time-opcoes">
          <div class="criar-time-card">
            <h3>🎲 TIME ALEATÓRIO</h3>
            <p>
              Criar um time com jogadores aleatórios e características únicas
            </p>
            <button
              class="btn-criar-aleatorio"
              onclick="selecionarTimeAleatorio()"
            >
              🎲 Selecionar Time Aleatório
            </button>
          </div>

          <div class="criar-time-card">
            <h3>⚽ TIME GENÉRICO</h3>
            <p>Criar um time genérico com jogadores básicos</p>
            <button class="btn-criar-generico" onclick="criarTimeGenerico()">
              ⚽ Criar Time Genérico
            </button>
          </div>
        </div>

        <div class="separador-times">
          <h3>🏆 TIMES DISPONÍVEIS</h3>
          <p>Escolha um dos times brasileiros - 2025</p>
        </div>

        <!-- Filtros para Times -->
        <div class="filtros-times">
          <div class="filtro-grupo">
            <label for="filtro-ordem">Ordenar por:</label>
            <select id="filtro-ordem" onchange="aplicarFiltrosTimes()">
              <option value="nome">Nome A-Z</option>
              <option value="nome-desc">Nome Z-A</option>
              <option value="riqueza">Riqueza</option>
              <option value="orcamento">Orçamento</option>
              <option value="facilidade">Facilidade</option>
            </select>
          </div>
          
          <div class="filtro-grupo">
            <label for="filtro-riqueza">Riqueza:</label>
            <select id="filtro-riqueza" onchange="aplicarFiltrosTimes()">
              <option value="todos">Todos</option>
              <option value="alta">Alta</option>
              <option value="média">Média</option>
              <option value="baixa">Baixa</option>
            </select>
          </div>
          
          <div class="filtro-grupo">
            <label for="filtro-situacao">Situação:</label>
            <select id="filtro-situacao" onchange="aplicarFiltrosTimes()">
              <option value="todos">Todos</option>
              <option value="SAF">SAF</option>
              <option value="Associação">Associação</option>
              <option value="crise">Em Crise</option>
            </select>
          </div>
        </div>

        <div id="clubes-container" class="clubes-grid"></div>
      </div>
    </div>

    <!-- Tela de Renda Inicial -->
    <div id="tela-renda" class="tela-jogo hidden">
      <div class="renda-container">
        <h2>ESCOLHA RENDA INICIAL</h2>
        <div class="renda-opcoes">
          <div class="renda-card" data-renda="alta">
            <h3>💰 RENDA ALTA</h3>
            <p>R$ 50.000 - R$ 100.000</p>
            <ul>
              <li>💎 Presentes caros</li>
              <li>🛡️ Intervenções poderosas</li>
              <li>🎯 Menos desafio social</li>
              <li>🏆 Foco no sucesso</li>
            </ul>
            <div class="renda-dificuldade">
              <span class="dificuldade-label">Desafio Social:</span>
              <span class="dificuldade-estrelas">⭐</span>
            </div>
            <div class="key-hint">Pressione <kbd>1</kbd></div>
          </div>
          <div class="renda-card" data-renda="media">
            <h3>💵 RENDA MÉDIA</h3>
            <p>R$ 20.000 - R$ 50.000</p>
            <ul>
              <li>🎁 Presentes moderados</li>
              <li>⚖️ Intervenções equilibradas</li>
              <li>🎲 Desafio social médio</li>
              <li>📊 Gestão inteligente</li>
            </ul>
            <div class="renda-dificuldade">
              <span class="dificuldade-label">Desafio Social:</span>
              <span class="dificuldade-estrelas">⭐⭐</span>
            </div>
            <div class="key-hint">Pressione <kbd>2</kbd></div>
          </div>
          <div class="renda-card" data-renda="baixa">
            <h3>💸 RENDA BAIXA</h3>
            <p>R$ 5.000 - R$ 20.000</p>
            <ul>
              <li>🎯 Presentes simples</li>
              <li>🔧 Intervenções limitadas</li>
              <li>🔥 Máximo desafio social</li>
              <li>💪 Criatividade necessária</li>
            </ul>
            <div class="renda-dificuldade">
              <span class="dificuldade-label">Desafio Social:</span>
              <span class="dificuldade-estrelas">⭐⭐⭐</span>
            </div>
            <div class="key-hint">Pressione <kbd>3</kbd></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tela de Jogador Preferido -->
    <div id="tela-jogador" class="tela-jogo hidden">
      <div class="jogador-container">
        <h2>JOGADOR PREFERIDO</h2>
        <p class="pergunta">Qual jogador você acha legal?</p>
        <div class="jogador-opcoes">
          <div class="jogador-card" data-jogador="endrick">
            <h3>⚡ ENDRICK</h3>
            <p>Atacante - 17 anos</p>
            <p>Valor: €45M</p>
            <p>Origem: Taguatinga, DF</p>
            <p class="jogador-descricao">
              Jovem promessa do Palmeiras. Técnica apurada e finalização letal.
            </p>
            <div class="key-hint">Pressione <kbd>1</kbd></div>
          </div>
          <div class="jogador-card" data-jogador="pedrinho">
            <h3>🔥 PEDRINHO</h3>
            <p>Meia - 18 anos</p>
            <p>Valor: €8M</p>
            <p>Origem: Comunidade do Jardim Ângela, SP</p>
            <p class="jogador-descricao">
              Talentoso mas instável. Precisa de orientação para não se perder.
            </p>
            <div class="key-hint">Pressione <kbd>2</kbd></div>
          </div>
          <div class="jogador-card" data-jogador="carlinhos">
            <h3>🎯 CARLINHOS</h3>
            <p>Atacante - 19 anos</p>
            <p>Valor: €12M</p>
            <p>Origem: Comunidade da Rocinha, RJ</p>
            <p class="jogador-descricao">
              Velocidade impressionante. Família humilde, sonha em ajudar os
              pais.
            </p>
            <div class="key-hint">Pressione <kbd>3</kbd></div>
          </div>
          <div class="jogador-card" data-jogador="marcelinho">
            <h3>⚽ MARCELINHO</h3>
            <p>Meia - 20 anos</p>
            <p>Valor: €20M</p>
            <p>Origem: Comunidade de Paraisópolis, SP</p>
            <p class="jogador-descricao">
              Técnica apurada. Pai pedreiro, mãe doméstica. Quer mudar a vida da
              família.
            </p>
            <div class="key-hint">Pressione <kbd>4</kbd></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Seção Principal do Jogo (inicialmente oculta) -->
    <div id="jogo-principal" class="jogo-principal hidden">
      <div class="jogo-header">
        <div class="header-top">
          <h2 id="clube-nome">Nome do Clube</h2>
          <div class="header-actions">
            <button class="btn-salvar-sessao" onclick="salvarSessao()">
              💾 Salvar Sessão
            </button>
            <button class="btn-voltar-inicio" onclick="voltarAoInicio()">
              🏠 Voltar ao Início
            </button>
            <button class="btn-sair" onclick="sairDoJogo()">❌ Sair</button>
          </div>
        </div>
        <div class="clube-info">
          <span id="clube-riqueza">Riqueza: Média</span>
          <span id="clube-orcamento">Orçamento: R$ 0</span>
        </div>
      </div>

      <div class="jogo-content">
        <!-- Menu Principal Horizontal -->
        <nav class="game-menu-horizontal">
          <div class="menu-container">
            <!-- Seção GESTÃO -->
            <div class="menu-group">
              <div class="menu-item" data-menu="clube">
                <span class="menu-icon">🏆</span>
                <span class="menu-text">Clube</span>
                <div class="submenu-horizontal">
                  <div class="submenu-item" data-tab="elenco">👥 Elenco</div>
                  <div class="submenu-item" data-tab="treinadores">👨‍💼 Treinadores</div>
                  <div class="submenu-item" data-tab="dono">👑 Dono</div>
                  <div class="submenu-item" data-tab="colaboradores">👤 Colaboradores</div>
                </div>
              </div>
              
              <div class="menu-item" data-menu="jogo">
                <span class="menu-icon">⚽</span>
                <span class="menu-text">Jogo</span>
                <div class="submenu-horizontal">
                  <div class="submenu-item" data-tab="escalacao">📋 Escalação</div>
                  <div class="submenu-item" data-tab="tatica">🎯 Tática</div>
                  <div class="submenu-item" data-tab="treino">🏃‍♂️ Treino</div>
                  <div class="submenu-item" data-tab="jogos">🏟️ Jogos</div>
                  <div class="submenu-item" data-tab="simulacao">⚽ Simulação</div>
                </div>
              </div>
            </div>
            
            <!-- Seção NEGÓCIOS -->
            <div class="menu-group">
              <div class="menu-item" data-menu="mercado">
                <span class="menu-icon">💰</span>
                <span class="menu-text">Mercado</span>
                <div class="submenu-horizontal">
                  <div class="submenu-item" data-tab="mercado">🛒 Transferências</div>
                  <div class="submenu-item" data-tab="contratar">📝 Contratar</div>
                  <div class="submenu-item" data-tab="scouts">🔍 Scouts</div>
                  <div class="submenu-item" data-tab="negociacoes">🤝 Negociações</div>
                </div>
              </div>
              
              <div class="menu-item" data-menu="financeiro">
                <span class="menu-icon">💵</span>
                <span class="menu-text">Financeiro</span>
                <div class="submenu-horizontal">
                  <div class="submenu-item" data-tab="financeiro">📊 Finanças</div>
                  <div class="submenu-item" data-tab="patrocinios">📢 Patrocínios</div>
                  <div class="submenu-item" data-tab="bilheteria">🎫 Bilheteria</div>
                </div>
              </div>
              
              <div class="menu-item" data-menu="estadio">
                <span class="menu-icon">🏟️</span>
                <span class="menu-text">Estádio</span>
                <div class="submenu-horizontal">
                  <div class="submenu-item" data-tab="estadio">🏟️ Estádio</div>
                  <div class="submenu-item" data-tab="bilheteria">🎫 Bilheteria</div>
                  <div class="submenu-item" data-tab="manutencao">🔧 Manutenção</div>
                </div>
              </div>
              
              <div class="menu-item" data-menu="negocios">
                <span class="menu-icon">💼</span>
                <span class="menu-text">Negócios</span>
                <div class="submenu-horizontal">
                  <div class="submenu-item" data-tab="sala-negocios">💼 Sala de Negócios</div>
                  <div class="submenu-item" data-tab="patrocinios">📢 Patrocínios</div>
                  <div class="submenu-item" data-tab="merchandising">🛍️ Merchandising</div>
                </div>
              </div>
            </div>
            
            <!-- Seção COMPETIÇÕES -->
            <div class="menu-group">
              <div class="menu-item" data-menu="competicoes">
                <span class="menu-icon">🏆</span>
                <span class="menu-text">Competições</span>
                <div class="submenu-horizontal">
                  <div class="submenu-item" data-tab="brasileirao">🇧🇷 Brasileirão</div>
                  <div class="submenu-item" data-tab="libertadores">🌎 Libertadores</div>
                  <div class="submenu-item" data-tab="copa-brasil">🏆 Copa do Brasil</div>
                  <div class="submenu-item" data-tab="estadual">🏛️ Estadual</div>
                  <div class="submenu-item" data-tab="calendario">📅 Calendário</div>
                </div>
              </div>
            </div>
            
            <!-- Seção SOCIAL -->
            <div class="menu-group">
              <div class="menu-item" data-menu="social">
                <span class="menu-icon">👥</span>
                <span class="menu-text">Social</span>
                <div class="submenu-horizontal">
                  <div class="submenu-item" data-tab="imprensa">📰 Imprensa</div>
                  <div class="submenu-item" data-tab="torcida">🎭 Torcida</div>
                  <div class="submenu-item" data-tab="notificacoes">🔔 Notificações</div>
                </div>
              </div>
            </div>
            
            <!-- Seção ADMIN -->
            <div class="menu-group">
              <div class="menu-item" data-menu="admin">
                <span class="menu-icon">⚙️</span>
                <span class="menu-text">Admin</span>
                <div class="submenu-horizontal">
                  <div class="submenu-item" data-tab="configuracoes">🔧 Configurações</div>
                  <div class="submenu-item" data-tab="salvar">💾 Salvar</div>
                  <div class="submenu-item" data-tab="carregar">📂 Carregar</div>
                  <div class="submenu-item" data-tab="continuar">▶️ Continuar</div>
                  <div class="submenu-item" data-tab="sair">🚪 Sair</div>
                </div>
              </div>
            </div>
          </div>
        </nav>

        <!-- Conteúdo das Abas -->
        <div class="tab-content">
          <!-- Aba Elenco -->
          <div id="elenco-tab" class="tab-panel active">
            <div class="squad-container">
              <!-- Header do Squad -->
              <div class="squad-header">
                <div class="squad-title">
                  <h3>👥 ELENCO</h3>
                  <span class="squad-info"
                    >25 jogadores - Orçamento: R$ 200.000.000</span
                  >
                </div>
                <div class="squad-controls">
                  <button
                    class="btn-squad-report"
                    onclick="window.gameController.gerarRelatorioElenco()"
                  >
                    📊 Relatório
                  </button>
                  <button
                    class="btn-squad-analysis"
                    onclick="window.gameController.analisarElenco()"
                  >
                    🔍 Análise
                  </button>
                </div>
              </div>

              <!-- Filtros e Controles -->
              <div class="squad-filters">
                <div class="filter-group">
                  <label>Posição:</label>
                  <select
                    id="posicao-filtro"
                    onchange="window.gameController.filtrarPorPosicao(this.value)"
                  >
                    <option value="">Todas</option>
                    <option value="Goleiro">Goleiros</option>
                    <option value="Zagueiro">Zagueiros</option>
                    <option value="Lateral">Laterais</option>
                    <option value="Volante">Volantes</option>
                    <option value="Meia">Meias</option>
                    <option value="Atacante">Atacantes</option>
                  </select>
                </div>
                <div class="filter-group">
                  <label>Ordenar por:</label>
                  <select
                    id="ordenar-por"
                    onchange="window.gameController.ordenarElenco(this.value)"
                  >
                    <option value="nome">Nome</option>
                    <option value="idade">Idade</option>
                    <option value="valor">Valor</option>
                    <option value="moral">Moral</option>
                    <option value="posicao">Posição</option>
                  </select>
                </div>
                <div class="filter-group">
                  <label>Status:</label>
                  <select
                    id="status-filtro"
                    onchange="window.gameController.filtrarPorStatus(this.value)"
                  >
                    <option value="">Todos</option>
                    <option value="ativo">Ativo</option>
                    <option value="lesionado">Lesionado</option>
                    <option value="suspenso">Suspenso</option>
                    <option value="emprestado">Emprestado</option>
                  </select>
                </div>
                <div class="search-group">
                  <input
                    type="text"
                    id="busca-jogador"
                    placeholder="Buscar jogador..."
                    onkeyup="window.gameController.buscarJogador(this.value)"
                  />
                </div>
              </div>

              <!-- Estatísticas do Squad -->
              <div class="squad-stats">
                <div class="stat-card">
                  <div class="stat-icon">👥</div>
                  <div class="stat-content">
                    <span class="stat-value">25</span>
                    <span class="stat-label">Jogadores</span>
                  </div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon">💰</div>
                  <div class="stat-content">
                    <span class="stat-value">R$ 15M</span>
                    <span class="stat-label">Folha Salarial</span>
                  </div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon">📈</div>
                  <div class="stat-content">
                    <span class="stat-value">24.8</span>
                    <span class="stat-label">Idade Média</span>
                  </div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon">⭐</div>
                  <div class="stat-content">
                    <span class="stat-value">4.2</span>
                    <span class="stat-label">Habilidade Média</span>
                  </div>
                </div>
              </div>

              <!-- Lista de Jogadores -->
              <div class="squad-table-container">
                <table class="squad-table">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Nome</th>
                      <th>Posição</th>
                      <th>Idade</th>
                      <th>Habilidade</th>
                      <th>Valor</th>
                      <th>Salário</th>
                      <th>Moral</th>
                      <th>Status</th>
                      <th>Ações</th>
                    </tr>
                  </thead>
                  <tbody id="squad-table-body">
                    <!-- Jogadores serão carregados aqui -->
                  </tbody>
                </table>
              </div>

              <!-- Paginação -->
              <div class="squad-pagination">
                <button
                  class="btn-prev"
                  onclick="window.gameController.paginaAnterior()"
                >
                  ← Anterior
                </button>
                <span class="page-info">Página 1 de 1</span>
                <button
                  class="btn-next"
                  onclick="window.gameController.proximaPagina()"
                >
                  Próxima →
                </button>
              </div>
            </div>
          </div>

          <!-- Aba Mercado -->
          <div id="mercado-tab" class="tab-panel">
            <h3>🛒 MERCADO DE TRANSFERÊNCIAS</h3>
            
            <!-- Filtros do Mercado -->
            <div class="mercado-filtros">
              <div class="filtro-grupo">
                <label>Tipo de Jogador:</label>
                <select id="filtro-tipo" onchange="window.gameController.aplicarFiltrosMercado()">
                  <option value="">Todos</option>
                  <option value="estrela">⭐ Estrelas</option>
                  <option value="promessa">🌟 Promessas</option>
                  <option value="experiente">👴 Experientes</option>
                  <option value="jovem">👶 Jovens</option>
                </select>
              </div>
              
              <div class="filtro-grupo">
                <label>Posição:</label>
                <select id="filtro-posicao" onchange="window.gameController.aplicarFiltrosMercado()">
                  <option value="">Todas</option>
                  <option value="Goleiro">Goleiro</option>
                  <option value="Lateral Direito">Lateral Direito</option>
                  <option value="Lateral Esquerdo">Lateral Esquerdo</option>
                  <option value="Zagueiro">Zagueiro</option>
                  <option value="Volante">Volante</option>
                  <option value="Meia">Meia</option>
                  <option value="Atacante">Atacante</option>
                </select>
              </div>
              
              <div class="filtro-grupo">
                <label>Idade:</label>
                <select id="filtro-idade" onchange="window.gameController.aplicarFiltrosMercado()">
                  <option value="">Todas</option>
                  <option value="18-22">18-22 anos</option>
                  <option value="23-27">23-27 anos</option>
                  <option value="28-32">28-32 anos</option>
                  <option value="33+">33+ anos</option>
                </select>
              </div>
              
              <div class="filtro-grupo">
                <label>Preço:</label>
                <select id="filtro-preco" onchange="window.gameController.aplicarFiltrosMercado()">
                  <option value="">Todos</option>
                  <option value="0-10M">Até R$ 10M</option>
                  <option value="10M-30M">R$ 10M - 30M</option>
                  <option value="30M-50M">R$ 30M - 50M</option>
                  <option value="50M+">Acima de R$ 50M</option>
                </select>
              </div>
              
              <div class="filtro-grupo">
                <label>Orçamento:</label>
                <span id="orcamento-disponivel" class="orcamento-info">R$ 0</span>
              </div>
            </div>
            
            <div class="mercado-container">
              <div class="mercado-grid" id="mercado-lista">
                <!-- Lista de jogadores do mercado será carregada aqui -->
              </div>
            </div>
          </div>

          <!-- Aba Escalação -->
          <div id="escalacao-tab" class="tab-panel">
            <div class="tactics-container">
              <!-- Header da Tática -->
              <div class="tactics-header">
                <div class="tactics-title">
                  <h3>🎯 TÁTICAS</h3>
                  <span class="team-status"
                    >Flamengo - 1º no Brasileirão - Próximo Jogo: Palmeiras (C)
                    (Domingo 16h)</span
                  >
                </div>
                <div class="tactics-controls">
                  <button
                    class="btn-save-tactic"
                    onclick="window.gameController.salvarTatica()"
                  >
                    💾 Salvar Tática
                  </button>
                  <button
                    class="btn-load-tactic"
                    onclick="window.gameController.carregarTatica()"
                  >
                    📂 Carregar Tática
                  </button>
                </div>
              </div>

              <!-- Layout Principal -->
              <div class="tactics-layout">
                <!-- Painel Esquerdo - Instruções -->
                <div class="tactics-left-panel">
                  <div class="tactics-section">
                    <h4>🏟️ FORMAÇÃO</h4>
                    <select
                      id="formacao-tatica"
                      onchange="window.gameController.setFormacao(this.value)"
                    >
                      <option value="4-4-2">4-4-2</option>
                      <option value="4-3-3">4-3-3</option>
                      <option value="3-5-2">3-5-2</option>
                      <option value="4-2-3-1">4-2-3-1</option>
                      <option value="3-4-3">3-4-3</option>
                      <option value="5-3-2">5-3-2</option>
                    </select>
                  </div>

                  <div class="tactics-section">
                    <h4>🧠 MENTALIDADE</h4>
                    <select
                      id="mentalidade"
                      onchange="window.gameController.setMentalidade(this.value)"
                    >
                      <option value="defensiva">Defensiva</option>
                      <option value="cautelosa">Cautelosa</option>
                      <option value="equilibrada">Equilibrada</option>
                      <option value="positiva" selected>Positiva</option>
                      <option value="ofensiva">Ofensiva</option>
                      <option value="muito-ofensiva">Muito Ofensiva</option>
                    </select>
                  </div>

                  <div class="tactics-section">
                    <h4>⚡ ESTILO DE JOGO</h4>
                    <select
                      id="estilo-jogo"
                      onchange="window.gameController.setEstiloJogo(this.value)"
                    >
                      <option value="gegenpress">Gegenpress</option>
                      <option value="tiki-taka">Tiki-Taka</option>
                      <option value="park-the-bus">Park the Bus</option>
                      <option value="route-one">Route One</option>
                      <option value="catenaccio">Catenaccio</option>
                      <option value="total-football">Total Football</option>
                    </select>
                  </div>

                  <div class="tactics-section">
                    <h4>📋 INSTRUÇÕES DE EQUIPE</h4>
                    <div class="instructions-grid">
                      <div class="instruction-group">
                        <h5>🏃‍♂️ COM A BOLA</h5>
                        <label
                          ><input type="checkbox" id="pass-into-space" /> Passar
                          no Espaço</label
                        >
                        <label
                          ><input type="checkbox" id="play-out-defence" /> Jogar
                          pela Defesa</label
                        >
                        <label
                          ><input type="checkbox" id="work-ball-box" />
                          Trabalhar a Bola na Área</label
                        >
                        <label
                          ><input type="checkbox" id="higher-tempo" /> Ritmo
                          Mais Alto</label
                        >
                      </div>
                      <div class="instruction-group">
                        <h5>🔄 TRANSIÇÃO</h5>
                        <label
                          ><input type="checkbox" id="counter" />
                          Contra-Ataque</label
                        >
                        <label
                          ><input type="checkbox" id="counter-press" /> Pressão
                          no Contra</label
                        >
                        <label
                          ><input type="checkbox" id="take-short-kicks" />
                          Saídas Curtas</label
                        >
                      </div>
                      <div class="instruction-group">
                        <h5>🛡️ SEM A BOLA</h5>
                        <label
                          ><input type="checkbox" id="high-press" /> Pressão
                          Alta</label
                        >
                        <label
                          ><input type="checkbox" id="prevent-short-gk" />
                          Impedir Saídas Curtas</label
                        >
                        <label
                          ><input type="checkbox" id="step-up" /> Subir
                          Mais</label
                        >
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Campo Central -->
                <div class="tactics-center-panel">
                  <div class="football-pitch">
                    <div class="pitch-field">
                      <!-- Linhas do campo -->
                      <div class="pitch-lines">
                        <div class="center-circle"></div>
                        <div class="penalty-area-left"></div>
                        <div class="penalty-area-right"></div>
                        <div class="goal-area-left"></div>
                        <div class="goal-area-right"></div>
                        <div class="center-line"></div>
                        <div class="penalty-spot-left"></div>
                        <div class="penalty-spot-right"></div>
                      </div>

                      <!-- Jogadores no campo -->
                      <div id="players-on-pitch" class="players-on-pitch">
                        <!-- Jogadores serão posicionados aqui dinamicamente -->
                      </div>
                    </div>

                    <!-- Estatísticas do campo -->
                    <div class="pitch-stats">
                      <div class="stat-item">
                        <span class="stat-label">Familiaridade:</span>
                        <div class="stat-bar">
                          <div class="stat-fill" style="width: 85%"></div>
                        </div>
                        <span class="stat-value">85%</span>
                      </div>
                      <div class="stat-item">
                        <span class="stat-label">Intensidade:</span>
                        <div class="stat-bar">
                          <div
                            class="stat-fill intensity"
                            style="width: 70%"
                          ></div>
                        </div>
                        <span class="stat-value">70%</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Painel Direito - Lista de Jogadores -->
                <div class="tactics-right-panel">
                  <div class="players-list-header">
                    <h4>👥 JOGADORES</h4>
                    <div class="list-controls">
                      <select id="filter-position">
                        <option value="">Todas posições</option>
                        <option value="Goleiro">Goleiros</option>
                        <option value="Zagueiro">Zagueiros</option>
                        <option value="Lateral">Laterais</option>
                        <option value="Volante">Volantes</option>
                        <option value="Meia">Meias</option>
                        <option value="Atacante">Atacantes</option>
                      </select>
                    </div>
                  </div>

                  <div class="players-list">
                    <div class="list-header">
                      <span class="col-pos">Pos</span>
                      <span class="col-role">Função</span>
                      <span class="col-ability">Habilidade</span>
                      <span class="col-player">Jogador</span>
                      <span class="col-condition">Condição</span>
                      <span class="col-moral">Moral</span>
                    </div>
                    <div id="players-list-content" class="list-content">
                      <!-- Lista de jogadores será carregada aqui -->
                    </div>
                  </div>

                  <!-- Substituições -->
                  <div class="substitutions-section">
                    <h4>🔄 SUBSTITUIÇÕES (Máx. 7)</h4>
                    <div id="substitutions-list" class="substitutions-list">
                      <!-- Substituições serão mostradas aqui -->
                    </div>
                  </div>
                </div>
              </div>

              <!-- Ações da Tática -->
              <div class="tactics-actions">
                <button
                  class="btn-auto-pick"
                  onclick="window.gameController.escalacaoAutomatica()"
                >
                  🤖 Escalação Automática
                </button>
                <button
                  class="btn-clear-tactics"
                  onclick="window.gameController.limparTatica()"
                >
                  🗑️ Limpar Tática
                </button>
                <button
                  class="btn-simulate-match"
                  onclick="window.gameController.simularJogo()"
                >
                  ⚽ Simular Jogo
                </button>
              </div>
            </div>
          </div>

          <!-- Aba Financeiro -->
          <div id="financeiro-tab" class="tab-panel">
            <div class="financeiro-info">
              <h3>💰 Informações Financeiras Detalhadas</h3>
              
              <div class="financeiro-grid">
                <div class="financeiro-item">
                  <span>Orçamento Atual:</span>
                  <span id="orcamento-atual">R$ 0</span>
                </div>
                <div class="financeiro-item">
                  <span>Folha Salarial Mensal:</span>
                  <span id="folha-salarial">R$ 0</span>
                </div>
                <div class="financeiro-item">
                  <span>Próximos Vencimentos:</span>
                  <span id="proximos-vencimentos">R$ 0</span>
                </div>
                <div class="financeiro-item">
                  <span>Dívidas Totais:</span>
                  <span id="dividas-totais">R$ 0</span>
                </div>
                <div class="financeiro-item">
                  <span>Receita Mensal:</span>
                  <span id="receita-mensal">R$ 5.000.000</span>
                </div>
                <div class="financeiro-item">
                  <span>Patrocínios:</span>
                  <span id="patrocinios">R$ 2.500.000</span>
                </div>
              </div>
              
              <div class="financeiro-detalhes">
                <div class="detalhe-secao">
                  <h4>🏦 Dívidas por Clube</h4>
                  <div id="dividas-clubes" class="dividas-lista">
                    <p class="no-data">Nenhuma dívida pendente</p>
                  </div>
                </div>
                
                <div class="detalhe-secao">
                  <h4>📋 Jogadores por Empréstimo</h4>
                  <div id="emprestimos-ativos" class="emprestimos-lista">
                    <p class="no-data">Nenhum empréstimo ativo</p>
                  </div>
                </div>
                
                <div class="detalhe-secao">
                  <h4>📊 Projeção Financeira</h4>
                  <div class="projecao-financeira">
                    <div class="projecao-item">
                      <span>Próximo Mês:</span>
                      <span id="projecao-proximo-mes">R$ +2.500.000</span>
                    </div>
                    <div class="projecao-item">
                      <span>3 Meses:</span>
                      <span id="projecao-3-meses">R$ +7.500.000</span>
                    </div>
                    <div class="projecao-item">
                      <span>6 Meses:</span>
                      <span id="projecao-6-meses">R$ +15.000.000</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Aba Estádio -->
          <div id="estadio-tab" class="tab-panel">
            <h3>🏟️ ESTÁDIO</h3>
            <div class="estadio-container">
              <div class="estadio-info">
                <div class="estadio-card">
                  <h4>🏟️ Mineirão</h4>
                  <div class="estadio-stats">
                    <div class="stat-item">
                      <span class="stat-label">Capacidade:</span>
                      <span class="stat-value">61.846 lugares</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Ocupação Média:</span>
                      <span class="stat-value">85%</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Estado:</span>
                      <span class="stat-value">Excelente</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Receita Média:</span>
                      <span class="stat-value">R$ 2.5M por jogo</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Aba Bilheteria -->
          <div id="bilheteria-tab" class="tab-panel">
            <h3>🎫 BILHETERIA</h3>
            <div class="bilheteria-container">
              <div class="bilheteria-stats">
                <div class="stat-card">
                  <h4>📊 Estatísticas</h4>
                  <div class="stat-grid">
                    <div class="stat-item">
                      <span class="stat-label">Ingressos Vendidos:</span>
                      <span class="stat-value">52.569</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Receita Total:</span>
                      <span class="stat-value">R$ 2.1M</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Preço Médio:</span>
                      <span class="stat-value">R$ 40</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Aba Manutenção -->
          <div id="manutencao-tab" class="tab-panel">
            <h3>🔧 MANUTENÇÃO</h3>
            <div class="manutencao-container">
              <div class="manutencao-status">
                <h4>🏟️ Status do Estádio</h4>
                <div class="status-grid">
                  <div class="status-item">
                    <span class="status-label">Gramado:</span>
                    <span class="status-value excelente">Excelente</span>
                  </div>
                  <div class="status-item">
                    <span class="status-label">Iluminação:</span>
                    <span class="status-value bom">Bom</span>
                  </div>
                  <div class="status-item">
                    <span class="status-label">Vestiários:</span>
                    <span class="status-value excelente">Excelente</span>
                  </div>
                  <div class="status-item">
                    <span class="status-label">Estacionamento:</span>
                    <span class="status-value bom">Bom</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Aba Sala de Negócios -->
          <div id="sala-negocios-tab" class="tab-panel">
            <h3>💼 SALA DE NEGÓCIOS</h3>
            <div class="negocios-container">
              <div class="negocios-grid">
                <div class="negocio-card">
                  <h4>🤝 Reuniões Agendadas</h4>
                  <div class="reunioes-lista">
                    <div class="reuniao-item">
                      <span class="reuniao-time">14:00</span>
                      <span class="reuniao-tipo">Patrocinador</span>
                      <span class="reuniao-desc">Nike - Renovação Contrato</span>
                    </div>
                    <div class="reuniao-item">
                      <span class="reuniao-time">16:30</span>
                      <span class="reuniao-tipo">Diretoria</span>
                      <span class="reuniao-desc">Planejamento Temporada</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Aba Patrocínios -->
          <div id="patrocinios-tab" class="tab-panel">
            <h3>📢 PATROCÍNIOS</h3>
            <div class="patrocinios-container">
              <div class="patrocinios-grid">
                <div class="patrocinio-card">
                  <h4>Nike</h4>
                  <div class="patrocinio-info">
                    <span class="valor">R$ 15M/ano</span>
                    <span class="duracao">2024-2027</span>
                    <span class="tipo">Material Esportivo</span>
                  </div>
                </div>
                <div class="patrocinio-card">
                  <h4>Banco Itaú</h4>
                  <div class="patrocinio-info">
                    <span class="valor">R$ 15M/ano</span>
                    <span class="duracao">2023-2025</span>
                    <span class="tipo">Patrocinador Master</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Aba Merchandising -->
          <div id="merchandising-tab" class="tab-panel">
            <h3>🛍️ MERCHANDISING</h3>
            <div class="merchandising-container">
              <div class="merchandising-stats">
                <div class="stat-card">
                  <h4>📈 Vendas</h4>
                  <div class="stat-grid">
                    <div class="stat-item">
                      <span class="stat-label">Camisas Vendidas:</span>
                      <span class="stat-value">15.432</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Receita Total:</span>
                      <span class="stat-value">R$ 1.2M</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Produto Mais Vendido:</span>
                      <span class="stat-value">Camisa Principal</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Aba Social -->
          <div id="social-tab" class="tab-panel">
            <h3>📈 PERFIL SOCIAL</h3>
            <div class="social-container">
              <div class="social-stats">
                <div class="stat-card">
                  <h4>📱 Redes Sociais</h4>
                  <div class="stat-grid">
                    <div class="stat-item">
                      <span class="stat-label">Instagram:</span>
                      <span class="stat-value">2.5M seguidores</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Twitter:</span>
                      <span class="stat-value">1.8M seguidores</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Facebook:</span>
                      <span class="stat-value">3.2M curtidas</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Aba Imprensa -->
          <div id="imprensa-tab" class="tab-panel">
            <div class="imprensa-header">
              <h3>📰 Imprensa</h3>
              <div class="imprensa-acoes">
                <button class="btn-gerar-noticia" onclick="window.gameController.gerarNoticiaPolêmica()">
                  🔥 Gerar Polêmica
                </button>
                <button class="btn-gerar-falta" onclick="window.gameController.gerarFaltaAleatoria()">
                  ⚠️ Falta Treino
                </button>
              </div>
            </div>
            
            <div class="imprensa-stats">
              <div class="stat-item">
                <span class="stat-label">Reputação do Clube:</span>
                <span class="stat-value" id="reputacao-clube">50</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Moral Média:</span>
                <span class="stat-value" id="moral-media">75</span>
              </div>
            </div>
            
            <div class="imprensa-container">
              <div class="imprensa-noticias" id="imprensa-noticias">
                <!-- Notícias serão geradas dinamicamente -->
              </div>
            </div>
          </div>
          
          <!-- Aba Torcida -->
          <div id="torcida-tab" class="tab-panel">
            <h3>🎭 TORCIDA</h3>
            <div class="torcida-container">
              <div class="torcida-opiniao" id="torcida-opiniao">
                <!-- Opinião da torcida será gerada dinamicamente -->
              </div>
            </div>
          </div>

          <!-- Aba Treinadores -->
          <div id="treinadores-tab" class="tab-panel">
            <div class="treinadores-header">
              <h3>👨‍💼 Centro de Treinadores</h3>
              <div class="treinadores-filtros">
                <select id="filtro-disponibilidade">
                  <option value="">Todos</option>
                  <option value="disponivel">Disponíveis</option>
                  <option value="contratado">Contratados</option>
                </select>
                <select id="filtro-especialidade">
                  <option value="">Todas especialidades</option>
                  <option value="Ofensivo">Ofensivo</option>
                  <option value="Tático">Tático</option>
                  <option value="Defensivo">Defensivo</option>
                  <option value="Base">Base</option>
                </select>
              </div>
            </div>
            
            <div class="treinador-atual">
              <h4>🎯 Treinador Atual</h4>
              <div id="treinador-atual-info" class="treinador-info">
                <p>Nenhum treinador contratado</p>
              </div>
            </div>
            
            <div id="treinadores-container" class="treinadores-grid"></div>
          </div>

          <!-- Aba Dono -->
          <div id="dono-tab" class="tab-panel">
            <div id="dono-container" class="staff-container"></div>
          </div>

          <!-- Aba Colaboradores -->
          <div id="colaboradores-tab" class="tab-panel">
            <div id="colaboradores-container" class="staff-container"></div>
          </div>

          <!-- Aba Competições -->
          <div id="competicoes-tab" class="tab-panel">
            <div class="competicoes-header">
              <h3>🏆 Competições</h3>
              <div class="temporada-info">
                <span>Temporada: 2025</span>
                <button class="btn-simular-rodada" onclick="window.gameController.simularProximaRodada()">
                  ⚽ Simular Próxima Rodada
                </button>
              </div>
            </div>
            
            <div class="competicoes-grid">
              <div class="competicao-card brasileirao" data-competicao="brasileirao">
                <div class="competicao-header">
                  <div class="competicao-logo">🏆</div>
                  <h4>Brasileirão Série A</h4>
                  <span class="status em-andamento">Em andamento</span>
                </div>
                <div class="competicao-info">
                  <p><strong>Posição:</strong> <span id="posicao-brasileirao">-</span></p>
                  <p><strong>Pontos:</strong> <span id="pontos-brasileirao">0</span></p>
                  <p><strong>Jogos:</strong> <span id="jogos-brasileirao">0/38</span></p>
                </div>
                <div class="competicao-acoes">
                  <button class="btn-ver-tabela" onclick="window.gameController.verTabelaBrasileirao()">
                    📊 Tabela
                  </button>
                  <button class="btn-ver-premios" onclick="window.gameController.verPremiosBrasileirao()">
                    🏅 Prêmios
                  </button>
                </div>
              </div>

              <div class="competicao-card libertadores" data-competicao="libertadores">
                <div class="competicao-header">
                  <div class="competicao-logo">🌍</div>
                  <h4>Libertadores</h4>
                  <span class="status nao-classificado">Não classificado</span>
                </div>
                <div class="competicao-info">
                  <p><strong>Fase:</strong> <span id="fase-libertadores">-</span></p>
                  <p><strong>Próximo jogo:</strong> <span id="proximo-libertadores">-</span></p>
                  <p><strong>Prêmio:</strong> R$ 500.000</p>
                </div>
                <div class="competicao-acoes">
                  <button class="btn-ver-grupos" onclick="window.gameController.verTabelaLibertadores()">
                    🏆 Grupos
                  </button>
                  <button class="btn-ver-premios" onclick="window.gameController.verPremiosLibertadores()">
                    🏅 Prêmios
                  </button>
                </div>
              </div>

              <div class="competicao-card copa-brasil" data-competicao="copa-brasil">
                <div class="competicao-header">
                  <div class="competicao-logo">🏆</div>
                  <h4>Copa do Brasil</h4>
                  <span class="status nao-iniciou">Não iniciou</span>
                </div>
                <div class="competicao-info">
                  <p><strong>Fase:</strong> <span id="fase-copa-brasil">-</span></p>
                  <p><strong>Próximo jogo:</strong> <span id="proximo-copa-brasil">-</span></p>
                  <p><strong>Prêmio:</strong> R$ 250.000</p>
                </div>
                <div class="competicao-acoes">
                  <button class="btn-ver-chaveamento" onclick="window.gameController.verTabelaCopaBrasil()">
                    🏆 Chaveamento
                  </button>
                  <button class="btn-ver-premios" onclick="window.gameController.verPremiosCopaBrasil()">
                    🏅 Prêmios
                  </button>
                </div>
              </div>

              <div class="competicao-card estadual" data-competicao="estadual">
                <div class="competicao-header">
                  <div class="competicao-logo">🏆</div>
                  <h4>Campeonato Mineiro</h4>
                  <span class="status em-andamento">Em andamento</span>
                </div>
                <div class="competicao-info">
                  <p><strong>Posição:</strong> <span id="posicao-estadual">-</span></p>
                  <p><strong>Pontos:</strong> <span id="pontos-estadual">0</span></p>
                  <p><strong>Fase:</strong> <span id="fase-estadual">Primeira Fase</span></p>
                </div>
                <div class="competicao-acoes">
                  <button class="btn-ver-tabela" onclick="window.gameController.verTabelaEstadual()">
                    📊 Tabela
                  </button>
                  <button class="btn-ver-premios" onclick="window.gameController.verPremiosEstadual()">
                    🏅 Prêmios
                  </button>
                </div>
              </div>
            </div>
            
            <!-- Seção de Histórico e Prêmios -->
            <div class="competicoes-extra">
              <div class="historico-campeoes">
                <h4>🏆 Histórico de Campeões</h4>
                <div class="historico-grid">
                  <div class="historico-item">
                    <span class="ano">2024</span>
                    <span class="campeao">Palmeiras</span>
                    <span class="competicao">Brasileirão</span>
                  </div>
                  <div class="historico-item">
                    <span class="ano">2024</span>
                    <span class="campeao">Flamengo</span>
                    <span class="competicao">Libertadores</span>
                  </div>
                  <div class="historico-item">
                    <span class="ano">2024</span>
                    <span class="campeao">São Paulo</span>
                    <span class="competicao">Copa do Brasil</span>
                  </div>
                </div>
              </div>
              
              <div class="premios-individuais">
                <h4>🏅 Prêmios Individuais</h4>
                <div class="premios-grid">
                  <div class="premio-item">
                    <span class="premio-tipo">Artilharia</span>
                    <span class="premio-valor">R$ 200.000</span>
                  </div>
                  <div class="premio-item">
                    <span class="premio-tipo">Craque</span>
                    <span class="premio-valor">R$ 300.000</span>
                  </div>
                  <div class="premio-item">
                    <span class="premio-tipo">Goleiro</span>
                    <span class="premio-valor">R$ 100.000</span>
                  </div>
                  <div class="premio-item">
                    <span class="premio-tipo">Revelação</span>
                    <span class="premio-valor">R$ 80.000</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Títulos -->
          <div id="titulos-tab" class="tab-panel">
            <div class="titulos-header">
              <h3>🏆 Títulos e Conquistas</h3>
              <div class="estatisticas-clube">
                <div class="stat-item">
                  <span class="stat-label">Total de Títulos:</span>
                  <span class="stat-value" id="total-titulos">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Ano de Fundação:</span>
                  <span class="stat-value" id="ano-fundacao">1895</span>
                </div>
              </div>
            </div>
            <div class="titulos-categorias">
              <div class="categoria-titulos">
                <h4>🏆 Brasileirão</h4>
                <div id="titulos-brasileirao" class="titulos-lista">
                  <p class="sem-titulos">Nenhum título conquistado</p>
                </div>
              </div>

              <div class="categoria-titulos">
                <h4>🌍 Libertadores</h4>
                <div id="titulos-libertadores" class="titulos-lista">
                  <p class="sem-titulos">Nenhum título conquistado</p>
                </div>
              </div>

              <div class="categoria-titulos">
                <h4>🏆 Copa do Brasil</h4>
                <div id="titulos-copa-brasil" class="titulos-lista">
                  <p class="sem-titulos">Nenhum título conquistado</p>
                </div>
              </div>

              <div class="categoria-titulos">
                <h4>🏆 Estaduais</h4>
                <div id="titulos-estaduais" class="titulos-lista">
                  <p class="sem-titulos">Nenhum título conquistado</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Simulação -->
          <div id="simulacao-tab" class="tab-panel">
            <div class="simulacao-header">
              <h3>⚽ Simulação de Partidas</h3>
              <div class="simulacao-controles">
                <button
                  class="btn-simular-proximo-jogo"
                  onclick="window.gameController.simularProximoJogo()"
                >
                  ⚽ Próximo Jogo
                </button>
                <button
                  class="btn-simular-rodada"
                  onclick="window.gameController.simularRodada()"
                >
                  📅 Simular Rodada
                </button>
                <button
                  class="btn-simular-temporada"
                  onclick="window.gameController.simularTemporada()"
                >
                  🏆 Simular Temporada
                </button>
              </div>
            </div>
            <div class="simulacao-resultados">
              <div class="proximo-jogo">
                <h4>Próximo Jogo</h4>
                <div id="proximo-jogo-info" class="jogo-info">
                  <p>Nenhum jogo agendado</p>
                </div>
              </div>
              <div class="ultimos-resultados">
                <h4>Últimos Resultados</h4>
                <div id="ultimos-resultados" class="resultados-lista">
                  <p>Nenhum resultado disponível</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Parceiros -->
          <div id="parceiros-tab" class="tab-panel">
            <div id="parceiros-container" class="staff-container"></div>
          </div>

          <!-- Aba Tática -->
          <div id="tatica-tab" class="tab-panel">
            <div class="tatica-container">
              <h3>Tática e Formação</h3>
              <div class="tatica-grid">
                <div class="tatica-item">
                  <h4>Formação Principal</h4>
                  <select
                    id="formacao-principal"
                    onchange="window.gameController.setFormacao(this.value)"
                  >
                    <option value="4-4-2">4-4-2</option>
                    <option value="4-3-3">4-3-3</option>
                    <option value="3-5-2">3-5-2</option>
                    <option value="4-2-3-1">4-2-3-1</option>
                    <option value="3-4-3">3-4-3</option>
                    <option value="5-3-2">5-3-2</option>
                  </select>
                </div>
                <div class="tatica-item">
                  <h4>Estilo de Jogo</h4>
                  <select id="estilo-jogo">
                    <option value="posse">Posse de Bola</option>
                    <option value="contra-ataque">Contra-Ataque</option>
                    <option value="pressao">Pressão Alta</option>
                    <option value="defensivo">Defensivo</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Treino -->
          <div id="treino-tab" class="tab-panel">
            <div class="treino-container">
              <h3>🏋️ Centro de Treinamento Avançado</h3>
              
              <div class="treino-status">
                <h4>📊 Status do Treinamento</h4>
                <div class="treino-stats">
                  <div class="treino-stat">
                    <span class="stat-label">Condição Física:</span>
                    <div class="stat-bar">
                      <div class="stat-fill" style="width: 75%"></div>
                    </div>
                    <span class="stat-value">75%</span>
                  </div>
                  <div class="treino-stat">
                    <span class="stat-label">Moral da Equipe:</span>
                    <div class="stat-bar">
                      <div class="stat-fill" style="width: 82%"></div>
                    </div>
                    <span class="stat-value">82%</span>
                  </div>
                  <div class="treino-stat">
                    <span class="stat-label">Familiaridade Tática:</span>
                    <div class="stat-bar">
                      <div class="stat-fill" style="width: 68%"></div>
                    </div>
                    <span class="stat-value">68%</span>
                  </div>
                </div>
              </div>
              
              <div class="treino-grid">
                <div class="treino-item">
                  <h4>🏃‍♂️ Treino Físico</h4>
                  <p>Melhora resistência, velocidade e força</p>
                  <div class="treino-beneficios">
                    <span>+5 Resistência</span>
                    <span>+3 Velocidade</span>
                    <span>+2 Força</span>
                  </div>
                  <button class="btn-treino" onclick="window.gameController.iniciarTreino('fisico')">
                    🏃‍♂️ Iniciar Treino
                  </button>
                </div>
                
                <div class="treino-item">
                  <h4>⚽ Treino Técnico</h4>
                  <p>Melhora finalização, passe e drible</p>
                  <div class="treino-beneficios">
                    <span>+4 Finalização</span>
                    <span>+3 Passe</span>
                    <span>+2 Drible</span>
                  </div>
                  <button class="btn-treino" onclick="window.gameController.iniciarTreino('tecnico')">
                    ⚽ Iniciar Treino
                  </button>
                </div>
                
                <div class="treino-item">
                  <h4>🧠 Treino Mental</h4>
                  <p>Melhora concentração, moral e liderança</p>
                  <div class="treino-beneficios">
                    <span>+5 Moral</span>
                    <span>+3 Concentração</span>
                    <span>+2 Liderança</span>
                  </div>
                  <button class="btn-treino" onclick="window.gameController.iniciarTreino('mental')">
                    🧠 Iniciar Treino
                  </button>
                </div>
                
                <div class="treino-item">
                  <h4>🎯 Treino Tático</h4>
                  <p>Melhora posicionamento e trabalho em equipe</p>
                  <div class="treino-beneficios">
                    <span>+4 Posicionamento</span>
                    <span>+3 Trabalho em Equipe</span>
                    <span>+2 Visão de Jogo</span>
                  </div>
                  <button class="btn-treino" onclick="window.gameController.iniciarTreino('tatico')">
                    🎯 Iniciar Treino
                  </button>
                </div>
              </div>
              
              <div class="treino-acoes">
                <button class="btn-treino-especial" onclick="window.gameController.treinoEspecial()">
                  🌟 Treino Especial
                </button>
                <button class="btn-treino-grupo" onclick="window.gameController.treinoGrupo()">
                  👥 Treino em Grupo
                </button>
              </div>
            </div>
          </div>
          
          <!-- Aba Titulares -->
          <div id="titulares-tab" class="tab-panel">
            <h3>⚽ TITULARES</h3>
            <div class="titulares-container">
              <div class="titulares-grid" id="titulares-grid">
                <!-- Titulares serão carregados aqui -->
              </div>
            </div>
          </div>
          
          <!-- Aba Reservas -->
          <div id="reservas-tab" class="tab-panel">
            <h3>🔄 RESERVAS</h3>
            <div class="reservas-container">
              <div class="reservas-grid" id="reservas-grid">
                <!-- Reservas serão carregados aqui -->
              </div>
            </div>
          </div>
          
          <!-- Aba Lesionados -->
          <div id="lesionados-tab" class="tab-panel">
            <h3>🏥 LESIONADOS</h3>
            <div class="lesionados-container">
              <div class="lesionados-grid" id="lesionados-grid">
                <!-- Lesionados serão carregados aqui -->
              </div>
            </div>
          </div>
          
          <!-- Aba Promessas -->
          <div id="promessas-tab" class="tab-panel">
            <h3>⭐ PROMESSAS</h3>
            <div class="promessas-container">
              <div class="promessas-grid" id="promessas-grid">
                <!-- Promessas serão carregados aqui -->
              </div>
            </div>
          </div>
          
          <!-- Aba Contratos -->
          <div id="contratos-tab" class="tab-panel">
            <h3>📋 CONTRATOS</h3>
            <div class="contratos-container">
              <div class="contratos-table" id="contratos-table">
                <!-- Contratos serão carregados aqui -->
              </div>
            </div>
          </div>

          <!-- Aba Jogos -->
          <div id="jogos-tab" class="tab-panel">
            <div class="jogos-container">
              <h3>Calendário de Jogos</h3>
              <div class="jogos-grid">
                <div class="jogo-item">
                  <h4>Próximo Jogo</h4>
                  <div class="jogo-info">
                    <span class="time-casa">Atlético Mineiro</span>
                    <span class="vs">vs</span>
                    <span class="time-visitante">Cruzeiro</span>
                  </div>
                  <button
                    class="btn-jogar"
                    onclick="window.gameController.jogarPartida()"
                  >
                    Jogar Partida
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Scouts -->
          <div id="scouts-tab" class="tab-panel">
            <div class="scouts-container">
              <h3>Scouts e Observadores</h3>
              <div class="scouts-grid">
                <div class="scout-item">
                  <h4>🔍 Buscar Jogadores</h4>
                  <p>Encontre talentos no mercado</p>
                  <button
                    class="btn-scout"
                    onclick="window.gameController.buscarJogadores()"
                  >
                    Buscar
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Contratar -->
          <div id="contratar-tab" class="tab-panel">
            <div class="contratar-container">
              <h3>Contratar Jogadores</h3>
              <div class="contratar-filtros">
                <input
                  type="text"
                  id="busca-contratar"
                  placeholder="Buscar jogador..."
                />
                <select id="posicao-contratar">
                  <option value="">Todas as posições</option>
                  <option value="Goleiro">Goleiros</option>
                  <option value="Zagueiro">Zagueiros</option>
                  <option value="Lateral">Laterais</option>
                  <option value="Volante">Volantes</option>
                  <option value="Meia">Meias</option>
                  <option value="Atacante">Atacantes</option>
                </select>
                <select id="valor-contratar">
                  <option value="">Qualquer valor</option>
                  <option value="baixo">Até R$ 5M</option>
                  <option value="medio">R$ 5M - R$ 20M</option>
                  <option value="alto">Acima de R$ 20M</option>
                </select>
              </div>
              <div id="contratar-lista" class="contratar-grid"></div>
            </div>
          </div>

          <!-- Aba Negociações -->
          <div id="negociacoes-tab" class="tab-panel">
            <div class="negociacoes-container">
              <h3>💰 Negociações Avançadas</h3>
              <div class="negociacoes-acoes">
                <button
                  class="btn-nova-negociacao"
                  onclick="window.gameController.iniciarNegociacao()"
                >
                  🆕 Nova Negociação
                </button>
                <button class="btn-pichincha" onclick="window.gameController.modoPichincha()">
                  🪙 Modo Pichincha
                </button>
                <button class="btn-barganha" onclick="window.gameController.modoBarganha()">
                  💰 Modo Barganha
                </button>
              </div>
              
              <div class="negociacoes-tipos">
                <div class="tipo-negociacao">
                  <h4>🔄 Troca de Jogadores</h4>
                  <p>Ofereça jogadores em troca de outros</p>
                  <button onclick="window.gameController.iniciarTroca()">Iniciar Troca</button>
                </div>
                
                <div class="tipo-negociacao">
                  <h4>📈 Venda de Jogadores</h4>
                  <p>Coloque jogadores no mercado</p>
                  <button onclick="window.gameController.venderJogador()">Vender Jogador</button>
                </div>
                
                <div class="tipo-negociacao">
                  <h4>📋 Empréstimos</h4>
                  <p>Empreste ou receba jogadores</p>
                  <button onclick="window.gameController.gerenciarEmprestimos()">Gerenciar</button>
                </div>
              </div>
              
              <div id="negociacoes-lista" class="negociacoes-grid">
                <p class="no-data">Nenhuma negociação em andamento</p>
              </div>
            </div>
          </div>

          <!-- Aba Patrocínios -->
          <div id="patrocinios-tab" class="tab-panel">
            <div class="patrocinios-container">
              <h3>Patrocínios e Marketing</h3>
              <div class="patrocinios-grid">
                <div class="patrocinio-item">
                  <h4>📢 Patrocinador Master</h4>
                  <p>MRV Engenharia - R$ 50 milhões/ano</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Bilheteria -->
          <div id="bilheteria-tab" class="tab-panel">
            <div class="bilheteria-container">
              <h3>Bilheteria e Receita</h3>
              <div class="bilheteria-grid">
                <div class="bilheteria-item">
                  <h4>🎫 Último Jogo</h4>
                  <p>Público: 45.000 pessoas</p>
                  <p>Receita: R$ 2.250.000</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Mídia -->
          <div id="midia-tab" class="tab-panel">
            <div class="midia-container">
              <h3>Mídia e Imprensa</h3>
              <div class="midia-grid">
                <div class="midia-item">
                  <h4>📺 Entrevista</h4>
                  <p>Dar entrevista para a imprensa</p>
                  <button
                    class="btn-midia"
                    onclick="window.gameController.darEntrevista()"
                  >
                    Entrevista
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Torcida -->
          <div id="torcida-tab" class="tab-panel">
            <div class="torcida-container">
              <h3>Torcida e Apoio</h3>
              <div class="torcida-grid">
                <div class="torcida-item">
                  <h4>🎭 Satisfação da Torcida</h4>
                  <div class="torcida-bar">
                    <div class="torcida-fill" style="width: 85%"></div>
                  </div>
                  <p>85% satisfeita</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Configurações -->
          <div id="configuracoes-tab" class="tab-panel">
            <div class="configuracoes-container">
              <h3>Configurações do Jogo</h3>
              <div class="configuracoes-grid">
                <div class="config-item">
                  <h4>🎮 Dificuldade</h4>
                  <select id="dificuldade">
                    <option value="facil">Fácil</option>
                    <option value="medio" selected>Médio</option>
                    <option value="dificil">Difícil</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Salvar -->
          <div id="salvar-tab" class="tab-panel">
            <div class="salvar-container">
              <h3>Salvar Jogo</h3>
              <div class="salvar-grid">
                <div class="salvar-item">
                  <h4>💾 Salvar Progresso</h4>
                  <p>Salve seu progresso atual</p>
                  <button
                    class="btn-salvar"
                    onclick="window.gameController.salvarJogo()"
                  >
                    Salvar
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Organização -->
          <div id="organizacao-tab" class="tab-panel">
            <div class="organizacao-container">
              <h3>Organização do Time</h3>
              <div class="organizacao-grid">
                <div class="organizacao-item">
                  <h4>🏗️ Estrutura Organizacional</h4>
                  <div class="estrutura-tree">
                    <div class="nivel-1">👑 Presidente</div>
                    <div class="nivel-2">👨‍💼 Diretor de Futebol</div>
                    <div class="nivel-3">👨‍💼 Técnico Principal</div>
                    <div class="nivel-4">👨‍💼 Auxiliar Técnico</div>
                    <div class="nivel-4">👨‍💼 Preparador Físico</div>
                    <div class="nivel-4">👨‍💼 Preparador de Goleiros</div>
                    <div class="nivel-4">👨‍💼 Fisioterapeuta</div>
                    <div class="nivel-4">👨‍💼 Médico</div>
                    <div class="nivel-4">👨‍💼 Psicólogo</div>
                  </div>
                </div>
                <div class="organizacao-item">
                  <h4>📊 Estatísticas do Clube</h4>
                  <div class="stats-grid">
                    <div class="stat-item">
                      <span class="stat-label">Jogadores no Elenco:</span>
                      <span class="stat-value" id="total-jogadores">0</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Média de Idade:</span>
                      <span class="stat-value" id="media-idade">0</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Valor Total do Elenco:</span>
                      <span class="stat-value" id="valor-elenco">R$ 0</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">Folha Salarial Mensal:</span>
                      <span class="stat-value" id="folha-mensal">R$ 0</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Continuar -->
          <div id="continuar-tab" class="tab-panel">
            <div class="continuar-container">
              <h3>Continuar Jogo</h3>
              <div class="continuar-grid">
                <div class="continuar-item">
                  <h4>▶️ Continuar Partida</h4>
                  <p>Continue de onde parou</p>
                  <button
                    class="btn-continuar"
                    onclick="window.gameController.continuarJogo()"
                  >
                    Continuar
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Carregar -->
          <div id="carregar-tab" class="tab-panel">
            <div class="carregar-container">
              <h3>Carregar Jogo</h3>
              <div class="carregar-grid">
                <div class="carregar-item">
                  <h4>📂 Carregar Progresso</h4>
                  <p>Carregue um jogo salvo</p>
                  <button
                    class="btn-carregar"
                    onclick="window.gameController.carregarJogo()"
                  >
                    Carregar
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Aba Brasileirão -->
          <div id="brasileirao-tab" class="tab-panel">
            <div class="competicao-container">
              <div class="competicao-header">
                <h3>🇧🇷 BRASILEIRÃO SÉRIE A</h3>
                <div class="competicao-controls">
                  <button onclick="window.gameController.simularProximaRodada('Brasileirão')" class="btn-simular">
                    ▶️ Simular Próxima Rodada
                  </button>
                  <button onclick="window.gameController.verCalendario('Brasileirão')" class="btn-calendario">
                    📅 Ver Calendário
                  </button>
                </div>
              </div>
              <div class="tabela-competicao">
                <p>Carregando tabela...</p>
              </div>
            </div>
          </div>
          
          <!-- Aba Libertadores -->
          <div id="libertadores-tab" class="tab-panel">
            <div class="competicao-container">
              <div class="competicao-header">
                <h3>🌎 LIBERTADORES</h3>
                <div class="competicao-controls">
                  <button onclick="window.gameController.simularProximaRodada('Libertadores')" class="btn-simular">
                    ▶️ Simular Próxima Rodada
                  </button>
                  <button onclick="window.gameController.verCalendario('Libertadores')" class="btn-calendario">
                    📅 Ver Calendário
                  </button>
                </div>
              </div>
              <div class="tabela-competicao">
                <p>Carregando grupos...</p>
              </div>
            </div>
          </div>
          
          <!-- Aba Copa do Brasil -->
          <div id="copa-brasil-tab" class="tab-panel">
            <div class="competicao-container">
              <div class="competicao-header">
                <h3>🏆 COPA DO BRASIL</h3>
                <div class="competicao-controls">
                  <button onclick="window.gameController.simularProximaRodada('Copa do Brasil')" class="btn-simular">
                    ▶️ Simular Próxima Rodada
                  </button>
                  <button onclick="window.gameController.verCalendario('Copa do Brasil')" class="btn-calendario">
                    📅 Ver Calendário
                  </button>
                </div>
              </div>
              <div class="tabela-competicao">
                <p>Carregando chaveamento...</p>
              </div>
            </div>
          </div>
          
          <!-- Aba Estadual -->
          <div id="estadual-tab" class="tab-panel">
            <div class="competicao-container">
              <div class="competicao-header">
                <h3>🏛️ CAMPEONATO MINEIRO</h3>
                <div class="competicao-controls">
                  <button onclick="window.gameController.simularProximaRodada('Estadual')" class="btn-simular">
                    ▶️ Simular Próxima Rodada
                  </button>
                  <button onclick="window.gameController.verCalendario('Estadual')" class="btn-calendario">
                    📅 Ver Calendário
                  </button>
                </div>
              </div>
              <div class="tabela-competicao">
                <p>Carregando tabela...</p>
              </div>
            </div>
          </div>
          
          <!-- Aba Calendário -->
          <div id="calendario-tab" class="tab-panel">
            <div class="competicao-container">
              <div class="competicao-header">
                <h3>📅 CALENDÁRIO ANUAL</h3>
              </div>
              <div class="calendario-content">
                <p>Carregando calendário...</p>
              </div>
            </div>
          </div>
          
          <!-- Aba Imprensa -->
          <div id="imprensa-tab" class="tab-panel">
            <div class="imprensa-container">
              <div class="imprensa-header">
                <h3>📰 IMPRENSA</h3>
                <button onclick="window.gameController.gerarNoticiaAleatoria()" class="btn-gerar-noticia">
                  📝 Gerar Notícia
                </button>
              </div>
              <div id="imprensa-noticias" class="imprensa-content">
                <p>Carregando notícias...</p>
              </div>
            </div>
          </div>
          
          <!-- Aba Torcida -->
          <div id="torcida-tab" class="tab-panel">
            <div id="torcida-opiniao" class="torcida-content">
              <p>Carregando opinião da torcida...</p>
            </div>
          </div>
          
          <!-- Aba Notificações -->
          <div id="notificacoes-tab" class="tab-panel">
            <div class="notificacoes-container">
              <div class="notificacoes-header">
                <h3>🔔 NOTIFICAÇÕES</h3>
                <button onclick="window.gameController.limparNotificacoes()" class="btn-limpar-notificacoes">
                  🗑️ Limpar Todas
                </button>
              </div>
              <div id="notificacoes-container" class="notificacoes-content">
                <p>Nenhuma notificação ainda.</p>
              </div>
            </div>
          </div>
          
          <!-- Aba Perfil Social -->
          <div id="social-tab" class="tab-panel">
            <div id="perfil-social-container"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para detalhes do jogador -->
    <div id="modal-jogador" class="modal hidden">
      <div class="modal-content">
        <span class="close">&times;</span>
        <div id="modal-jogador-content"></div>
      </div>
    </div>

    <!-- Scripts -->
    <!-- PyScript: Python no navegador -->
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <div id="python-repl" style="margin:20px 0; padding:16px; background: rgba(255,255,255,0.06); border-radius: 12px;">
      <h3 style="margin:0 0 10px 0;">🐍 Python no Navegador</h3>
      <py-repl></py-repl>
    </div>
    <script src="js/api.js"></script>
    <script src="js/football-data-api.js"></script>
    <script>
      // Funções auxiliares para gerar dados aleatórios (ESCOPO GLOBAL)
      function gerarNomeTimeAleatorio() {
        const prefixos = [
          "Sport",
          "Atlético",
          "Grêmio",
          "Internacional",
          "Palmeiras",
          "Corinthians",
          "Flamengo",
          "Vasco",
          "Fluminense",
          "Botafogo",
          "Santos",
          "São Paulo",
          "Cruzeiro",
          "Atlético Mineiro",
          "Bahia",
          "Vitória",
          "Fortaleza",
          "Ceará",
          "Sport Recife",
          "Náutico",
        ];
        const sufixos = [
          "Clube",
          "Futebol Clube",
          "Esporte Clube",
          "Atlético Clube",
          "Sport Club",
        ];

        const prefixo = prefixos[Math.floor(Math.random() * prefixos.length)];
        const sufixo = sufixos[Math.floor(Math.random() * sufixos.length)];

        return `${prefixo} ${sufixo}`;
      }

      function gerarNomeTimeGenerico() {
        const nomes = [
          "Time Genérico",
          "Clube Local",
          "Esporte Clube",
          "Futebol Clube",
          "Atlético Local",
        ];
        return nomes[Math.floor(Math.random() * nomes.length)];
      }

      function gerarApelidoAleatorio() {
        const apelidos = [
          "Leão",
          "Tigre",
          "Águia",
          "Falcão",
          "Dragão",
          "Urso",
          "Lobo",
          "Pantera",
          "Gavião",
          "Condor",
        ];
        return apelidos[Math.floor(Math.random() * apelidos.length)];
      }

      function gerarApelidoGenerico() {
        return "Genérico";
      }

      function gerarCidadeAleatoria() {
        const cidades = [
          "São Paulo",
          "Rio de Janeiro",
          "Belo Horizonte",
          "Salvador",
          "Recife",
          "Fortaleza",
          "Curitiba",
          "Porto Alegre",
          "Brasília",
          "Goiânia",
          "Manaus",
          "Belém",
          "Natal",
          "João Pessoa",
          "Maceió",
          "Aracaju",
          "Teresina",
          "São Luís",
          "Cuiabá",
          "Campo Grande",
        ];
        return cidades[Math.floor(Math.random() * cidades.length)];
      }

      function gerarCidadeGenerica() {
        return "Cidade Genérica";
      }

      function gerarEstadoAleatorio() {
        const estados = [
          "SP",
          "RJ",
          "MG",
          "BA",
          "PE",
          "CE",
          "PR",
          "RS",
          "DF",
          "GO",
          "AM",
          "PA",
          "RN",
          "PB",
          "AL",
          "SE",
          "PI",
          "MA",
          "MT",
          "MS",
        ];
        return estados[Math.floor(Math.random() * estados.length)];
      }

      function gerarRiquezaAleatoria() {
        const riquezas = ["alta", "média", "baixa"];
        return riquezas[Math.floor(Math.random() * riquezas.length)];
      }

      function gerarOrcamentoAleatorio() {
        const orcamentos = [
          50000000, 80000000, 120000000, 150000000, 200000000,
        ];
        return orcamentos[Math.floor(Math.random() * orcamentos.length)];
      }

      function gerarEstadioAleatorio() {
        const estadios = [
          "Arena Municipal",
          "Estádio Olímpico",
          "Complexo Esportivo",
          "Arena Multiuso",
          "Estádio Principal",
        ];
        return estadios[Math.floor(Math.random() * estadios.length)];
      }

      function gerarTorcidaAleatoria() {
        const torcidas = ["grande", "média", "pequena"];
        return torcidas[Math.floor(Math.random() * torcidas.length)];
      }

      function gerarCorAleatoria() {
        const cores = [
          "#FF0000",
          "#0000FF",
          "#00FF00",
          "#FFFF00",
          "#FF00FF",
          "#00FFFF",
          "#FFA500",
          "#800080",
          "#008000",
          "#000000",
          "#FFFFFF",
        ];
        return cores[Math.floor(Math.random() * cores.length)];
      }

      function gerarTecnicoAleatorio() {
        const nomes = [
          "João Silva",
          "Pedro Santos",
          "Carlos Oliveira",
          "Miguel Costa",
          "Lucas Ferreira",
        ];
        const especialidades = [
          "Futebol ofensivo",
          "Futebol defensivo",
          "Futebol moderno",
          "Futebol organizado",
          "Futebol posicional",
        ];

        return {
          nome: nomes[Math.floor(Math.random() * nomes.length)],
          idade: Math.floor(Math.random() * 20) + 40,
          nacionalidade: "Brasil",
          contrato_ate: 2025,
          salario: Math.floor(Math.random() * 100000) + 50000,
          especialidade:
            especialidades[Math.floor(Math.random() * especialidades.length)],
        };
      }

      function gerarDonoAleatorio() {
        const nomes = [
          "Roberto Silva",
          "Antônio Santos",
          "Francisco Costa",
          "José Oliveira",
          "Manuel Ferreira",
        ];
        const empresas = [
          "Associação",
          "Empresa Local",
          "Grupo Esportivo",
          "Consórcio",
          "Fundação",
        ];

        return {
          nome: nomes[Math.floor(Math.random() * nomes.length)],
          idade: Math.floor(Math.random() * 30) + 40,
          nacionalidade: "Brasil",
          empresa: empresas[Math.floor(Math.random() * empresas.length)],
          patrimonio: `R$ ${Math.floor(Math.random() * 100) + 10} milhões`,
        };
      }

      function gerarColaboradoresAleatorios() {
        const nomes = [
          "João",
          "Pedro",
          "Carlos",
          "Miguel",
          "Lucas",
          "André",
          "Rafael",
          "Daniel",
          "Marcos",
          "Thiago",
        ];
        const cargos = ["Atacante", "Meia", "Goleiro", "Lateral", "Zagueiro"];

        return [
          {
            nome: `${nomes[Math.floor(Math.random() * nomes.length)]} ${
              nomes[Math.floor(Math.random() * nomes.length)]
            }`,
            cargo: cargos[Math.floor(Math.random() * cargos.length)],
            idade: Math.floor(Math.random() * 15) + 20,
            salario: Math.floor(Math.random() * 200000) + 50000,
          },
          {
            nome: `${nomes[Math.floor(Math.random() * nomes.length)]} ${
              nomes[Math.floor(Math.random() * nomes.length)]
            }`,
            cargo: cargos[Math.floor(Math.random() * cargos.length)],
            idade: Math.floor(Math.random() * 15) + 20,
            salario: Math.floor(Math.random() * 200000) + 50000,
          },
          {
            nome: `${nomes[Math.floor(Math.random() * nomes.length)]} ${
              nomes[Math.floor(Math.random() * nomes.length)]
            }`,
            cargo: cargos[Math.floor(Math.random() * cargos.length)],
            idade: Math.floor(Math.random() * 15) + 20,
            salario: Math.floor(Math.random() * 200000) + 50000,
          },
        ];
      }

      function gerarParceirosAleatorios() {
        const parceiros = [
          "Patrocinador Local",
          "Fornecedor Regional",
          "Banco Local",
          "Empresa Comercial",
          "Loja Esportiva",
        ];

        return [
          {
            nome: parceiros[Math.floor(Math.random() * parceiros.length)],
            tipo: "Patrocinador Oficial",
            valor: `R$ ${Math.floor(Math.random() * 20) + 5} milhões/ano`,
          },
        ];
      }

      function gerarElencoAleatorio() {
        const elenco = [];
        for (let i = 0; i < 25; i++) {
          elenco.push(Math.floor(Math.random() * 10000) + 10000);
        }
        return elenco;
      }

      function gerarElencoGenerico() {
        const elenco = [];
        for (let i = 0; i < 25; i++) {
          elenco.push(Math.floor(Math.random() * 10000) + 20000);
        }
        return elenco;
      }

      function gerarJovensPromessasAleatorias() {
        const promessas = [];
        for (let i = 0; i < 5; i++) {
          promessas.push(Math.floor(Math.random() * 10000) + 10000);
        }
        return promessas;
      }

      function gerarJovensPromessasGenericas() {
        const promessas = [];
        for (let i = 0; i < 5; i++) {
          promessas.push(Math.floor(Math.random() * 10000) + 20000);
        }
        return promessas;
      }

      // Criar partículas brasileiras
      function criarParticulasBrasileiras() {
        const container = document.getElementById("brasil-particles");
        if (!container) return;

        for (let i = 0; i < 20; i++) {
          const particle = document.createElement("div");
          particle.className = "brasil-particle";
          particle.style.left = Math.random() * 100 + "%";
          particle.style.animationDelay = Math.random() * 6 + "s";
          particle.style.animationDuration = Math.random() * 3 + 3 + "s";
          container.appendChild(particle);
        }
      }

      // Função para criar time aleatório
      function criarTimeAleatorio() {
        console.log("=== CRIANDO TIME ALEATÓRIO ===");
        console.log("Iniciando criação...");

        try {
          console.log("Verificando funções auxiliares...");
          console.log("gerarNomeTimeAleatorio:", typeof gerarNomeTimeAleatorio);
          console.log("gerarApelidoAleatorio:", typeof gerarApelidoAleatorio);
          console.log("gerarCidadeAleatoria:", typeof gerarCidadeAleatoria);

          // Gerar dados aleatórios para o time
          const timeAleatorio = {
            id: Math.floor(Math.random() * 10000) + 1000,
            nome: gerarNomeTimeAleatorio(),
            apelido: gerarApelidoAleatorio(),
            cidade: gerarCidadeAleatoria(),
            estado: gerarEstadoAleatorio(),
            riqueza: gerarRiquezaAleatoria(),
            orcamento: gerarOrcamentoAleatorio(),
            estadio: gerarEstadioAleatorio(),
            torcida: gerarTorcidaAleatoria(),
            cor_primaria: gerarCorAleatoria(),
            cor_secundaria: gerarCorAleatoria(),
            cor_accent: gerarCorAleatoria(),
            tecnico: gerarTecnicoAleatorio(),
            dono: gerarDonoAleatorio(),
            colaboradores: gerarColaboradoresAleatorios(),
            parceiros: gerarParceirosAleatorios(),
            elenco: gerarElencoAleatorio(),
            jovens_promessas: gerarJovensPromessasAleatorias(),
          };

          console.log("Time aleatório criado:", timeAleatorio);

          // Selecionar o time aleatório
          selecionarTimeCriado(timeAleatorio);
        } catch (error) {
          console.error("Erro detalhado ao criar time aleatório:", error);
          console.error("Stack trace:", error.stack);
          alert(
            "Erro ao criar time aleatório. Tente novamente. Erro: " +
              error.message
          );
        }
      }

      // Função para criar time genérico
      function criarTimeGenerico() {
        console.log("=== CRIANDO TIME GENÉRICO ===");
        if (window.gameController) {
          window.gameController.criarTimeGenerico();
        } else {
          console.error("GameController não encontrado");
          alert("Erro: GameController não encontrado");
        }
      }

      // Função para selecionar time criado
      function selecionarTimeCriado(time) {
        console.log("Selecionando time criado:", time.nome);
        try {
          if (window.gameController) {
            window.gameController.selecionarTimeCriado(time);

            // Esconder tela de seleção de time
            document.getElementById("tela-time").classList.add("hidden");

            // Mostrar tela de jogo principal
            const jogoPrincipal = document.getElementById("jogo-principal");
            if (jogoPrincipal) {
              jogoPrincipal.classList.remove("hidden");
              console.log("Tela de jogo principal mostrada");
            } else {
              console.error("Elemento jogo-principal não encontrado");
              throw new Error("Tela de jogo não encontrada");
            }
          } else {
            console.error("GameController não encontrado");
            throw new Error("GameController não encontrado");
          }
        } catch (error) {
          console.error("Erro ao selecionar time:", error);
          alert(`Erro: ${error.message}`);
        }
      }

      // Função para selecionar clube específico
      function selecionarClube(clubeId) {
        console.log("Selecionando clube com ID:", clubeId);
        try {
          if (window.gameController) {
            window.gameController.selecionarClube(clubeId);
          } else {
            console.error("GameController não encontrado");
            throw new Error("GameController não encontrado");
          }
        } catch (error) {
          console.error("Erro ao selecionar clube:", error);
          alert(`Erro: ${error.message}`);
        }
      }
      // Função para selecionar time aleatório dos existentes
      function selecionarTimeAleatorio() {
        console.log("Selecionando time aleatório dos existentes...");
        if (window.gameController) {
          window.gameController.selecionarTimeAleatorio();
        } else {
          console.error("GameController não encontrado");
          alert("Erro: GameController não encontrado");
        }
      }

      // Função para aplicar cores do time
      function aplicarCoresDoTime(time) {
        console.log("Aplicando cores do time:", time.nome);

        // Definir clube atual no GameController
        if (window.gameController) {
          window.gameController.clubeAtual = time;
        }

        // Definir variáveis CSS
        document.documentElement.style.setProperty(
          "--team-primary",
          time.cor_primaria
        );
        document.documentElement.style.setProperty(
          "--team-secondary",
          time.cor_secundaria
        );
        document.documentElement.style.setProperty(
          "--team-accent",
          time.cor_accent || "#FFFFFF"
        );

        // Aplicar classe ao body
        document.body.className = `time-${time.nome
          .toLowerCase()
          .replace(/\s+/g, "-")}`;

        // Atualizar elementos específicos com as cores
        const elementos = document.querySelectorAll(
          ".jogo-header, .game-menu, .tab-btn, .btn-selecionar"
        );
        elementos.forEach((elemento) => {
          elemento.style.backgroundColor = time.cor_primaria;
          elemento.style.color = getContrastColor(time.cor_primaria);
        });

        // Atualizar orçamento
        const orcamentoElement = document.getElementById("clube-orcamento");
        if (orcamentoElement && time.orcamento) {
          orcamentoElement.textContent = `Orçamento: ${formatarMoeda(
            time.orcamento
          )}`;
        }

        console.log("Cores aplicadas:", {
          primary: time.cor_primaria,
          secondary: time.cor_secundaria,
          accent: time.cor_accent,
        });
      }

      // Função para formatar moeda
      function formatarMoeda(valor) {
        if (valor === null || valor === undefined) {
          return "R$ 0";
        }

        return new Intl.NumberFormat("pt-BR", {
          style: "currency",
          currency: "BRL",
          minimumFractionDigits: 0,
          maximumFractionDigits: 0,
        }).format(valor);
      }

      // Função para obter cor de contraste
      function getContrastColor(hexColor) {
        // Remove o # se presente
        hexColor = hexColor.replace("#", "");

        // Converte para RGB
        const r = parseInt(hexColor.substr(0, 2), 16);
        const g = parseInt(hexColor.substr(2, 2), 16);
        const b = parseInt(hexColor.substr(4, 2), 16);

        // Calcula luminância
        const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;

        // Retorna branco ou preto baseado na luminância
        return luminance > 0.5 ? "#000000" : "#FFFFFF";
      }

      // Função para salvar sessão
      function salvarSessao() {
        console.log("Salvando sessão...");

        const sessao = {
          timeEscolhido: window.gameController?.clubeAtual || null,
          dataSalvamento: new Date().toISOString(),
          jogoIniciado: true,
        };

        try {
          localStorage.setItem("sessaoJogo", JSON.stringify(sessao));
          alert("Sessão salva com sucesso!");
          console.log("Sessão salva:", sessao);
        } catch (error) {
          console.error("Erro ao salvar sessão:", error);
          alert("Erro ao salvar sessão. Tente novamente.");
        }
      }

      // Função para atualizar nome do time
      function atualizarNomeDoTime(nome) {
        console.log("Atualizando nome do time para:", nome);

        // Atualizar elemento principal
        const nomeTimeElement = document.getElementById("clube-nome");
        if (nomeTimeElement) {
          nomeTimeElement.textContent = nome;
          console.log("Nome do time atualizado no header");
        }

        // Atualizar outros elementos que possam ter o nome do time
        const elementosNome = document.querySelectorAll("[data-time-nome]");
        elementosNome.forEach((elemento) => {
          elemento.textContent = nome;
        });

        console.log("Nome do time atualizado em todos os elementos");
      }

      // Função para voltar ao início
      function voltarAoInicio() {
        console.log("Voltando ao início...");
        document.getElementById("jogo-principal").classList.add("hidden");
        document.getElementById("tela-titulo").classList.remove("hidden");
      }

      // Função para sair do jogo
      function sairDoJogo() {
        console.log("Saindo do jogo...");
        if (confirm("Tem certeza que deseja sair?")) {
          window.close();
        }
      }

      // GameController simplificado
      class GameController {
        constructor() {
          this.clubeAtual = null;
          this.elenco = [];
          this.escalacao = [];
          this.formacao = "4-4-2";
          this.jogos = [];
          this.resultados = [];
          this.treinador = null;
          this.notificacoes = [];
          this.imprensa = [];
          this.torcida = {
            moral: 75,
            opiniao: 'Neutra',
            historico: []
          };
          // Sistema de Competições
          this.competicoes = {
            temporada: 2025,
            calendario: [],
            ativas: {},
            historico: {},
            campeoes: {},
            premios: {
              artilharia: {},
              craque: {},
              goleiro: {},
              revelacao: {}
            },
            rebaixamentos: []
          };
          
          // Inicializar sistema de competições
          this.inicializarSistemaCompeticoes();
          
          // Gerar treinador inicial
          this.treinador = this.gerarTreinador();
          
          console.log("GameController simplificado criado");
        }

        async init() {
          console.log("GameController simplificado inicializado");
          return Promise.resolve();
        }

        async selecionarClube(clubeId) {
          console.log("GameController: selecionarClube chamado com", clubeId);
          // Usar dados hardcoded para evitar problemas de CORS
          const clubes = [
            {
              id: 1,
              nome: "Flamengo",
              apelido: "Mengão",
              cidade: "Rio de Janeiro",
              estado: "RJ",
              orcamento: 200000000,
              estadio: "Maracanã",
              cores: ["Preto", "Vermelho"],
              cor_primaria: "#000000",
              cor_secundaria: "#E31B23",
            },
            {
              id: 2,
              nome: "Palmeiras",
              apelido: "Verdao",
              cidade: "São Paulo",
              estado: "SP",
              orcamento: 180000000,
              estadio: "Allianz Parque",
              cores: ["Verde", "Branco"],
              cor_primaria: "#006400",
              cor_secundaria: "#FFFFFF",
            },
            {
              id: 3,
              nome: "Corinthians",
              apelido: "Timão",
              cidade: "São Paulo",
              estado: "SP",
              orcamento: 150000000,
              estadio: "Neo Química Arena",
              cores: ["Preto", "Branco"],
              cor_primaria: "#000000",
              cor_secundaria: "#FFFFFF",
            },
            {
              id: 4,
              nome: "São Paulo",
              apelido: "Tricolor",
              cidade: "São Paulo",
              estado: "SP",
              orcamento: 120000000,
              estadio: "Morumbi",
              cores: ["Vermelho", "Branco", "Preto"],
              cor_primaria: "#E31B23",
              cor_secundaria: "#FFFFFF",
            },
            {
              id: 5,
              nome: "Santos",
              apelido: "Peixe",
              cidade: "Santos",
              estado: "SP",
              orcamento: 80000000,
              estadio: "Vila Belmiro",
              cores: ["Preto", "Branco"],
              cor_primaria: "#000000",
              cor_secundaria: "#FFFFFF",
            },
            {
              id: 6,
              nome: "Grêmio",
              apelido: "Imortal",
              cidade: "Porto Alegre",
              estado: "RS",
              orcamento: 100000000,
              estadio: "Arena do Grêmio",
              cores: ["Azul", "Preto", "Branco"],
              cor_primaria: "#0066CC",
              cor_secundaria: "#000000",
            },
            {
              id: 7,
              nome: "Internacional",
              apelido: "Colorado",
              cidade: "Porto Alegre",
              estado: "RS",
              orcamento: 110000000,
              estadio: "Beira-Rio",
              cores: ["Vermelho", "Branco"],
              cor_primaria: "#E31B23",
              cor_secundaria: "#FFFFFF",
            },
            {
              id: 8,
              nome: "Atlético Mineiro",
              apelido: "Galo",
              cidade: "Belo Horizonte",
              estado: "MG",
              orcamento: 30000000,
              estadio: "Mineirão",
              cores: ["Preto", "Branco"],
              cor_primaria: "#000000",
              cor_secundaria: "#FFFFFF",
              situacao: "Em crise financeira - deve para bancos"
            },
            {
              id: 9,
              nome: "Cruzeiro",
              apelido: "Raposa",
              cidade: "Belo Horizonte",
              estado: "MG",
              orcamento: 150000000,
              estadio: "Mineirão",
              cores: ["Azul", "Branco"],
              cor_primaria: "#0066CC",
              cor_secundaria: "#FFFFFF",
              situacao: "SAF forte - dono bilionário, gestão consciente"
            }
          ];
          
          const clube = clubes.find(c => c.id === clubeId);
          if (clube) {
            this.clubeAtual = clube;
            
            // Marcar jogo como iniciado
            localStorage.setItem("jogoIniciado", "true");
            localStorage.setItem("timeEscolhido", clube.nome);
            
            // Aplicar cores do time
            this.aplicarCoresDoTime(clube);
            
            // Atualizar nome do time
            this.atualizarNomeDoTime(clube.nome);
            
            // Atualizar orçamento e riqueza
            this.atualizarOrcamentoERiqueza(clube);
            
            // Carregar elenco real (local -> API -> aleatório)
            try {
              await this.carregarElencoReal(clube);
            } catch (e) {
              console.warn('Falha ao carregar elenco real, gerando aleatório:', e);
              this.elenco = this.gerarJogadoresAleatorios(30);
            }
            
            // Atualizar UI de elenco
            this.atualizarElenco();
            
            // Ocultar tela de time
            document.getElementById("tela-time").classList.add("hidden");
            
            // Mostrar tela de jogo principal
            const jogoPrincipal = document.getElementById("jogo-principal");
            if (jogoPrincipal) {
              jogoPrincipal.classList.remove("hidden");
              console.log("Tela de jogo principal mostrada");
              
              // Mostrar mensagem de sucesso
              alert(`Time "${clube.nome}" selecionado com sucesso!`);
            } else {
              console.error("Elemento jogo-principal não encontrado");
              alert("Erro: Tela de jogo não encontrada");
            }
          } else {
            console.error("Clube não encontrado:", clubeId);
            alert("Erro: Clube não encontrado");
          }
        }

        // Carregador de elenco real: tenta local (dados/jogadores.json), depois API football-data, e por fim preenche até 30
        async carregarElencoReal(clube) {
          // 1) Tentar via dados locais (dados/jogadores.json)
          try {
            const resp = await fetch('dados/jogadores.json');
            if (resp.ok) {
              const jogadores = await resp.json();
              const jogadoresDoClube = (jogadores || []).filter(j => this.normalizar(j.clube) === this.normalizar(clube.nome));
              if (jogadoresDoClube.length > 0) {
                this.elenco = this.converterJogadoresLocaisParaInterno(jogadoresDoClube).slice(0, 30);
                if (this.elenco.length < 30) {
                  const faltantes = 30 - this.elenco.length;
                  this.elenco = [...this.elenco, ...this.gerarJogadoresAleatorios(faltantes)];
                }
                return;
              }
            }
          } catch (e) {
            console.warn('Erro lendo dados/jogadores.json:', e);
          }

          // 2) Tentar via API football-data
          try {
            if (!this.footballDataAPI) this.footballDataAPI = new FootballDataAPI();
            const teams = await this.footballDataAPI.getBrazilianSerieATeams();
            // Encontrar time por nome aproximado
            const team = (teams || []).find(t => this.normalizar(t.name).includes(this.normalizar(clube.nome)) || this.normalizar(clube.nome).includes(this.normalizar(t.name)));
            if (team) {
              const squad = await this.footballDataAPI.getTeamPlayers(team.id);
              const jogadoresConvertidos = (squad || []).map(p => this.converterJogadorAPIParaInterno(p, team.id, clube.nome));
              this.elenco = jogadoresConvertidos.slice(0, 30);
              if (this.elenco.length < 30) {
                const faltantes = 30 - this.elenco.length;
                this.elenco = [...this.elenco, ...this.gerarJogadoresAleatorios(faltantes)];
              }
              return;
            }
          } catch (e) {
            console.warn('Erro ao buscar jogadores na football-data API:', e);
          }

          // 3) Fallback absoluto: gerar aleatórios
          this.elenco = this.gerarJogadoresAleatorios(30);
        }

        normalizar(texto) {
          if (!texto) return '';
          return String(texto)
            .normalize('NFD')
            .replace(/\p{Diacritic}/gu, '')
            .toLowerCase()
            .replace(/ fc| regatas| futebol clube| esporte clube| clube de regatas| de futebol/g, '')
            .trim();
        }

        converterJogadoresLocaisParaInterno(jogs) {
          return jogs.map(j => ({
            id: j.id,
            nome: j.nome,
            posicao: j.posicao,
            idade: j.idade || 25,
            habilidade: Math.floor(((j.tecnica || 75) + (j.mental || 75) + (j.fisico || 75)) / 3),
            valor: j.valor || j.valor_mercado || 8000000,
            salario: j.salario || Math.floor((j.valor || j.valor_mercado || 8000000) * 0.01),
            moral: j.moral || 75,
            status: 'Ativo',
            clube: j.clube || this.clubeAtual?.nome || ''
          }));
        }

        converterJogadorAPIParaInterno(apiPlayer, teamId, nomeClube) {
          // Mapear posição
          const posMap = { Goalkeeper: 'Goleiro', Defender: 'Zagueiro', Midfielder: 'Meia', Forward: 'Atacante' };
          const posicao = posMap[apiPlayer.position] || 'Meia';
          const idade = (() => { if (!apiPlayer.dateOfBirth) return 25; const d = new Date(apiPlayer.dateOfBirth); return new Date().getFullYear() - d.getFullYear(); })();
          const habilidade = 70 + Math.floor(Math.random() * 21); // 70-90
          const valor = this.calcularValorPorPosicao(posicao);
          const salario = Math.floor(valor * 0.01);
          return {
            id: apiPlayer.id || (Date.now() + Math.floor(Math.random()*1000)),
            nome: apiPlayer.name,
            posicao,
            idade,
            habilidade,
            valor,
            salario,
            moral: 75,
            status: 'Ativo',
            clube: nomeClube
          };
        }

        calcularValorPorPosicao(posicao) {
          const valoresBase = { Goleiro: 5000000, Zagueiro: 8000000, Lateral: 7000000, Volante: 9000000, Meia: 12000000, Atacante: 15000000 };
          const base = valoresBase[posicao] || 9000000;
          return Math.floor(base * (0.8 + Math.random()*0.4));
        }

        lidarMenuPrincipal(menu) {
          console.log("GameController: lidarMenuPrincipal chamado com", menu);
          switch (menu) {
            case "iniciar":
              console.log("Mostrando tela de desafio...");
              document
                .getElementById("tela-desafio")
                .classList.remove("hidden");
              document.getElementById("tela-titulo").classList.add("hidden");
              break;
            case "carregar":
              console.log("Carregando jogo...");
              this.carregarJogo();
              break;
            case "configuracoes":
              console.log("Mostrando configurações...");
              alert("Configurações em desenvolvimento");
              break;
            case "creditos":
              console.log("Mostrando créditos...");
              alert("Desenvolvido com ❤️ por IA + Humano");
              break;
            case "sair":
              console.log("Saindo do jogo...");
              if (confirm("Tem certeza que deseja sair?")) {
                window.close();
              }
              break;
            case "clube":
              this.mostrarAba("elenco");
              this.atualizarElenco();
              break;
            case "jogo":
              this.mostrarAba("escalacao");
              this.atualizarEscalacao();
              break;
            case "mercado":
              this.mostrarAba("mercado");
              this.atualizarMercado();
              break;
            case "financeiro":
              this.mostrarAba("financeiro");
              this.atualizarFinancas();
              break;
            case "estadio":
              this.mostrarAba("estadio");
              break;
            case "negocios":
              this.mostrarAba("sala-negocios");
              break;
            case "competicoes":
              this.mostrarAba("brasileirao");
              this.atualizarCompeticoes();
              break;
            case "social":
              this.mostrarAba("social");
              this.gerarNoticiasImprensa();
              this.gerarOpiniaoTorcida();
              break;
            case "admin":
              this.mostrarAba("configuracoes");
              break;
            default:
              console.log("Menu não reconhecido:", menu);
          }
        }

        voltarAoInicio() {
          console.log("Voltando ao início...");
          document.getElementById("jogo-principal").classList.add("hidden");
          document.getElementById("tela-titulo").classList.remove("hidden");
        }

        sairDoJogo() {
          console.log("Saindo do jogo...");
          if (confirm("Tem certeza que deseja sair?")) {
            window.close();
          }
        }

        selecionarDesafio(desafio) {
          console.log("GameController: selecionarDesafio chamado com", desafio);
          // Esconder tela de desafio
          document.getElementById("tela-desafio").classList.add("hidden");
          // Mostrar tela de renda
          document.getElementById("tela-renda").classList.remove("hidden");
          // Rebindar eventos dos cards de renda
          setTimeout(() => {
            rebindarEventosRenda();
          }, 100);
        }

        selecionarRenda(renda) {
          console.log("GameController: selecionarRenda chamado com", renda);
          // Esconder tela de renda
          document.getElementById("tela-renda").classList.add("hidden");
          // Mostrar tela de jogador
          document.getElementById("tela-jogador").classList.remove("hidden");
          // Rebindar eventos dos cards de jogador
          setTimeout(() => {
            rebindarEventosJogador();
          }, 100);
        }

        selecionarJogador(jogador) {
          console.log("GameController: selecionarJogador chamado com", jogador);
          // Iniciar o jogo diretamente sem recursão
          this.iniciarJogo();
        }

        iniciarJogo() {
          console.log("GameController: iniciarJogo chamado");
          // Mostrar tela de seleção de time
          document.getElementById("tela-jogador").classList.add("hidden");
          document.getElementById("tela-time").classList.remove("hidden");
          // Carregar clubes
          carregarClubesSimplificado();
        }

        selecionarTimeAleatorio() {
          console.log("GameController: selecionarTimeAleatorio chamado");
          // Escolher aleatoriamente um time REAL já listado
          try {
            if (Array.isArray(window.todosClubes) && window.todosClubes.length > 0) {
              const randomIndex = Math.floor(Math.random() * window.todosClubes.length);
              const clube = window.todosClubes[randomIndex];
              console.log('Time real aleatório escolhido:', clube);
              // Usa o fluxo normal de seleção (carrega elenco real etc.)
              this.selecionarClube(clube.id);
              return;
            }
            // Fallback: IDs conhecidos do conjunto simplificado
            const ids = [1,2,3,4,5,6,7,8,9];
            const id = ids[Math.floor(Math.random() * ids.length)];
            this.selecionarClube(id);
          } catch (e) {
            console.error('Erro ao selecionar time aleatório:', e);
            alert('Não foi possível selecionar um time aleatório. Tente novamente.');
          }
        }

        aplicarCoresDoTime(clube) {
          const body = document.body;
          
          // Remover classes de time anteriores
          body.classList.remove('time-flamengo', 'time-palmeiras', 'time-sao-paulo', 'time-atletico', 'time-cruzeiro', 
                               'time-corinthians', 'time-fluminense', 'time-gremio', 'time-internacional', 'time-vasco');
          
          // Aplicar cores CSS customizadas baseadas no clube (apenas 2 cores principais)
          if (clube.cor_primaria && clube.cor_secundaria) {
            document.documentElement.style.setProperty('--team-primary', clube.cor_primaria);
            document.documentElement.style.setProperty('--team-secondary', clube.cor_secundaria);
            document.documentElement.style.setProperty('--team-accent', clube.cor_secundaria); // Usar secundária como accent
          }
          
          // Aplicar cores diretamente nos elementos principais com cores mais fortes
          const elementosPrimarios = document.querySelectorAll('.team-primary-color, .header, .menu-principal, .tab-header');
          elementosPrimarios.forEach(elemento => {
            elemento.style.background = `linear-gradient(135deg, ${clube.cor_primaria} 0%, ${clube.cor_secundaria} 50%, ${clube.cor_primaria} 100%)`;
            elemento.style.borderBottom = `3px solid ${clube.cor_secundaria}`;
          });
          
          const elementosSecundarios = document.querySelectorAll('.team-secondary-color, .tab-active, .btn-secundario');
          elementosSecundarios.forEach(elemento => {
            elemento.style.backgroundColor = clube.cor_secundaria;
            elemento.style.color = '#FFFFFF';
            elemento.style.borderColor = clube.cor_primaria;
          });
          
          // Aplicar cor primária aos botões principais
          const botoesPrincipais = document.querySelectorAll('.btn-principal, .menu-item');
          botoesPrincipais.forEach(botao => {
            botao.style.backgroundColor = clube.cor_primaria;
            botao.style.borderColor = clube.cor_secundaria;
            botao.style.color = '#FFFFFF';
          });
          
          console.log('Cores do time aplicadas:', clube.nome);
        }

        atualizarNomeDoTime(nome) {
          // Chamar a função global que atualiza todos os elementos
          if (typeof atualizarNomeDoTime === 'function') {
            atualizarNomeDoTime(nome);
          } else {
            // Fallback local
            const nomeTimeElement = document.getElementById('clube-nome');
            if (nomeTimeElement) {
              nomeTimeElement.textContent = nome;
            }
            
            const nomeTimeElement2 = document.getElementById('nome-time');
            if (nomeTimeElement2) {
              nomeTimeElement2.textContent = nome;
            }
            
            const tituloTimeElement = document.getElementById('titulo-time');
            if (tituloTimeElement) {
              tituloTimeElement.textContent = nome;
            }
          }
          
          console.log('Nome do time atualizado:', nome);
        }

        atualizarOrcamentoERiqueza(clube) {
          // Atualizar orçamento
          const orcamentoElement = document.getElementById('clube-orcamento');
          if (orcamentoElement && clube.orcamento) {
            orcamentoElement.textContent = `Orçamento: ${formatarMoeda(clube.orcamento)}`;
          }
          
          // Atualizar riqueza
          const riquezaElement = document.getElementById('clube-riqueza');
          if (riquezaElement) {
            const riqueza = clube.riqueza || 'Média';
            riquezaElement.textContent = `Riqueza: ${riqueza.charAt(0).toUpperCase() + riqueza.slice(1)}`;
          }
          
          console.log('Orçamento e riqueza atualizados:', clube.orcamento, clube.riqueza);
        }

        // Métodos para gerenciamento de elenco
        ordenarElenco(criterio) {
          console.log('Ordenando elenco por:', criterio);
          // Implementação básica
        }

        buscarJogador(termo) {
          console.log('Buscando jogador:', termo);
          // Implementação básica
        }

        gerarRelatorioElenco() {
          console.log('Gerando relatório do elenco...');
          alert('Relatório do elenco gerado!');
        }

        analisarElenco() {
          console.log('Analisando elenco...');
          alert('Análise do elenco concluída!');
        }

        // Métodos de paginação
        paginaAnterior() {
          console.log('Página anterior');
          // Implementação básica
        }

        proximaPagina() {
          console.log('Próxima página');
          // Implementação básica
        }

        // Métodos de escalação
        atualizarEscalacao() {
          console.log('Atualizando escalação...');
          // Se clube tem elenco, usar 11 primeiros por posição
          if (this.elenco && this.elenco.length >= 11) {
            const pick = (pos) => this.elenco.find(j => (j.posicao||'').toLowerCase().includes(pos));
            const goleiro = pick('goleiro')?.nome || 'Goleiro';
            const z1 = pick('zagueiro')?.nome || 'Zagueiro 1';
            const z2 = this.elenco.filter(j => (j.posicao||'').toLowerCase().includes('zagueiro'))[1]?.nome || 'Zagueiro 2';
            const ld = pick('lateral')?.nome || 'Lateral D';
            const le = this.elenco.filter(j => (j.posicao||'').toLowerCase().includes('lateral'))[1]?.nome || 'Lateral E';
            const meias = this.elenco.filter(j => ['meia','volante'].some(k => (j.posicao||'').toLowerCase().includes(k))).slice(0,3).map(j=>j.nome);
            while (meias.length<3) meias.push(`Meia ${meias.length+1}`);
            const atac = this.elenco.filter(j => (j.posicao||'').toLowerCase().includes('atac')).slice(0,2).map(j=>j.nome);
            while (atac.length<2) atac.push(`Atacante ${atac.length+1}`);
            this.escalacao = { goleiro, laterais:[ld, le], zagueiros:[z1,z2], meias, atacantes: atac };
            this.formacao = '4-3-3';
          } else {
            // fallback automático
            this.escalacaoAutomatica();
          }
          this.renderizarCampinho();
          this.atualizarEscalacaoInterface(this.escalacao);
        }

        renderizarCampinho() {
          console.log('Renderizando campinho...');
          
          // Obter a formação atual
          const formacao = this.formacao || '4-4-2';
          const [defensores, meias, atacantes] = formacao.split('-').map(Number);
          
          // Limpar campinho
          const campinho = document.querySelector('.campinho');
          if (campinho) {
            campinho.innerHTML = '';
            
            // Criar posições baseadas na formação
            const posicoes = this.criarPosicoesFormacao(defensores, meias, atacantes);
            
            // Renderizar cada posição
            posicoes.forEach(posicao => {
              const elemento = document.createElement('div');
              elemento.className = 'posicao-jogador';
              elemento.setAttribute('data-posicao', posicao.id);
              elemento.textContent = posicao.nome;
              elemento.style.left = posicao.x + '%';
              elemento.style.top = posicao.y + '%';
              campinho.appendChild(elemento);
            });
          }
          
          console.log('Campinho renderizado com formação:', formacao);
        }

        criarPosicoesFormacao(defensores, meias, atacantes) {
          const posicoes = [];
          
          // Goleiro
          posicoes.push({ id: 'goleiro', nome: 'Goleiro', x: 50, y: 90 });
          
          // Defensores
          const espacoDefensores = 80 / (defensores + 1);
          for (let i = 0; i < defensores; i++) {
            posicoes.push({
              id: `defensor-${i+1}`,
              nome: `Defensor ${i+1}`,
              x: 10 + (i + 1) * espacoDefensores,
              y: 75
            });
          }
          
          // Meias
          const espacoMeias = 80 / (meias + 1);
          for (let i = 0; i < meias; i++) {
            posicoes.push({
              id: `meia-${i+1}`,
              nome: `Meia ${i+1}`,
              x: 10 + (i + 1) * espacoMeias,
              y: 50
            });
          }
          
          // Atacantes
          const espacoAtacantes = 80 / (atacantes + 1);
          for (let i = 0; i < atacantes; i++) {
            posicoes.push({
              id: `atacante-${i+1}`,
              nome: `Atacante ${i+1}`,
              x: 10 + (i + 1) * espacoAtacantes,
              y: 25
            });
          }
          
          return posicoes;
        }

        escalacaoAutomatica() {
          console.log('Escalação automática ativada');
          
          // Gerar escalação automática
          const escalacao = {
            goleiro: 'Goleiro 1',
            laterais: ['Lateral Direito', 'Lateral Esquerdo'],
            zagueiros: ['Zagueiro 1', 'Zagueiro 2'],
            meias: ['Meia 1', 'Meia 2', 'Meia 3'],
            atacantes: ['Atacante 1', 'Atacante 2']
          };
          
          // Atualizar a interface com a escalação
          this.atualizarEscalacaoInterface(escalacao);
          
          alert('Escalação automática realizada!');
        }

        atualizarEscalacaoInterface(escalacao) {
          // Atualizar posições no campinho
          const posicoes = {
            'goleiro': escalacao.goleiro,
            'lateral-direito': escalacao.laterais[0],
            'lateral-esquerdo': escalacao.laterais[1],
            'zagueiro-direito': escalacao.zagueiros[0],
            'zagueiro-esquerdo': escalacao.zagueiros[1],
            'meia-direito': escalacao.meias[0],
            'meia-central': escalacao.meias[1],
            'meia-esquerdo': escalacao.meias[2],
            'atacante-direito': escalacao.atacantes[0],
            'atacante-esquerdo': escalacao.atacantes[1]
          };
          
          // Atualizar cada posição no campinho
          Object.keys(posicoes).forEach(posicao => {
            const elemento = document.querySelector(`[data-posicao="${posicao}"]`);
            if (elemento) {
              elemento.textContent = posicoes[posicao];
              elemento.style.display = 'block';
            }
          });
          
          console.log('Escalação atualizada na interface:', escalacao);
        }

        simularJogo() {
          console.log('Simulando jogo...');
          
          // Verificar se há jogo agendado
          if (!this.proximoJogo) {
            this.proximoJogo = this.gerarProximoJogo();
          }
          
          // Obter informações da competição
          const competicao = this.identificarCompeticaoJogo(this.proximoJogo);
          const importancia = this.calcularImportanciaJogo(competicao);
          
          // Gerar resultado baseado na força dos times
          const resultado = this.calcularResultadoJogo(this.proximoJogo.casa, this.proximoJogo.visitante, competicao);
          
          // Aplicar efeitos nos jogadores
          this.aplicarEfeitosJogo(resultado, importancia);
          
          // Atualizar moral dos times
          this.atualizarMoralTimes(resultado, competicao);
          
          // Atualizar tabela da competição (garantindo chave correta)
          const keyMap = {
            'brasileirao': 'brasileirao',
            'estadual': 'estadual',
            'libertadores': 'libertadores',
            'copa-brasil': 'copaBrasil',
            'sul-americana': 'sulAmericana'
          };
          const compKey = keyMap[competicao] || 'brasileirao';
          this.atualizarTabelaComResultado(resultado, compKey);
          
          // Adicionar ao histórico
          this.adicionarAoHistorico(resultado);
          
          // Avançar rodada
          this.avancarRodada();
          
          // Mostrar tela de simulação
          try {
            this.mostrarTelaSimulacao(resultado);
          } catch (e) {
            console.warn('Falha ao abrir tela de simulação:', e);
          }
        }
        
        identificarCompeticaoJogo(jogo) {
          // Identificar qual competição o jogo pertence
          const hoje = new Date();
          
          // Verificar se é estadual (Janeiro-Março)
          if (hoje.getMonth() >= 0 && hoje.getMonth() <= 2) {
            return 'estadual';
          }
          
          // Verificar se é Libertadores (Fevereiro-Novembro)
          if (hoje.getMonth() >= 1 && hoje.getMonth() <= 10) {
            return 'libertadores';
          }
          
          // Verificar se é Brasileirão (Abril-Novembro)
          if (hoje.getMonth() >= 3 && hoje.getMonth() <= 10) {
            return 'brasileirao';
          }
          
          // Verificar se é Copa do Brasil (Abril-Novembro)
          if (hoje.getMonth() >= 3 && hoje.getMonth() <= 10) {
            return 'copa-brasil';
          }
          
          // Verificar se é Sul-Americana (Março-Novembro)
          if (hoje.getMonth() >= 2 && hoje.getMonth() <= 10) {
            return 'sul-americana';
          }
          
          // Verificar se é Mundial (Dezembro)
          if (hoje.getMonth() === 11) {
            return 'mundial';
          }
          
          return 'brasileirao'; // Padrão
        }
        
        aplicarEfeitosJogo(resultado, importancia) {
          console.log('Aplicando efeitos do jogo com importância:', importancia);
          
          // Aplicar desgaste físico nos jogadores
          if (this.elenco) {
            this.elenco.forEach(jogador => {
              // Aumentar fadiga baseado na importância do jogo
              const fadigaAdicional = 0.05 * importancia;
              jogador.fadiga = Math.min(100, (jogador.fadiga || 0) + fadigaAdicional);
              
              // Diminuir condição física
              const condicaoPerdida = 0.03 * importancia;
              jogador.condicao = Math.max(0, (jogador.condicao || 100) - condicaoPerdida);
              
              // Ajustar moral baseado no resultado
              if (resultado.casa === this.clubeSelecionado?.nome) {
                if (resultado.golsCasa > resultado.golsVisitante) {
                  // Vitória
                  jogador.moral = Math.min(100, (jogador.moral || 50) + 5);
                } else if (resultado.golsCasa < resultado.golsVisitante) {
                  // Derrota
                  jogador.moral = Math.max(0, (jogador.moral || 50) - 3);
                } else {
                  // Empate
                  jogador.moral = Math.min(100, (jogador.moral || 50) + 1);
                }
              }
            });
          }
          
          // Atualizar interface
          this.atualizarElenco();
        }
        
        atualizarMoralTimes(resultado, competicao) {
          console.log('Atualizando moral dos times...');
          
          // Atualizar moral do time da casa
          const timeCasa = this.buscarTimePorNome(resultado.casa);
          if (timeCasa) {
            if (resultado.golsCasa > resultado.golsVisitante) {
              timeCasa.moral = Math.min(100, (timeCasa.moral || 50) + 10);
            } else if (resultado.golsCasa < resultado.golsVisitante) {
              timeCasa.moral = Math.max(0, (timeCasa.moral || 50) - 5);
            } else {
              timeCasa.moral = Math.min(100, (timeCasa.moral || 50) + 2);
            }
          }
          
          // Atualizar moral do time visitante
          const timeVisitante = this.buscarTimePorNome(resultado.visitante);
          if (timeVisitante) {
            if (resultado.golsVisitante > resultado.golsCasa) {
              timeVisitante.moral = Math.min(100, (timeVisitante.moral || 50) + 10);
            } else if (resultado.golsVisitante < resultado.golsCasa) {
              timeVisitante.moral = Math.max(0, (timeVisitante.moral || 50) - 5);
            } else {
              timeVisitante.moral = Math.min(100, (timeVisitante.moral || 50) + 2);
            }
          }
        }
        
        buscarTimePorNome(nome) {
          // Buscar time nas competições ativas
          for (const competicao of Object.values(this.competicoes.ativas)) {
            if (competicao.classificacao) {
              const time = competicao.classificacao.find(t => t.time === nome);
              if (time) return time;
            }
          }
          return null;
        }
        
        gerarProximoJogo() {
          const adversarios = [
            'Palmeiras', 'Flamengo', 'São Paulo', 'Santos', 'Corinthians',
            'Grêmio', 'Internacional', 'Athletico-PR', 'Vasco', 'Botafogo',
            'Fortaleza', 'Ceará', 'Bahia', 'Vitória', 'Sport',
            'Náutico', 'Santa Cruz', 'Salvador', 'Recife', 'Olinda'
          ].filter(time => time !== this.clubeAtual.nome);
          
          const adversario = adversarios[Math.floor(Math.random() * adversarios.length)];
          const jogoEmCasa = Math.random() > 0.5;
          
          return {
            rodada: this.campeonato?.rodadaAtual || 1,
            casa: jogoEmCasa ? this.clubeAtual.nome : adversario,
            visitante: jogoEmCasa ? adversario : this.clubeAtual.nome,
            data: this.gerarDataJogo(),
            local: jogoEmCasa ? this.clubeAtual.estadio : 'Estádio do Adversário'
          };
        }
        
        calcularResultadoJogo(casa, visitante, competicao) {
          // Força base dos times
          const forcaCasa = this.calcularForcaTime(casa);
          const forcaVisitante = this.calcularForcaTime(visitante);
          
          // Vantagem de jogar em casa
          const vantagemCasa = 0.2;
          
          // Fator de importância da competição
          const importancia = this.calcularImportanciaJogo(competicao);
          
          // Ajustar força baseado na importância
          const forcaCasaAjustada = forcaCasa * (1 + (importancia - 1) * 0.1);
          const forcaVisitanteAjustada = forcaVisitante * (1 + (importancia - 1) * 0.1);
          
          // Calcular probabilidades
          const probVitoriaCasa = (forcaCasaAjustada + vantagemCasa) / (forcaCasaAjustada + forcaVisitanteAjustada + vantagemCasa);
          const probEmpate = 0.25;
          const probVitoriaVisitante = 1 - probVitoriaCasa - probEmpate;
          
          // Gerar resultado baseado nas probabilidades
          const random = Math.random();
          let golsCasa, golsVisitante;
          
          if (random < probVitoriaCasa) {
            golsCasa = Math.floor(Math.random() * 3) + 1;
            golsVisitante = Math.floor(Math.random() * golsCasa);
          } else if (random < probVitoriaCasa + probEmpate) {
            golsCasa = Math.floor(Math.random() * 3);
            golsVisitante = golsCasa;
          } else {
            golsVisitante = Math.floor(Math.random() * 3) + 1;
            golsCasa = Math.floor(Math.random() * golsVisitante);
          }
          
          return {
            rodada: this.campeonato?.rodadaAtual || 1,
            casa: casa,
            visitante: visitante,
            golsCasa: golsCasa,
            golsVisitante: golsVisitante,
            data: this.gerarDataJogo(),
            local: casa === this.clubeSelecionado?.nome ? this.clubeSelecionado.estadio : 'Estádio do Adversário',
            competicao: competicao,
            importancia: importancia
          };
        }
        
        calcularForcaTime(time) {
          // Força base dos times (pode ser expandida)
          const forcas = {
            'Palmeiras': 85, 'Flamengo': 87, 'São Paulo': 82, 'Santos': 78,
            'Corinthians': 80, 'Grêmio': 79, 'Internacional': 78, 'Athletico-PR': 77,
            'Vasco': 75, 'Botafogo': 76, 'Fortaleza': 74, 'Ceará': 73,
            'Bahia': 72, 'Vitória': 71, 'Sport': 70, 'Náutico': 68,
            'Santa Cruz': 67, 'Salvador': 66, 'Recife': 65, 'Olinda': 64
          };
          
          return forcas[time] || 70;
        }
        
        gerarDataJogo() {
          const hoje = new Date();
          const proximaData = new Date(hoje.getTime() + (7 * 24 * 60 * 60 * 1000)); // +7 dias
          return proximaData.toLocaleDateString('pt-BR');
        }
        
        atualizarTabelaComResultado(resultado, competicao) {
          console.log('Atualizando tabela da competição:', competicao, 'com resultado:', resultado);
          
          const competicaoObj = this.competicoes.ativas[competicao];
          if (!competicaoObj || !competicaoObj.classificacao) return;
          
          // Encontrar times na classificação
          const timeCasa = competicaoObj.classificacao.find(t => t.time === resultado.casa);
          const timeVisitante = competicaoObj.classificacao.find(t => t.time === resultado.visitante);
          
          if (timeCasa && timeVisitante) {
            // Atualizar estatísticas do time da casa
            timeCasa.jogos++;
            timeCasa.golsPro += resultado.golsCasa;
            timeCasa.golsContra += resultado.golsVisitante;
            timeCasa.saldoGols = timeCasa.golsPro - timeCasa.golsContra;
            
            // Atualizar estatísticas do time visitante
            timeVisitante.jogos++;
            timeVisitante.golsPro += resultado.golsVisitante;
            timeVisitante.golsContra += resultado.golsCasa;
            timeVisitante.saldoGols = timeVisitante.golsPro - timeVisitante.golsContra;
            
            // Atualizar pontos baseado no resultado
            if (resultado.golsCasa > resultado.golsVisitante) {
              // Vitória da casa
              timeCasa.pontos += 3;
              timeCasa.vitorias++;
              timeVisitante.derrotas++;
            } else if (resultado.golsCasa < resultado.golsVisitante) {
              // Vitória do visitante
              timeVisitante.pontos += 3;
              timeVisitante.vitorias++;
              timeCasa.derrotas++;
            } else {
              // Empate
              timeCasa.pontos += 1;
              timeVisitante.pontos += 1;
              timeCasa.empates++;
              timeVisitante.empates++;
            }
          }
          
          // Atualizar classificação da competição
          this.atualizarClassificacaoCompeticao(competicao);
        }
        
        atualizarClassificacaoCompeticao(competicao) {
          const competicaoObj = this.competicoes.ativas[competicao];
          if (!competicaoObj || !competicaoObj.classificacao) return;
          
          // Ordenar classificação por pontos, saldo de gols, etc.
          competicaoObj.classificacao.sort((a, b) => {
            // Primeiro critério: pontos
            if (b.pontos !== a.pontos) {
              return b.pontos - a.pontos;
            }
            
            // Segundo critério: vitórias
            if (b.vitorias !== a.vitorias) {
              return b.vitorias - a.vitorias;
            }
            
            // Terceiro critério: saldo de gols
            if (b.saldoGols !== a.saldoGols) {
              return b.saldoGols - a.saldoGols;
            }
            
            // Quarto critério: gols pró
            return b.golsPro - a.golsPro;
          });
          
          // Atualizar estatísticas individuais
          this.atualizarEstatisticasIndividuais(competicao);
          
          console.log('Classificação atualizada para', competicao);
        }
        
        // Sistema de Estatísticas e Prêmios
        atualizarEstatisticasIndividuais(competicao) {
          const competicaoObj = this.competicoes.ativas[competicao];
          if (!competicaoObj) return;
          
          // Inicializar estatísticas se não existir
          if (!competicaoObj.estatisticas) {
            competicaoObj.estatisticas = {
              artilharia: [],
              assistencias: [],
              goleiros: [],
              cartoes: []
            };
          }
          
          // Simular estatísticas individuais
          this.simularEstatisticasIndividuais(competicao);
          
          // Calcular prêmios
          this.calcularPremiosCompeticao(competicao);
        }
        
        simularEstatisticasIndividuais(competicao) {
          const competicaoObj = this.competicoes.ativas[competicao];
          if (!competicaoObj || !competicaoObj.classificacao) return;
          
          const artilharia = [];
          const assistencias = [];
          const goleiros = [];
          
          // Simular artilharia
          competicaoObj.classificacao.forEach(time => {
            const jogos = time.jogos || 0;
            const golsTime = time.golsPro || 0;
            
            // Distribuir gols entre jogadores
            const jogadores = this.elenco.filter(j => j.time === time.time) || [];
            if (jogadores.length > 0) {
              const golsPorJogador = Math.floor(golsTime / jogadores.length);
              const golsRestantes = golsTime % jogadores.length;
              
              jogadores.forEach((jogador, index) => {
                const golsJogador = golsPorJogador + (index < golsRestantes ? 1 : 0);
                if (golsJogador > 0) {
                  artilharia.push({
                    jogador: jogador.nome,
                    time: time.time,
                    gols: golsJogador,
                    jogos: jogos
                  });
                }
                
                // Simular assistências
                const assistenciasJogador = Math.floor(golsJogador * 0.8);
                if (assistenciasJogador > 0) {
                  assistencias.push({
                    jogador: jogador.nome,
                    time: time.time,
                    assistencias: assistenciasJogador,
                    jogos: jogos
                  });
                }
              });
            }
            
            // Simular estatísticas de goleiro
            const golsSofridos = time.golsContra || 0;
            const jogosGoleiro = jogos;
            const mediaGols = jogosGoleiro > 0 ? (golsSofridos / jogosGoleiro).toFixed(2) : 0;
            
            goleiros.push({
              time: time.time,
              golsSofridos: golsSofridos,
              jogos: jogosGoleiro,
              mediaGols: mediaGols,
              defesas: Math.floor(golsSofridos * 3) // Simular defesas
            });
          });
          
          // Ordenar estatísticas
          competicaoObj.estatisticas.artilharia = artilharia.sort((a, b) => b.gols - a.gols);
          competicaoObj.estatisticas.assistencias = assistencias.sort((a, b) => b.assistencias - a.assistencias);
          competicaoObj.estatisticas.goleiros = goleiros.sort((a, b) => parseFloat(a.mediaGols) - parseFloat(b.mediaGols));
        }
        
        calcularPremiosCompeticao(competicao) {
          const competicaoObj = this.competicoes.ativas[competicao];
          if (!competicaoObj || !competicaoObj.estatisticas) return;
          
          const premios = {
            artilharia: null,
            craque: null,
            goleiro: null,
            revelacao: null
          };
          
          // Artilharia
          if (competicaoObj.estatisticas.artilharia.length > 0) {
            premios.artilharia = {
              jogador: competicaoObj.estatisticas.artilharia[0].jogador,
              time: competicaoObj.estatisticas.artilharia[0].time,
              gols: competicaoObj.estatisticas.artilharia[0].gols,
              premio: this.calcularPremioArtilharia(competicao)
            };
          }
          
          // Craque da competição (baseado em gols + assistências)
          const craques = competicaoObj.estatisticas.artilharia.map(art => {
            const assist = competicaoObj.estatisticas.assistencias.find(a => a.jogador === art.jogador);
            return {
              jogador: art.jogador,
              time: art.time,
              pontos: art.gols + (assist ? assist.assistencias * 0.5 : 0)
            };
          }).sort((a, b) => b.pontos - a.pontos);
          
          if (craques.length > 0) {
            premios.craque = {
              jogador: craques[0].jogador,
              time: craques[0].time,
              pontos: craques[0].pontos,
              premio: this.calcularPremioCraque(competicao)
            };
          }
          
          // Melhor goleiro
          if (competicaoObj.estatisticas.goleiros.length > 0) {
            premios.goleiro = {
              time: competicaoObj.estatisticas.goleiros[0].time,
              mediaGols: competicaoObj.estatisticas.goleiros[0].mediaGols,
              defesas: competicaoObj.estatisticas.goleiros[0].defesas,
              premio: this.calcularPremioGoleiro(competicao)
            };
          }
          
          // Revelação (jogador jovem com boa performance)
          const revelacoes = competicaoObj.estatisticas.artilharia
            .filter(art => {
              const jogador = this.elenco.find(j => j.nome === art.jogador);
              return jogador && jogador.idade <= 22;
            })
            .sort((a, b) => b.gols - a.gols);
          
          if (revelacoes.length > 0) {
            premios.revelacao = {
              jogador: revelacoes[0].jogador,
              time: revelacoes[0].time,
              gols: revelacoes[0].gols,
              premio: this.calcularPremioRevelacao(competicao)
            };
          }
          
          // Salvar prêmios
          this.competicoes.premios[competicao] = premios;
        }
        
        calcularPremioArtilharia(competicao) {
          const premios = {
            'estadual': 50000,
            'brasileirao': 200000,
            'copa-brasil': 150000,
            'sul-americana': 100000,
            'libertadores': 300000,
            'mundial': 500000
          };
          return premios[competicao] || 100000;
        }
        
        calcularPremioCraque(competicao) {
          const premios = {
            'estadual': 75000,
            'brasileirao': 300000,
            'copa-brasil': 250000,
            'sul-americana': 150000,
            'libertadores': 500000,
            'mundial': 1000000
          };
          return premios[competicao] || 200000;
        }
        
        calcularPremioGoleiro(competicao) {
          const premios = {
            'estadual': 30000,
            'brasileirao': 100000,
            'copa-brasil': 80000,
            'sul-americana': 60000,
            'libertadores': 150000,
            'mundial': 250000
          };
          return premios[competicao] || 80000;
        }
        
        calcularPremioRevelacao(competicao) {
          const premios = {
            'estadual': 25000,
            'brasileirao': 80000,
            'copa-brasil': 60000,
            'sul-americana': 40000,
            'libertadores': 100000,
            'mundial': 150000
          };
          return premios[competicao] || 60000;
        }
        
        // Sistema de Rebaixamentos e Promoções
        verificarRebaixamentos(competicao) {
          const competicaoObj = this.competicoes.ativas[competicao];
          if (!competicaoObj || !competicaoObj.classificacao) return;
          
          const rebaixamentos = [];
          
          // Verificar rebaixamentos do Brasileirão
          if (competicao === 'brasileirao') {
            const ultimasPosicoes = competicaoObj.classificacao.slice(-4); // Últimos 4
            ultimasPosicoes.forEach(time => {
              rebaixamentos.push({
                time: time.time,
                posicao: competicaoObj.classificacao.indexOf(time) + 1,
                competicao: competicao,
                temporada: this.competicoes.temporada,
                efeitoFinanceiro: this.calcularEfeitoFinanceiroRebaixamento(time)
              });
            });
          }
          
          // Verificar rebaixamentos do Estadual
          if (competicao === 'estadual') {
            const ultimasPosicoes = competicaoObj.classificacao.slice(-2); // Últimos 2
            ultimasPosicoes.forEach(time => {
              rebaixamentos.push({
                time: time.time,
                posicao: competicaoObj.classificacao.indexOf(time) + 1,
                competicao: competicao,
                temporada: this.competicoes.temporada,
                efeitoFinanceiro: this.calcularEfeitoFinanceiroRebaixamento(time)
              });
            });
          }
          
          // Aplicar efeitos financeiros
          rebaixamentos.forEach(rebaixamento => {
            this.aplicarEfeitoFinanceiroRebaixamento(rebaixamento);
          });
          
          // Salvar rebaixamentos
          this.competicoes.rebaixamentos.push(...rebaixamentos);
          
          // Mostrar notificação
          if (rebaixamentos.length > 0) {
            this.mostrarNotificacaoRebaixamento(rebaixamentos);
          }
        }
        
        calcularEfeitoFinanceiroRebaixamento(time) {
          // Efeitos financeiros do rebaixamento
          const efeitos = {
            perdaReceita: 0,
            perdaPatrocinios: 0,
            multaContratos: 0,
            total: 0
          };
          
          // Perda de receita de bilheteria
          efeitos.perdaReceita = 5000000; // R$ 5 milhões
          
          // Perda de patrocínios
          efeitos.perdaPatrocinios = 3000000; // R$ 3 milhões
          
          // Multas de contratos
          efeitos.multaContratos = 2000000; // R$ 2 milhões
          
          efeitos.total = efeitos.perdaReceita + efeitos.perdaPatrocinios + efeitos.multaContratos;
          
          return efeitos;
        }
        
        aplicarEfeitoFinanceiroRebaixamento(rebaixamento) {
          // Aplicar efeitos financeiros ao time rebaixado
          if (rebaixamento.time === this.clubeSelecionado?.nome) {
            console.log('⚠️ SEU TIME FOI REBAIXADO! Efeitos financeiros aplicados.');
            
            // Diminuir orçamento
            if (this.clubeSelecionado) {
              this.clubeSelecionado.orcamento -= rebaixamento.efeitoFinanceiro.total;
              this.atualizarOrcamentoERiqueza();
            }
            
            // Diminuir moral dos jogadores
            if (this.elenco) {
              this.elenco.forEach(jogador => {
                jogador.moral = Math.max(0, (jogador.moral || 50) - 20);
              });
            }
          }
        }
        
        mostrarNotificacaoRebaixamento(rebaixamentos) {
          const times = rebaixamentos.map(r => r.time).join(', ');
          const mensagem = `📉 REBAIXAMENTOS CONFIRMADOS!\n\nTimes rebaixados: ${times}\n\nEfeitos financeiros aplicados.`;
          
          // Criar notificação visual
          this.criarNotificacao(mensagem, 'rebaixamento');
        }
        
        // Sistema de Promoções
        verificarPromocoes(competicao) {
          const competicaoObj = this.competicoes.ativas[competicao];
          if (!competicaoObj || !competicaoObj.classificacao) return;
          
          const promocoes = [];
          
          // Verificar promoções do Brasileirão (top 4 para Libertadores)
          if (competicao === 'brasileirao') {
            const primeirasPosicoes = competicaoObj.classificacao.slice(0, 4);
            primeirasPosicoes.forEach(time => {
              promocoes.push({
                time: time.time,
                posicao: competicaoObj.classificacao.indexOf(time) + 1,
                competicao: 'libertadores',
                temporada: this.competicoes.temporada + 1,
                premio: this.calcularPremioClassificacao('libertadores')
              });
            });
            
            // Posições 5-8 para Sul-Americana
            const posicoes5a8 = competicaoObj.classificacao.slice(4, 8);
            posicoes5a8.forEach(time => {
              promocoes.push({
                time: time.time,
                posicao: competicaoObj.classificacao.indexOf(time) + 1,
                competicao: 'sul-americana',
                temporada: this.competicoes.temporada + 1,
                premio: this.calcularPremioClassificacao('sul-americana')
              });
            });
          }
          
          // Aplicar prêmios de classificação
          promocoes.forEach(promocao => {
            this.aplicarPremioClassificacao(promocao);
          });
          
          // Mostrar notificação
          if (promocoes.length > 0) {
            this.mostrarNotificacaoPromocao(promocoes);
          }
        }
        
        calcularPremioClassificacao(competicao) {
          const premios = {
            'libertadores': 1000000, // R$ 1 milhão
            'sul-americana': 500000  // R$ 500 mil
          };
          return premios[competicao] || 0;
        }
        
        aplicarPremioClassificacao(promocao) {
          if (promocao.time === this.clubeSelecionado?.nome) {
            console.log('🎉 SEU TIME SE CLASSIFICOU! Prêmio recebido.');
            
            // Adicionar prêmio ao orçamento
            if (this.clubeSelecionado) {
              this.clubeSelecionado.orcamento += promocao.premio;
              this.atualizarOrcamentoERiqueza();
            }
            
            // Aumentar moral dos jogadores
            if (this.elenco) {
              this.elenco.forEach(jogador => {
                jogador.moral = Math.min(100, (jogador.moral || 50) + 15);
              });
            }
          }
        }
        
        mostrarNotificacaoPromocao(promocoes) {
          const libertadores = promocoes.filter(p => p.competicao === 'libertadores').map(p => p.time);
          const sulAmericana = promocoes.filter(p => p.competicao === 'sul-americana').map(p => p.time);
          
          let mensagem = '🎉 CLASSIFICAÇÕES CONFIRMADAS!\n\n';
          
          if (libertadores.length > 0) {
            mensagem += `🌍 Libertadores: ${libertadores.join(', ')}\n`;
          }
          
          if (sulAmericana.length > 0) {
            mensagem += `🏆 Sul-Americana: ${sulAmericana.join(', ')}\n`;
          }
          
          mensagem += '\nPrêmios de classificação aplicados.';
          
          this.criarNotificacao(mensagem, 'promocao');
        }
        
        // Sistema de Notificações
        criarNotificacao(mensagem, tipo) {
          const notificacao = document.createElement('div');
          notificacao.className = `notificacao notificacao-${tipo}`;
          notificacao.innerHTML = `
            <div class="notificacao-conteudo">
              <div class="notificacao-icone">${this.getIconeNotificacao(tipo)}</div>
              <div class="notificacao-texto">${mensagem.replace(/\n/g, '<br>')}</div>
              <button class="notificacao-fechar" onclick="this.parentElement.parentElement.remove()">✕</button>
            </div>
          `;
          
          document.body.appendChild(notificacao);
          
          // Remover automaticamente após 10 segundos
          setTimeout(() => {
            if (notificacao.parentElement) {
              notificacao.remove();
            }
          }, 10000);
        }
        
        getIconeNotificacao(tipo) {
          const icones = {
            'rebaixamento': '📉',
            'promocao': '🎉',
            'campeao': '🏆',
            'premio': '💰',
            'jogo': '⚽'
          };
          return icones[tipo] || '📢';
        }
        
        // Métodos para visualizar prêmios
        verPremiosBrasileirao() {
          this.mostrarModalPremios('brasileirao', 'Brasileirão Série A');
        }
        
        verPremiosLibertadores() {
          this.mostrarModalPremios('libertadores', 'Libertadores');
        }
        
        verPremiosCopaBrasil() {
          this.mostrarModalPremios('copa-brasil', 'Copa do Brasil');
        }
        
        verPremiosEstadual() {
          this.mostrarModalPremios('estadual', 'Campeonato Mineiro');
        }
        
        mostrarModalPremios(competicao, nomeCompeticao) {
          const premios = this.competicoes.premios[competicao] || {};
          const estatisticas = this.competicoes.ativas[competicao]?.estatisticas;
          
          const overlay = document.createElement('div');
          overlay.className = 'tabela-overlay';
          overlay.innerHTML = `
            <div class="tabela-container">
              <div class="tabela-header">
                <h2>🏅 Prêmios - ${nomeCompeticao}</h2>
                <button class="btn-fechar" onclick="this.parentElement.parentElement.parentElement.remove()">✕</button>
              </div>
              
              <div class="tabela-content">
                <div class="premios-container">
                  <div class="premio-categoria">
                    <h3>🥇 Artilharia</h3>
                    ${premios.artilharia ? `
                      <div class="premio-vencedor">
                        <span class="jogador">${premios.artilharia.jogador}</span>
                        <span class="time">${premios.artilharia.time}</span>
                        <span class="gols">${premios.artilharia.gols} gols</span>
                        <span class="premio">R$ ${formatarMoeda(premios.artilharia.premio)}</span>
                      </div>
                    ` : '<p>Não definido</p>'}
                  </div>
                  
                  <div class="premio-categoria">
                    <h3>⭐ Craque da Competição</h3>
                    ${premios.craque ? `
                      <div class="premio-vencedor">
                        <span class="jogador">${premios.craque.jogador}</span>
                        <span class="time">${premios.craque.time}</span>
                        <span class="pontos">${premios.craque.pontos} pontos</span>
                        <span class="premio">R$ ${formatarMoeda(premios.craque.premio)}</span>
                      </div>
                    ` : '<p>Não definido</p>'}
                  </div>
                  
                  <div class="premio-categoria">
                    <h3>🧤 Melhor Goleiro</h3>
                    ${premios.goleiro ? `
                      <div class="premio-vencedor">
                        <span class="time">${premios.goleiro.time}</span>
                        <span class="media">${premios.goleiro.mediaGols} gols/jogo</span>
                        <span class="defesas">${premios.goleiro.defesas} defesas</span>
                        <span class="premio">R$ ${formatarMoeda(premios.goleiro.premio)}</span>
                      </div>
                    ` : '<p>Não definido</p>'}
                  </div>
                  
                  <div class="premio-categoria">
                    <h3>🌟 Revelação</h3>
                    ${premios.revelacao ? `
                      <div class="premio-vencedor">
                        <span class="jogador">${premios.revelacao.jogador}</span>
                        <span class="time">${premios.revelacao.time}</span>
                        <span class="gols">${premios.revelacao.gols} gols</span>
                        <span class="premio">R$ ${formatarMoeda(premios.revelacao.premio)}</span>
                      </div>
                    ` : '<p>Não definido</p>'}
                  </div>
                </div>
                
                ${estatisticas ? `
                  <div class="estatisticas-container">
                    <h3>📊 Estatísticas</h3>
                    <div class="estatisticas-grid">
                      <div class="estatistica-item">
                        <h4>Artilharia</h4>
                        <div class="artilharia-lista">
                          ${estatisticas.artilharia.slice(0, 5).map((art, index) => `
                            <div class="artilharia-item">
                              <span class="posicao">${index + 1}º</span>
                              <span class="jogador">${art.jogador}</span>
                              <span class="time">${art.time}</span>
                              <span class="gols">${art.gols} gols</span>
                            </div>
                          `).join('')}
                        </div>
                      </div>
                    </div>
                  </div>
                ` : ''}
              </div>
            </div>
          `;
          
          document.body.appendChild(overlay);
        }
        
        // Simular próxima rodada (único ponto que altera a tabela)
        simularProximaRodada() {
          console.log('Simulando próxima rodada...');
          
          // Simular jogos de todas as competições ativas
          Object.keys(this.competicoes.ativas).forEach(competicao => {
            this.simularRodadaCompeticao(competicao);
          });
          
          // Verificar rebaixamentos e promoções
          this.verificarRebaixamentos('brasileirao');
          this.verificarRebaixamentos('estadual');
          this.verificarPromocoes('brasileirao');
          
          // Atualizar interface
          this.carregarCompeticoes();
          
          // Mostrar notificação
          this.criarNotificacao('⚽ Próxima rodada simulada com sucesso!', 'jogo');
        }
        
        simularRodadaCompeticao(competicao) {
          // Normalizar chave
          const key = (competicao === 'Brasileirão Série A' || competicao === 'Brasileirão') ? 'brasileirao'
                     : (competicao === 'Estadual') ? 'estadual'
                     : (competicao === 'Copa do Brasil') ? 'copaBrasil'
                     : (competicao === 'Libertadores') ? 'libertadores'
                     : (competicao === 'Sul-Americana') ? 'sulAmericana'
                     : competicao;
          const competicaoObj = this.competicoes.ativas[key];
          if (!competicaoObj) return;
          
          // Simular alguns jogos da competição
          if (competicaoObj.classificacao) {
            // Simular UMA rodada consistente (10 jogos Brasileirão, 7 Estadual)
            const numJogos = key === 'brasileirao' ? 10 : (key === 'estadual' ? 7 : 5);
            for (let i = 0; i < numJogos; i++) {
              const times = competicaoObj.classificacao
                .sort(() => Math.random() - 0.5)
                .slice(0, 2);
              
              if (times.length === 2) {
                 const resultado = this.calcularResultadoJogo(times[0].time, times[1].time, key);
                 this.atualizarTabelaComResultado(resultado, key);
              }
            }
          }
        }
        
        adicionarAoHistorico(resultado) {
          if (!this.campeonato) this.campeonato = { historico: [] };
          
          this.campeonato.historico.push({
            ...resultado,
            timestamp: new Date().toISOString()
          });
        }
        
        avancarRodada() {
          if (!this.campeonato) return;
          
          this.campeonato.rodadaAtual++;
          this.proximoJogo = null; // Limpar próximo jogo para gerar novo
          
          // Verificar se o campeonato terminou
          if (this.campeonato.rodadaAtual > this.campeonato.totalRodadas) {
            this.finalizarCampeonato();
          }
        }
        
        finalizarCampeonato() {
          const tabela = this.gerarTabelaBrasileirao();
          const campeao = tabela[0];
          const meuTime = tabela.find(t => t.nome === this.clubeAtual.nome);
          
          alert(`🏆 CAMPEONATO FINALIZADO! 🏆\n\nCampeão: ${campeao.nome}\nSua posição: ${meuTime.posicao}º lugar\n\nPontos: ${meuTime.pontos}`);
        }
        
        gerarAdversarioAleatorio() {
          const adversarios = [
            'Palmeiras', 'Flamengo', 'São Paulo', 'Santos', 'Corinthians',
            'Grêmio', 'Internacional', 'Athletico-PR', 'Vasco', 'Botafogo',
            'Fortaleza', 'Ceará', 'Bahia', 'Vitória', 'Sport',
            'Náutico', 'Santa Cruz', 'Salvador', 'Recife', 'Olinda'
          ];
          return adversarios[Math.floor(Math.random() * adversarios.length)];
        }
        
        mostrarTelaSimulacao(dados) {
          // Modal com simulação em tempo real (60s)
          const overlay = document.createElement('div');
          overlay.className = 'simulacao-overlay';
          overlay.innerHTML = `
            <div class="simulacao-container">
              <div class="simulacao-header">
                <h2>⚽ ${dados.casa} vs ${dados.visitante}</h2>
                <button class="btn-fechar" onclick="this.parentElement.parentElement.parentElement.remove()">✕</button>
              </div>
              <div class="info-jogo" style="padding: 12px 20px">
                <p><strong>Local:</strong> ${dados.local} &nbsp; • &nbsp; <strong>Rodada:</strong> ${dados.rodada}</p>
                <p id="tempo-simulacao">⏱️ 00:00</p>
              </div>
              <div class="resultado-jogo">
                <div class="time-casa">
                  <div class="nome-time">${dados.casa}</div>
                  <div class="gols" id="gols-casa">0</div>
                </div>
                <div class="vs">VS</div>
                <div class="time-visitante">
                  <div class="nome-time">${dados.visitante}</div>
                  <div class="gols" id="gols-visitante">0</div>
                </div>
              </div>
              <div style="padding: 0 20px 16px; color:#555">Placar será atualizado em tempo real (60s)</div>
              <div class="simulacao-acoes">
                <button class="btn-fechar-simulacao" onclick="document.querySelector('.simulacao-overlay')?.remove()">Fechar</button>
              </div>
            </div>`;
          document.body.appendChild(overlay);

          const totalMs = 60000;
          const steps = 12; // a cada 5s
          const intervalo = Math.floor(totalMs / steps);
          const finalCasa = dados.golsCasa;
          const finalVisitante = dados.golsVisitante;
          const genMomentos = (qtd)=>{ const m=[]; for(let i=0;i<qtd;i++) m.push(Math.floor(Math.random()*totalMs)); return m.sort((a,b)=>a-b)};
          const momentosCasa = genMomentos(finalCasa);
          const momentosVisit = genMomentos(finalVisitante);
          let decorrido = 0, iC=0, iV=0;

          const tick = setInterval(()=>{
            decorrido += intervalo;
            const ss = String(Math.min(60, Math.floor(decorrido/1000))).padStart(2,'0');
            const t = document.getElementById('tempo-simulacao');
            if (t) t.textContent = `⏱️ 00:${ss}`;

            while(iC < momentosCasa.length && momentosCasa[iC] <= decorrido){
              const el = document.getElementById('gols-casa'); if (el) el.textContent = String(Number(el.textContent||'0')+1); iC++; }
            while(iV < momentosVisit.length && momentosVisit[iV] <= decorrido){
              const el = document.getElementById('gols-visitante'); if (el) el.textContent = String(Number(el.textContent||'0')+1); iV++; }

            if (decorrido >= totalMs) clearInterval(tick);
          }, intervalo);
        }
        
        verTabelaBrasileirao() {
          console.log('Ver tabela do Brasileirão...');
          
          const competicao = this.competicoes.ativas.brasileirao;
          if (!competicao) {
            console.log('Competição Brasileirão não encontrada');
            return;
          }
          
          // Removido: não simular automaticamente resultados aqui
          
          // Ordenar classificação
          const classificacao = competicao.classificacao
            .sort((a, b) => b.pontos - a.pontos || b.saldoGols - a.saldoGols)
            .map((time, index) => ({ ...time, posicao: index + 1 }));
          
          this.mostrarTabelaCompeticao('Brasileirão Série A', classificacao);
        }
        
        verTabelaLibertadores() {
          console.log('Ver tabela da Libertadores...');
          
          const competicao = this.competicoes.ativas.libertadores;
          if (!competicao) {
            console.log('Competição Libertadores não encontrada');
            return;
          }
          
          this.mostrarGruposLibertadores(competicao.grupos);
        }
        
        verTabelaCopaBrasil() {
          console.log('Ver tabela da Copa do Brasil...');
          
          const competicao = this.competicoes.ativas.copaBrasil;
          if (!competicao) {
            console.log('Competição Copa do Brasil não encontrada');
            return;
          }
          
          this.mostrarChaveamentoCopaBrasil(competicao.chaveamento);
        }
        
        verTabelaEstadual() {
          console.log('Ver tabela do Estadual...');
          
          const competicao = this.competicoes.ativas.estadual;
          if (!competicao) {
            console.log('Competição Estadual não encontrada');
            return;
          }
          
          // Removido: não simular automaticamente resultados aqui
          
          // Ordenar classificação
          const classificacao = competicao.classificacao
            .sort((a, b) => b.pontos - a.pontos || b.saldoGols - a.saldoGols)
            .map((time, index) => ({ ...time, posicao: index + 1 }));
          
          this.mostrarTabelaCompeticao('Campeonato Mineiro', classificacao);
        }
        
        // Simular resultados para demonstração
        simularResultadosBrasileirao() {
          const competicao = this.competicoes.ativas.brasileirao;
          
          // Não atribuir pontos aleatórios por padrão para manter 0 até simular
        }
        
        simularResultadosEstadual() {
          const competicao = this.competicoes.ativas.estadual;
          
          // Não atribuir pontos aleatórios por padrão para manter 0 até simular
        }
        
        // Métodos de visualização
        mostrarTabelaCompeticao(nome, classificacao) {
          const overlay = document.createElement('div');
          overlay.className = 'tabela-overlay';
          overlay.innerHTML = `
            <div class="tabela-container">
              <div class="tabela-header">
                <h2>🏆 ${nome}</h2>
                <button class="btn-fechar" onclick="this.parentElement.parentElement.parentElement.remove()">✕</button>
              </div>
              
              <div class="tabela-content">
                <table class="tabela-brasileirao">
                  <thead>
                    <tr>
                      <th>Pos</th>
                      <th>Time</th>
                      <th>Pts</th>
                      <th>J</th>
                      <th>V</th>
                      <th>E</th>
                      <th>D</th>
                      <th>GP</th>
                      <th>GC</th>
                      <th>SG</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${classificacao.map(time => `
                      <tr class="${time.time === this.clubeSelecionado?.nome ? 'meu-time' : ''}">
                        <td>${time.posicao}</td>
                        <td>${time.time}</td>
                        <td>${time.pontos}</td>
                        <td>${time.jogos}</td>
                        <td>${time.vitorias}</td>
                        <td>${time.empates}</td>
                        <td>${time.derrotas}</td>
                        <td>${time.golsPro}</td>
                        <td>${time.golsContra}</td>
                        <td>${time.saldoGols}</td>
                      </tr>
                    `).join('')}
                  </tbody>
                </table>
              </div>
            </div>
          `;
          
          document.body.appendChild(overlay);
        }
        
        mostrarGruposLibertadores(grupos) {
          const overlay = document.createElement('div');
          overlay.className = 'tabela-overlay';
          overlay.innerHTML = `
            <div class="tabela-container">
              <div class="tabela-header">
                <h2>🌍 Libertadores 2025</h2>
                <button class="btn-fechar" onclick="this.parentElement.parentElement.parentElement.remove()">✕</button>
              </div>
              
              <div class="tabela-content">
                <div class="grupos-grid">
                  ${grupos.map(grupo => `
                    <div class="grupo-card">
                      <h3>${grupo.nome}</h3>
                      <table class="tabela-grupo">
                        <thead>
                          <tr>
                            <th>Time</th>
                            <th>Pts</th>
                            <th>J</th>
                            <th>V</th>
                            <th>E</th>
                            <th>D</th>
                            <th>GP</th>
                            <th>GC</th>
                          </tr>
                        </thead>
                        <tbody>
                          ${grupo.times.map(time => `
                            <tr class="${time === this.clubeSelecionado?.nome ? 'meu-time' : ''}">
                              <td>${time}</td>
                              <td>${Math.floor(Math.random() * 12) + 3}</td>
                              <td>6</td>
                              <td>${Math.floor(Math.random() * 4) + 1}</td>
                              <td>${Math.floor(Math.random() * 3) + 0}</td>
                              <td>${Math.floor(Math.random() * 3) + 0}</td>
                              <td>${Math.floor(Math.random() * 10) + 3}</td>
                              <td>${Math.floor(Math.random() * 8) + 2}</td>
                            </tr>
                          `).join('')}
                        </tbody>
                      </table>
                    </div>
                  `).join('')}
                </div>
              </div>
            </div>
          `;
          
          document.body.appendChild(overlay);
        }
        
        mostrarChaveamentoCopaBrasil(chaveamento) {
          const overlay = document.createElement('div');
          overlay.className = 'tabela-overlay';
          overlay.innerHTML = `
            <div class="tabela-container">
              <div class="tabela-header">
                <h2>🏆 Copa do Brasil 2025</h2>
                <button class="btn-fechar" onclick="this.parentElement.parentElement.parentElement.remove()">✕</button>
              </div>
              
              <div class="tabela-content">
                <div class="chaveamento-grid">
                  ${chaveamento.map(jogo => `
                    <div class="jogo-chaveamento">
                      <div class="time-casa">${jogo.casa}</div>
                      <div class="vs">vs</div>
                      <div class="time-visitante">${jogo.visitante}</div>
                      <div class="resultado">
                        ${jogo.realizado ? `${jogo.golsCasa} - ${jogo.golsVisitante}` : 'A definir'}
                      </div>
                    </div>
                  `).join('')}
                </div>
              </div>
            </div>
          `;
          
          document.body.appendChild(overlay);
        }
        
        inicializarCampeonato() {
          const times = [
            'Palmeiras', 'Flamengo', 'São Paulo', 'Santos', 'Corinthians',
            'Grêmio', 'Internacional', 'Athletico-PR', 'Vasco', 'Botafogo',
            'Fortaleza', 'Ceará', 'Bahia', 'Vitória', 'Sport',
            'Náutico', 'Santa Cruz', 'Salvador', 'Recife', 'Olinda'
          ];
          
          this.campeonato = {
            rodadaAtual: 1,
            totalRodadas: 38,
            historico: [],
            tabela: times.map(time => ({
              nome: time,
              pontos: Math.floor(Math.random() * 60) + 20,
              jogos: Math.floor(Math.random() * 20) + 10,
              vitorias: Math.floor(Math.random() * 15) + 5,
              empates: Math.floor(Math.random() * 10) + 2,
              derrotas: Math.floor(Math.random() * 10) + 2,
              golsPro: Math.floor(Math.random() * 40) + 20,
              golsContra: Math.floor(Math.random() * 30) + 15,
              saldoGols: 0,
              ultimosJogos: []
            }))
          };
          
          // Calcular saldo de gols
          this.campeonato.tabela.forEach(time => {
            time.saldoGols = time.golsPro - time.golsContra;
          });
        }
        
        gerarTabelaBrasileirao() {
          const times = [
            'Palmeiras', 'Flamengo', 'São Paulo', 'Santos', 'Corinthians',
            'Grêmio', 'Internacional', 'Athletico-PR', 'Vasco', 'Botafogo',
            'Fortaleza', 'Ceará', 'Bahia', 'Vitória', 'Sport',
            'Náutico', 'Santa Cruz', 'Salvador', 'Recife', 'Olinda'
          ];
          
          // Inicializar dados do campeonato se não existir
          if (!this.campeonato) {
            this.campeonato = {
              rodadaAtual: 1,
              totalRodadas: 38,
              historico: [],
              tabela: times.map(time => ({
                nome: time,
                pontos: 0,
                jogos: 0,
                vitorias: 0,
                empates: 0,
                derrotas: 0,
                golsPro: 0,
                golsContra: 0,
                saldoGols: 0,
                ultimosJogos: []
              }))
            };
          }
          
          // Verificar se tabela existe
          if (!this.campeonato.tabela) {
            this.campeonato.tabela = times.map(time => ({
              nome: time,
              pontos: 0,
              jogos: 0,
              vitorias: 0,
              empates: 0,
              derrotas: 0,
              golsPro: 0,
              golsContra: 0,
              saldoGols: 0,
              ultimosJogos: []
            }));
          }
          
          // Ordenar tabela por pontos e saldo de gols
          return this.campeonato.tabela
            .sort((a, b) => b.pontos - a.pontos || b.saldoGols - a.saldoGols)
            .map((time, index) => ({ ...time, posicao: index + 1 }));
        }
        
        mostrarTelaTabela(tabela) {
          // Criar overlay da tabela
          const overlay = document.createElement('div');
          overlay.className = 'tabela-overlay';
          overlay.innerHTML = `
            <div class="tabela-container">
              <div class="tabela-header">
                <h2>🏆 TABELA DO BRASILEIRÃO</h2>
                <button class="btn-fechar" onclick="this.parentElement.parentElement.parentElement.remove()">✕</button>
              </div>
              
              <div class="tabela-content">
                <table class="tabela-brasileirao">
                  <thead>
                    <tr>
                      <th>Pos</th>
                      <th>Time</th>
                      <th>Pts</th>
                      <th>J</th>
                      <th>V</th>
                      <th>E</th>
                      <th>D</th>
                      <th>GP</th>
                      <th>GC</th>
                      <th>SG</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${tabela.map(time => `
                      <tr class="${time.nome === this.clubeAtual?.nome ? 'meu-time' : ''}">
                        <td>${time.posicao}</td>
                        <td>${time.nome}</td>
                        <td>${time.pontos}</td>
                        <td>${time.jogos}</td>
                        <td>${time.vitorias}</td>
                        <td>${time.empates}</td>
                        <td>${time.derrotas}</td>
                        <td>${time.golsPro}</td>
                        <td>${time.golsContra}</td>
                        <td>${time.saldoGols > 0 ? '+' : ''}${time.saldoGols}</td>
                      </tr>
                    `).join('')}
                  </tbody>
                </table>
              </div>
            </div>
          `;
          
          document.body.appendChild(overlay);
        }
        
        simularProximoJogo() {
          console.log('Simulando próximo jogo...');
          this.simularJogo();
        }
        
        // Métodos para competições
        verTabelaLibertadores() {
          console.log('Ver tabela da Libertadores...');
          alert('Tabela da Libertadores - Funcionalidade em desenvolvimento');
        }
        
        verTabelaCopaBrasil() {
          console.log('Ver tabela da Copa do Brasil...');
          alert('Tabela da Copa do Brasil - Funcionalidade em desenvolvimento');
        }
        
        verTabelaEstadual() {
          console.log('Ver tabela do Estadual...');
          alert('Tabela do Estadual - Funcionalidade em desenvolvimento');
        }
        
        // Métodos para negociações avançadas
        modoPichincha() {
          console.log('Ativando modo pichincha...');
          alert('Modo Pichincha: Negociações com valores mais baixos e maior chance de aceite!');
        }
        
        modoBarganha() {
          console.log('Ativando modo barganha...');
          alert('Modo Barganha: Negociações agressivas com múltiplas propostas!');
        }
        
        iniciarTroca() {
          console.log('Iniciando troca de jogadores...');
          alert('Sistema de troca de jogadores - Funcionalidade em desenvolvimento');
        }
        
        venderJogador() {
          console.log('Vendendo jogador...');
          alert('Sistema de venda de jogadores - Funcionalidade em desenvolvimento');
        }
        
        gerenciarEmprestimos() {
          console.log('Gerenciando empréstimos...');
          alert('Sistema de empréstimos - Funcionalidade em desenvolvimento');
        }
        
        // Métodos para treinamento
        iniciarTreino(tipo) {
          console.log('Iniciando treino:', tipo);
          
          const beneficios = {
            fisico: { resistencia: 5, velocidade: 3, forca: 2 },
            tecnico: { finalizacao: 4, passe: 3, drible: 2 },
            mental: { moral: 5, concentracao: 3, lideranca: 2 },
            tatico: { posicionamento: 4, trabalhoEquipe: 3, visaoJogo: 2 }
          };
          
          const beneficio = beneficios[tipo];
          if (beneficio) {
            this.aplicarBeneficiosTreino(beneficio);
            alert(`Treino ${tipo} iniciado! Benefícios aplicados ao elenco.`);
          }
        }
        
        aplicarBeneficiosTreino(beneficios) {
          if (this.elenco && this.elenco.length > 0) {
            this.elenco.forEach(jogador => {
              // Aplicar benefícios aleatoriamente
              Object.keys(beneficios).forEach(atributo => {
                if (Math.random() > 0.5) { // 50% de chance
                  const bonus = beneficios[atributo];
                  // Aqui você pode implementar a lógica de melhoria dos atributos
                }
              });
            });
          }
        }
        
        treinoEspecial() {
          console.log('Iniciando treino especial...');
          alert('🌟 Treino Especial: Todos os atributos melhorados em 50%!');
        }
        
        treinoGrupo() {
          console.log('Iniciando treino em grupo...');
          alert('👥 Treino em Grupo: Moral da equipe aumentada significativamente!');
        }
        
        // Métodos para treinadores
        contratarTreinador(treinadorId) {
          console.log('Contratando treinador:', treinadorId);
          alert('Treinador contratado com sucesso!');
        }
        
        demitirTreinador() {
          console.log('Demitindo treinador atual...');
          alert('Treinador demitido. Procure um novo treinador.');
        }
        
        // Métodos para lista de jogadores nas táticas
        atualizarListaJogadoresTaticas() {
          const container = document.getElementById('players-list-content');
          if (!container) return;
          
          container.innerHTML = '';
          
          this.elenco.forEach((jogador, index) => {
            const jogadorElement = document.createElement('div');
            jogadorElement.className = 'player-list-item';
            jogadorElement.innerHTML = `
              <span class="col-pos">${index + 1}</span>
              <span class="col-role">${jogador.posicao}</span>
              <span class="col-ability">${jogador.habilidade}</span>
              <span class="col-player">${jogador.nome}</span>
              <span class="col-condition">${Math.floor(Math.random() * 20) + 80}%</span>
              <span class="col-moral">${jogador.moral}</span>
              <div class="player-actions">
                <button onclick="window.gameController.escalarJogadorTaticas(${jogador.id})" class="btn-escalar-taticas">
                  ⚽ Escalar
                </button>
              </div>
            `;
            container.appendChild(jogadorElement);
          });
        }
        
        escalarJogadorTaticas(jogadorId) {
          console.log('Escalando jogador nas táticas:', jogadorId);
          
          const jogador = this.elenco.find(j => j.id === jogadorId);
          if (!jogador) return;
          
          // Adicionar jogador à escalação
          if (!this.escalacao) {
            this.escalacao = [];
          }
          
          // Verificar se já não está escalado
          if (this.escalacao.find(e => e.id === jogadorId)) {
            alert(`${jogador.nome} já está escalado!`);
            return;
          }
          
          // Adicionar à escalação
          this.escalacao.push(jogador);
          
          // Atualizar interface
          this.atualizarEscalacaoInterface();
          
          alert(`${jogador.nome} escalado com sucesso!`);
        }
        
        // Métodos para listas de jogadores
        verListaTitulares() {
          this.carregarListaTitulares();
          this.mostrarAba('titulares');
        }
        
        verListaReservas() {
          this.carregarListaReservas();
          this.mostrarAba('reservas');
        }
        
        verListaLesionados() {
          this.carregarListaLesionados();
          this.mostrarAba('lesionados');
        }
        
        verListaPromessas() {
          this.carregarListaPromessas();
          this.mostrarAba('promessas');
        }
        
        verListaContratos() {
          this.carregarListaContratos();
          this.mostrarAba('contratos');
        }
        
        carregarListaTitulares() {
          const container = document.getElementById('titulares-grid');
          if (!container) return;
          
          container.innerHTML = '';
          
          // Filtrar titulares (primeiros 11 jogadores por habilidade)
          const titulares = this.elenco
            .sort((a, b) => b.habilidade - a.habilidade)
            .slice(0, 11);
          
          titulares.forEach((jogador, index) => {
            const jogadorElement = document.createElement('div');
            jogadorElement.className = 'jogador-card titular';
            jogadorElement.innerHTML = `
              <div class="card-header">
                <div class="card-number">${index + 1}</div>
                <div class="card-position">${jogador.posicao}</div>
              </div>
              <div class="card-photo">
                <div class="player-avatar">👤</div>
                <div class="player-rating">${jogador.habilidade}</div>
              </div>
              <div class="card-name">${jogador.nome}</div>
              <div class="card-stats">
                <div class="stat-item">
                  <span class="stat-label">Idade</span>
                  <span class="stat-value">${jogador.idade}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Moral</span>
                  <span class="stat-value">${jogador.moral}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Valor</span>
                  <span class="stat-value">${formatarMoeda(jogador.valor)}</span>
                </div>
              </div>
              <div class="card-actions">
                <button onclick="window.gameController.verDetalhesJogador(${jogador.id})" class="btn-card-action detalhes">
                  📊 Detalhes
                </button>
              </div>
            `;
            container.appendChild(jogadorElement);
          });
        }
        
        carregarListaReservas() {
          const container = document.getElementById('reservas-grid');
          if (!container) return;
          
          container.innerHTML = '';
          
          // Filtrar reservas (jogadores 12-25 por habilidade)
          const reservas = this.elenco
            .sort((a, b) => b.habilidade - a.habilidade)
            .slice(11, 25);
          
          reservas.forEach((jogador, index) => {
            const jogadorElement = document.createElement('div');
            jogadorElement.className = 'jogador-card reserva';
            jogadorElement.innerHTML = `
              <div class="card-header">
                <div class="card-number">${index + 12}</div>
                <div class="card-position">${jogador.posicao}</div>
              </div>
              <div class="card-photo">
                <div class="player-avatar">👤</div>
                <div class="player-rating">${jogador.habilidade}</div>
              </div>
              <div class="card-name">${jogador.nome}</div>
              <div class="card-stats">
                <div class="stat-item">
                  <span class="stat-label">Idade</span>
                  <span class="stat-value">${jogador.idade}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Moral</span>
                  <span class="stat-value">${jogador.moral}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Valor</span>
                  <span class="stat-value">${formatarMoeda(jogador.valor)}</span>
                </div>
              </div>
              <div class="card-actions">
                <button onclick="window.gameController.verDetalhesJogador(${jogador.id})" class="btn-card-action detalhes">
                  📊 Detalhes
                </button>
              </div>
            `;
            container.appendChild(jogadorElement);
          });
        }
        
        carregarListaLesionados() {
          const container = document.getElementById('lesionados-grid');
          if (!container) return;
          
          container.innerHTML = '';
          
          // Simular jogadores lesionados (aleatório)
          const lesionados = this.elenco.filter(() => Math.random() < 0.2).slice(0, 3);
          
          if (lesionados.length === 0) {
            container.innerHTML = '<div class="no-data">🎉 Nenhum jogador lesionado!</div>';
            return;
          }
          
          lesionados.forEach((jogador, index) => {
            const diasLesao = Math.floor(Math.random() * 30) + 1;
            const jogadorElement = document.createElement('div');
            jogadorElement.className = 'jogador-card lesionado';
            jogadorElement.innerHTML = `
              <div class="card-header">
                <div class="card-number">🏥</div>
                <div class="card-position">${jogador.posicao}</div>
              </div>
              <div class="card-photo">
                <div class="player-avatar">🩹</div>
                <div class="player-rating">${jogador.habilidade}</div>
              </div>
              <div class="card-name">${jogador.nome}</div>
              <div class="card-stats">
                <div class="stat-item">
                  <span class="stat-label">Dias Lesão</span>
                  <span class="stat-value">${diasLesao}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Tipo</span>
                  <span class="stat-value">Muscular</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Retorno</span>
                  <span class="stat-value">${diasLesao} dias</span>
                </div>
              </div>
              <div class="card-actions">
                <button onclick="window.gameController.verDetalhesJogador(${jogador.id})" class="btn-card-action detalhes">
                  📊 Detalhes
                </button>
              </div>
            `;
            container.appendChild(jogadorElement);
          });
        }
        
        carregarListaPromessas() {
          const container = document.getElementById('promessas-grid');
          if (!container) return;
          
          container.innerHTML = '';
          
          // Filtrar promessas (jogadores jovens com potencial)
          const promessas = this.elenco
            .filter(j => j.idade <= 22 && j.habilidade >= 70)
            .sort((a, b) => b.habilidade - a.habilidade);
          
          if (promessas.length === 0) {
            container.innerHTML = '<div class="no-data">🔍 Nenhuma promessa encontrada!</div>';
            return;
          }
          
          promessas.forEach((jogador, index) => {
            const potencial = Math.min(99, jogador.habilidade + Math.floor(Math.random() * 15) + 5);
            const jogadorElement = document.createElement('div');
            jogadorElement.className = 'jogador-card promessa';
            jogadorElement.innerHTML = `
              <div class="card-header">
                <div class="card-number">⭐</div>
                <div class="card-position">${jogador.posicao}</div>
              </div>
              <div class="card-photo">
                <div class="player-avatar">🌟</div>
                <div class="player-rating">${jogador.habilidade}</div>
              </div>
              <div class="card-name">${jogador.nome}</div>
              <div class="card-stats">
                <div class="stat-item">
                  <span class="stat-label">Idade</span>
                  <span class="stat-value">${jogador.idade}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Potencial</span>
                  <span class="stat-value">${potencial}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Valor</span>
                  <span class="stat-value">${formatarMoeda(jogador.valor)}</span>
                </div>
              </div>
              <div class="card-actions">
                <button onclick="window.gameController.verDetalhesJogador(${jogador.id})" class="btn-card-action detalhes">
                  📊 Detalhes
                </button>
              </div>
            `;
            container.appendChild(jogadorElement);
          });
        }
        
        carregarListaContratos() {
          const container = document.getElementById('contratos-table');
          if (!container) return;
          
          container.innerHTML = `
            <table class="contratos-table">
              <thead>
                <tr>
                  <th>Jogador</th>
                  <th>Posição</th>
                  <th>Salário</th>
                  <th>Contrato Até</th>
                  <th>Status</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody>
                ${this.elenco.map(jogador => {
                  const contratoAte = new Date();
                  contratoAte.setFullYear(contratoAte.getFullYear() + Math.floor(Math.random() * 3) + 1);
                  const status = contratoAte.getFullYear() <= new Date().getFullYear() + 1 ? 'Renovar' : 'OK';
                  
                  return `
                    <tr>
                      <td>${jogador.nome}</td>
                      <td>${jogador.posicao}</td>
                      <td>${formatarMoeda(jogador.salario)}</td>
                      <td>${contratoAte.getFullYear()}</td>
                      <td><span class="status-${status.toLowerCase()}">${status}</span></td>
                      <td>
                        <button onclick="window.gameController.renovarContrato(${jogador.id})" class="btn-renovar">
                          📝 Renovar
                        </button>
                      </td>
                    </tr>
                  `;
                }).join('')}
              </tbody>
            </table>
          `;
        }
        
        // SISTEMA DE COMPETIÇÕES
        inicializarSistemaCompeticoes() {
          console.log('Inicializando sistema de competições...');
          
          // Criar competições da temporada
          this.criarBrasileirao();
          this.criarCopaBrasil();
          this.criarLibertadores();
          this.criarEstadual();
          this.criarSulAmericana();
          
          // Gerar calendário anual
          this.gerarCalendarioAnual();
          
          console.log('Sistema de competições inicializado');
        }
        
        // Classe Competição
        criarCompeticao(nome, formato, times, regras) {
          return {
            nome: nome,
            formato: formato, // 'pontos-corridos' | 'mata-mata' | 'grupos-mata-mata'
            times: times,
            regras: regras,
            rodadas: [],
            classificacao: [],
            fase: 'não iniciada',
            proximoJogo: null,
            historico: []
          };
        }
        
        criarBrasileirao() {
          const timesSerieA = [
            'Palmeiras', 'Flamengo', 'São Paulo', 'Santos', 'Corinthians',
            'Grêmio', 'Internacional', 'Athletico-PR', 'Vasco', 'Botafogo',
            'Fortaleza', 'Ceará', 'Bahia', 'Vitória', 'Sport',
            'Náutico', 'Santa Cruz', 'Salvador', 'Recife', 'Olinda'
          ];
          
          this.competicoes.ativas.brasileirao = this.criarCompeticao(
            'Brasileirão Série A 2025',
            'pontos-corridos',
            timesSerieA,
            {
              vitoria: 3,
              empate: 1,
              rebaixamentos: 4,
              totalRodadas: 38,
              rodadaAtual: 0
            }
          );
          
          this.gerarRodadasBrasileirao();
        }
        
        criarCopaBrasil() {
          const timesCopa = [
            'Palmeiras', 'Flamengo', 'São Paulo', 'Santos', 'Corinthians',
            'Grêmio', 'Internacional', 'Athletico-PR', 'Vasco', 'Botafogo',
            'Fortaleza', 'Ceará', 'Bahia', 'Vitória', 'Sport',
            'Náutico', 'Santa Cruz', 'Salvador', 'Recife', 'Olinda',
            'Cruzeiro', 'Atlético-MG', 'América-MG', 'Tombense', 'Villa Nova',
            'Uberlândia', 'Democrata', 'Tupi', 'Ipatinga', 'Boa Esporte'
          ];
          
          this.competicoes.ativas.copaBrasil = this.criarCompeticao(
            'Copa do Brasil 2025',
            'mata-mata',
            timesCopa,
            {
              fases: ['oitavas', 'quartas', 'semifinal', 'final'],
              faseAtual: 'oitavas',
              jogosIdaVolta: true
            }
          );
          
          this.gerarChaveamentoCopaBrasil();
        }
        
        criarLibertadores() {
          const timesLibertadores = [
            // Times brasileiros
            'Palmeiras', 'Flamengo', 'São Paulo', 'Santos', 'Corinthians',
            'Grêmio', 'Internacional', 'Athletico-PR', 'Vasco', 'Botafogo',
            // Times argentinos
            'Boca Juniors', 'River Plate', 'Racing', 'Independiente',
            // Times uruguaios
            'Peñarol', 'Nacional',
            // Times chilenos
            'Colo-Colo', 'Universidad de Chile',
            // Times colombianos
            'Atlético Nacional', 'Millonarios',
            // Times peruanos
            'Universitario', 'Alianza Lima',
            // Times paraguaios
            'Olimpia', 'Cerro Porteño',
            // Times bolivianos
            'The Strongest', 'Bolívar',
            // Times equatorianos
            'Barcelona SC', 'Emelec',
            // Times venezuelanos
            'Caracas', 'Deportivo Táchira'
          ];
          
          this.competicoes.ativas.libertadores = this.criarCompeticao(
            'Libertadores 2025',
            'grupos-mata-mata',
            timesLibertadores,
            {
              grupos: 8,
              timesPorGrupo: 4,
              classificadosPorGrupo: 2,
              fases: ['grupos', 'oitavas', 'quartas', 'semifinal', 'final'],
              faseAtual: 'grupos'
            }
          );
          
          this.gerarGruposLibertadores();
        }
        
        criarEstadual() {
          const timesEstadual = [
            'Cruzeiro', 'Atlético-MG', 'América-MG', 'Tombense', 'Villa Nova',
            'Uberlândia', 'Democrata', 'Tupi', 'Ipatinga', 'Boa Esporte',
            'Caldense', 'Uberaba', 'Patrocinense', 'Araxá', 'Itabirito'
          ];
          
          this.competicoes.ativas.estadual = this.criarCompeticao(
            'Campeonato Mineiro 2025',
            'pontos-corridos',
            timesEstadual,
            {
              vitoria: 3,
              empate: 1,
              fases: ['primeira-fase', 'quadrangular', 'final'],
              faseAtual: 'primeira-fase',
              totalRodadas: 14
            }
          );
          
          this.gerarRodadasEstadual();
        }
        
        criarSulAmericana() {
          const timesSulAmericana = [
            'Fortaleza', 'Ceará', 'Bahia', 'Vitória', 'Sport',
            'Náutico', 'Santa Cruz', 'Salvador', 'Recife', 'Olinda',
            // Times de outros países
            'Defensa y Justicia', 'Lanús', 'Arsenal', 'Banfield',
            'Defensor Sporting', 'Danubio', 'Universidad Católica', 'Unión Española',
            'Deportivo Cali', 'Once Caldas', 'Universitario', 'Sporting Cristal',
            'Libertad', 'Guaraní', 'The Strongest', 'Bolívar'
          ];
          
          this.competicoes.ativas.sulAmericana = this.criarCompeticao(
            'Sul-Americana 2025',
            'grupos-mata-mata',
            timesSulAmericana,
            {
              grupos: 8,
              timesPorGrupo: 4,
              classificadosPorGrupo: 2,
              fases: ['grupos', 'oitavas', 'quartas', 'semifinal', 'final'],
              faseAtual: 'grupos'
            }
          );
          
          this.gerarGruposSulAmericana();
        }
        
        // Métodos de geração de rodadas e grupos
        gerarGruposSulAmericana() {
          const competicao = this.competicoes.ativas.sulAmericana;
          const grupos = [];
          
          // Embaralhar times
          const timesEmbaralhados = [...competicao.times].sort(() => Math.random() - 0.5);
          
          // Criar 8 grupos de 4 times
          for (let i = 0; i < 8; i++) {
            const grupo = {
              nome: `Grupo ${String.fromCharCode(65 + i)}`,
              times: timesEmbaralhados.slice(i * 4, (i + 1) * 4),
              classificacao: [],
              rodadas: []
            };
            
            // Gerar rodadas do grupo (6 rodadas - todos contra todos)
            for (let rodada = 0; rodada < 6; rodada++) {
              const jogos = [];
              const times = [...grupo.times];
              
              for (let j = 0; j < 2; j++) {
                const time1 = times.shift();
                const time2 = times.pop();
                jogos.push({
                  casa: time1,
                  visitante: time2,
                  golsCasa: 0,
                  golsVisitante: 0,
                  realizado: false,
                  data: this.gerarDataJogo(rodada + 1, 'sul-americana')
                });
              }
              
              grupo.rodadas.push({
                numero: rodada + 1,
                jogos: jogos
              });
            }
            
            grupos.push(grupo);
          }
          
          competicao.grupos = grupos;
          competicao.fase = 'grupos';
        }
        
        gerarRodadasBrasileirao() {
          const competicao = this.competicoes.ativas.brasileirao;
          const times = [...competicao.times];
          const rodadas = [];
          
          // Sistema de rodadas duplas (ida e volta)
          for (let rodada = 1; rodada <= 38; rodada++) {
            const jogos = [];
            
            // Embaralhar times para cada rodada
            const timesEmbaralhados = [...times].sort(() => Math.random() - 0.5);
            
            for (let i = 0; i < 10; i++) {
              const time1 = timesEmbaralhados[i];
              const time2 = timesEmbaralhados[19 - i];
              
              if (time1 !== time2) {
                jogos.push({
                  casa: time1,
                  visitante: time2,
                  golsCasa: 0,
                  golsVisitante: 0,
                  realizado: false,
                  data: this.gerarDataJogo(rodada, 'brasileirao')
                });
              }
            }
            
            rodadas.push({
              numero: rodada,
              jogos: jogos
            });
          }
          
          competicao.rodadas = rodadas;
          competicao.fase = 'em andamento';
          
          // Inicializar classificação
          this.inicializarClassificacaoBrasileirao();
        }
        
        gerarRodadasEstadual() {
          const competicao = this.competicoes.ativas.estadual;
          const times = [...competicao.times];
          const rodadas = [];
          
          // Sistema de rodadas duplas (ida e volta)
          for (let rodada = 1; rodada <= 14; rodada++) {
            const jogos = [];
            
            // Embaralhar times para cada rodada
            const timesEmbaralhados = [...times].sort(() => Math.random() - 0.5);
            
            for (let i = 0; i < 7; i++) {
              const time1 = timesEmbaralhados[i];
              const time2 = timesEmbaralhados[14 - i];
              
              if (time1 !== time2) {
                jogos.push({
                  casa: time1,
                  visitante: time2,
                  golsCasa: 0,
                  golsVisitante: 0,
                  realizado: false,
                  data: this.gerarDataJogo(rodada, 'estadual')
                });
              }
            }
            
            rodadas.push({
              numero: rodada,
              jogos: jogos
            });
          }
          
          competicao.rodadas = rodadas;
          competicao.fase = 'primeira-fase';
          
          // Inicializar classificação
          this.inicializarClassificacaoEstadual();
        }
        
        gerarChaveamentoCopaBrasil() {
          const competicao = this.competicoes.ativas.copaBrasil;
          const times = [...competicao.times];
          
          // Embaralhar times
          const timesEmbaralhados = [...times].sort(() => Math.random() - 0.5);
          
          // Criar chaveamento (oitavas de final)
          const chaveamento = [];
          
          for (let i = 0; i < 16; i += 2) {
            const jogo = {
              id: i / 2 + 1,
              casa: timesEmbaralhados[i],
              visitante: timesEmbaralhados[i + 1],
              golsCasa: 0,
              golsVisitante: 0,
              golsCasaVolta: 0,
              golsVisitanteVolta: 0,
              realizado: false,
              dataIda: this.gerarDataJogo(i + 1, 'copa-brasil'),
              dataVolta: this.gerarDataJogo(i + 2, 'copa-brasil')
            };
            chaveamento.push(jogo);
          }
          
          competicao.chaveamento = chaveamento;
          competicao.fase = 'oitavas';
        }
        
        gerarGruposLibertadores() {
          const competicao = this.competicoes.ativas.libertadores;
          const grupos = [];
          
          // Embaralhar times
          const timesEmbaralhados = [...competicao.times].sort(() => Math.random() - 0.5);
          
          // Criar 8 grupos de 4 times
          for (let i = 0; i < 8; i++) {
            const grupo = {
              nome: `Grupo ${String.fromCharCode(65 + i)}`,
              times: timesEmbaralhados.slice(i * 4, (i + 1) * 4),
              classificacao: [],
              rodadas: []
            };
            
            // Gerar rodadas do grupo (6 rodadas - todos contra todos)
            for (let rodada = 0; rodada < 6; rodada++) {
              const jogos = [];
              const times = [...grupo.times];
              
              for (let j = 0; j < 2; j++) {
                const time1 = times.shift();
                const time2 = times.pop();
                jogos.push({
                  casa: time1,
                  visitante: time2,
                  golsCasa: 0,
                  golsVisitante: 0,
                  realizado: false,
                  data: this.gerarDataJogo(rodada + 1, 'libertadores')
                });
              }
              
              grupo.rodadas.push({
                numero: rodada + 1,
                jogos: jogos
              });
            }
            
            grupos.push(grupo);
          }
          
          competicao.grupos = grupos;
          competicao.fase = 'grupos';
        }
        
        // Gerar calendário anual com algoritmo aprimorado
        gerarCalendarioAnual() {
          const ano = 2025;
          const calendario = [];
          
          // Datas chave do calendário brasileiro
          const datasChave = {
            estadualInicio: new Date(ano, 0, 20),   // 20 de Janeiro
            libertadoresInicio: new Date(ano, 1, 5), // 5 de Fevereiro
            brasileiraoInicio: new Date(ano, 3, 10), // 10 de Abril
            copaBrasilInicio: new Date(ano, 3, 15), // 15 de Abril
            sulAmericanaInicio: new Date(ano, 2, 10), // 10 de Março
            mundialInicio: new Date(ano, 11, 10)     // 10 de Dezembro
          };
          
          // 1. ESTADUAIS (Janeiro-Março)
          const jogosEstadual = this.gerarJogosCompeticao('estadual', datasChave.estadualInicio, new Date(ano, 2, 31));
          calendario.push(...jogosEstadual);
          
          // 2. LIBERTADORES (Fevereiro-Novembro)
          const jogosLibertadores = this.gerarJogosCompeticao('libertadores', datasChave.libertadoresInicio, new Date(ano, 10, 30));
          calendario.push(...jogosLibertadores);
          
          // 3. BRASILEIRÃO (Abril-Novembro)
          const jogosBrasileirao = this.gerarJogosCompeticao('brasileirao', datasChave.brasileiraoInicio, new Date(ano, 10, 30));
          calendario.push(...jogosBrasileirao);
          
          // 4. COPA DO BRASIL (Abril-Novembro)
          const jogosCopaBrasil = this.gerarJogosCompeticao('copa-brasil', datasChave.copaBrasilInicio, new Date(ano, 10, 30));
          calendario.push(...jogosCopaBrasil);
          
          // 5. SUL-AMERICANA (Março-Novembro)
          const jogosSulAmericana = this.gerarJogosCompeticao('sul-americana', datasChave.sulAmericanaInicio, new Date(ano, 10, 30));
          calendario.push(...jogosSulAmericana);
          
          // 6. MUNDIAL (Dezembro)
          const jogosMundial = this.gerarJogosCompeticao('mundial', datasChave.mundialInicio, new Date(ano, 11, 31));
          calendario.push(...jogosMundial);
          
          // Algoritmo para evitar conflitos de datas
          const calendarioOrganizado = this.organizarCalendarioSemConflitos(calendario);
          
          this.competicoes.calendario = calendarioOrganizado;
          console.log('Calendário anual gerado com', calendarioOrganizado.length, 'jogos');
        }
        
        gerarJogosCompeticao(competicao, dataInicio, dataFim) {
          const jogos = [];
          const competicaoObj = this.competicoes.ativas[competicao];
          
          if (!competicaoObj) return jogos;
          
          let dataAtual = new Date(dataInicio);
          let rodadaAtual = 1;
          
          // Definir intervalo entre jogos baseado na competição
          const intervaloJogos = {
            'estadual': 7,      // 1 jogo por semana
            'brasileirao': 7,   // 1 jogo por semana
            'libertadores': 7,  // 1 jogo por semana
            'copa-brasil': 14,  // 1 jogo a cada 2 semanas
            'sul-americana': 7, // 1 jogo por semana
            'mundial': 3        // 1 jogo a cada 3 dias
          };
          
          const intervalo = intervaloJogos[competicao] || 7;
          
          while (dataAtual <= dataFim && rodadaAtual <= 50) { // Limite de segurança
            if (competicaoObj.rodadas && rodadaAtual <= competicaoObj.rodadas.length) {
              const rodada = competicaoObj.rodadas[rodadaAtual - 1];
              rodada.jogos.forEach(jogo => {
                jogos.push({
                  competicao: competicao,
                  rodada: rodadaAtual,
                  jogo: { ...jogo, data: new Date(dataAtual) },
                  data: new Date(dataAtual),
                  importancia: this.calcularImportanciaJogo(competicao)
                });
              });
            } else if (competicaoObj.grupos) {
              // Para competições com grupos (Libertadores, Sul-Americana)
              competicaoObj.grupos.forEach(grupo => {
                if (grupo.rodadas && rodadaAtual <= grupo.rodadas.length) {
                  const rodada = grupo.rodadas[rodadaAtual - 1];
                  rodada.jogos.forEach(jogo => {
                    jogos.push({
                      competicao: competicao,
                      grupo: grupo.nome,
                      rodada: rodadaAtual,
                      jogo: { ...jogo, data: new Date(dataAtual) },
                      data: new Date(dataAtual),
                      importancia: this.calcularImportanciaJogo(competicao)
                    });
                  });
                }
              });
            } else if (competicaoObj.chaveamento) {
              // Para competições mata-mata (Copa do Brasil)
              const jogoChaveamento = competicaoObj.chaveamento[rodadaAtual - 1];
              if (jogoChaveamento) {
                jogos.push({
                  competicao: competicao,
                  fase: competicaoObj.fase,
                  rodada: rodadaAtual,
                  jogo: { ...jogoChaveamento, data: new Date(dataAtual) },
                  data: new Date(dataAtual),
                  importancia: this.calcularImportanciaJogo(competicao)
                });
              }
            }
            
            // Avançar para próxima data
            dataAtual.setDate(dataAtual.getDate() + intervalo);
            rodadaAtual++;
          }
          
          return jogos;
        }
        
        organizarCalendarioSemConflitos(calendario) {
          // Ordenar por data
          const calendarioOrdenado = calendario.sort((a, b) => new Date(a.data) - new Date(b.data));
          
          // Agrupar jogos por data
          const jogosPorData = {};
          calendarioOrdenado.forEach(jogo => {
            const dataStr = jogo.data.toDateString();
            if (!jogosPorData[dataStr]) {
              jogosPorData[dataStr] = [];
            }
            jogosPorData[dataStr].push(jogo);
          });
          
          // Resolver conflitos (máximo 2 jogos por dia)
          const calendarioFinal = [];
          Object.keys(jogosPorData).forEach(dataStr => {
            const jogosDoDia = jogosPorData[dataStr];
            
            if (jogosDoDia.length <= 2) {
              // Sem conflito, adicionar todos
              calendarioFinal.push(...jogosDoDia);
            } else {
              // Conflito detectado, priorizar por importância
              const jogosPriorizados = jogosDoDia.sort((a, b) => b.importancia - a.importancia);
              calendarioFinal.push(...jogosPriorizados.slice(0, 2));
              
              // Remarcar jogos restantes para próximos dias
              jogosPriorizados.slice(2).forEach((jogo, index) => {
                const novaData = new Date(jogo.data);
                novaData.setDate(novaData.getDate() + index + 1);
                jogo.data = novaData;
                calendarioFinal.push(jogo);
              });
            }
          });
          
          return calendarioFinal.sort((a, b) => new Date(a.data) - new Date(b.data));
        }
        
        calcularImportanciaJogo(competicao) {
          const importancia = {
            'estadual': 1.0,
            'brasileirao': 1.3,
            'copa-brasil': 1.5,
            'sul-americana': 1.4,
            'libertadores': 1.7,
            'mundial': 2.0
          };
          
          return importancia[competicao] || 1.0;
        }
        
        // Sistema de Classificação Continental
        getClassificadosLibertadores() {
          const classificados = [];
          
          // Top 4 do Brasileirão
          const brasileirao = this.competicoes.ativas.brasileirao;
          if (brasileirao && brasileirao.classificacao) {
            const top4Brasileirao = brasileirao.classificacao
              .sort((a, b) => b.pontos - a.pontos || b.saldoGols - a.saldoGols)
              .slice(0, 4)
              .map(time => time.time);
            classificados.push(...top4Brasileirao);
          }
          
          // Campeão da Copa do Brasil
          const copaBrasil = this.competicoes.ativas.copaBrasil;
          if (copaBrasil && copaBrasil.campeao) {
            classificados.push(copaBrasil.campeao);
          }
          
          // Campeões estaduais (simulado)
          const campeoesEstaduais = [
            'Cruzeiro', 'Atlético-MG', 'Palmeiras', 'Flamengo'
          ];
          classificados.push(...campeoesEstaduais);
          
          // Limitar a 8 vagas e remover duplicatas
          return [...new Set(classificados)].slice(0, 8);
        }
        
        getClassificadosSulAmericana() {
          const classificados = [];
          
          // Times que não se classificaram para Libertadores
          const brasileirao = this.competicoes.ativas.brasileirao;
          if (brasileirao && brasileirao.classificacao) {
            const posicoes5a8 = brasileirao.classificacao
              .sort((a, b) => b.pontos - a.pontos || b.saldoGols - a.saldoGols)
              .slice(4, 8)
              .map(time => time.time);
            classificados.push(...posicoes5a8);
          }
          
          // Vice-campeões estaduais
          const viceCampeoesEstaduais = [
            'América-MG', 'Tombense', 'Villa Nova', 'Uberlândia'
          ];
          classificados.push(...viceCampeoesEstaduais);
          
          // Limitar a 4 vagas brasileiras
          return [...new Set(classificados)].slice(0, 4);
        }
        
        atualizarClassificacaoContinental() {
          console.log('Atualizando classificação continental...');
          
          // Atualizar Libertadores
          const libertadores = this.competicoes.ativas.libertadores;
          if (libertadores) {
            const classificados = this.getClassificadosLibertadores();
            console.log('Classificados para Libertadores:', classificados);
            
            // Atualizar times da Libertadores com os classificados
            libertadores.times = [...classificados, ...libertadores.times.slice(8)];
            this.gerarGruposLibertadores(); // Regenerar grupos
          }
          
          // Atualizar Sul-Americana
          const sulAmericana = this.competicoes.ativas.sulAmericana;
          if (sulAmericana) {
            const classificados = this.getClassificadosSulAmericana();
            console.log('Classificados para Sul-Americana:', classificados);
            
            // Atualizar times da Sul-Americana com os classificados
            sulAmericana.times = [...classificados, ...sulAmericana.times.slice(4)];
            this.gerarGruposSulAmericana(); // Regenerar grupos
          }
        }
        
        gerarJogosMes(competicao, mes) {
          const jogos = [];
          const competicaoObj = this.competicoes.ativas[competicao];
          
          if (!competicaoObj) return jogos;
          
          // Gerar datas para o mês
          const diasPorMes = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
          const diasMes = diasPorMes[mes - 1];
          
          // Distribuir jogos ao longo do mês (máximo 2 por semana)
          for (let dia = 1; dia <= diasMes; dia += 3) {
            const data = new Date(2025, mes - 1, dia);
            
            // Adicionar jogos da competição
            if (competicaoObj.rodadas) {
              // Para competições de pontos corridos
              const rodadaAtual = Math.floor((mes - 1) * 3) + Math.floor(dia / 10);
              if (rodadaAtual < competicaoObj.rodadas.length) {
                const rodada = competicaoObj.rodadas[rodadaAtual];
                rodada.jogos.forEach(jogo => {
                  jogos.push({
                    competicao: competicao,
                    rodada: rodadaAtual + 1,
                    jogo: jogo,
                    data: data
                  });
                });
              }
            }
          }
          
          return jogos;
        }
        
        gerarDataJogo(rodada, competicao) {
          const data = new Date(2025, 0, 1); // 1º de janeiro de 2025
          
          // Adicionar dias baseado na rodada e competição
          let diasAdicionais = 0;
          
          switch (competicao) {
            case 'estadual':
              diasAdicionais = (rodada - 1) * 7; // 1 jogo por semana
              break;
            case 'brasileirao':
              diasAdicionais = (rodada - 1) * 7; // 1 jogo por semana
              data.setMonth(3); // Começa em abril
              break;
            case 'copa-brasil':
              diasAdicionais = (rodada - 1) * 14; // 1 jogo a cada 2 semanas
              data.setMonth(3); // Começa em abril
              break;
            case 'libertadores':
              diasAdicionais = (rodada - 1) * 7; // 1 jogo por semana
              data.setMonth(1); // Começa em fevereiro
              break;
            case 'sul-americana':
              diasAdicionais = (rodada - 1) * 7; // 1 jogo por semana
              data.setMonth(2); // Começa em março
              break;
          }
          
          data.setDate(data.getDate() + diasAdicionais);
          return data;
        }
        
        // Inicializar classificações
        inicializarClassificacaoBrasileirao() {
          const competicao = this.competicoes.ativas.brasileirao;
          competicao.classificacao = competicao.times.map(time => ({
            time: time,
            pontos: 0,
            jogos: 0,
            vitorias: 0,
            empates: 0,
            derrotas: 0,
            golsPro: 0,
            golsContra: 0,
            saldoGols: 0
          }));
        }
        
        inicializarClassificacaoEstadual() {
          const competicao = this.competicoes.ativas.estadual;
          competicao.classificacao = competicao.times.map(time => ({
            time: time,
            jogos: 0,
            pontos: 0,
            vitorias: 0,
            empates: 0,
            derrotas: 0,
            golsPro: 0,
            golsContra: 0,
            saldoGols: 0
          }));
        }
        
        // Métodos para filtros do mercado
        aplicarFiltrosMercado() {
          const tipo = document.getElementById('filtro-tipo').value;
          const posicao = document.getElementById('filtro-posicao').value;
          const idade = document.getElementById('filtro-idade').value;
          const preco = document.getElementById('filtro-preco').value;
          
          let jogadoresFiltrados = this.mercado;
          
          // Filtro por tipo
          if (tipo) {
            switch (tipo) {
              case 'estrela':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.habilidade >= 85);
                break;
              case 'promessa':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.idade <= 22 && j.habilidade >= 70);
                break;
              case 'experiente':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.idade >= 28);
                break;
              case 'jovem':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.idade <= 25);
                break;
            }
          }
          
          // Filtro por posição
          if (posicao) {
            jogadoresFiltrados = jogadoresFiltrados.filter(j => j.posicao === posicao);
          }
          
          // Filtro por idade
          if (idade) {
            switch (idade) {
              case '18-22':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.idade >= 18 && j.idade <= 22);
                break;
              case '23-27':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.idade >= 23 && j.idade <= 27);
                break;
              case '28-32':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.idade >= 28 && j.idade <= 32);
                break;
              case '33+':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.idade >= 33);
                break;
            }
          }
          
          // Filtro por preço
          if (preco) {
            switch (preco) {
              case '0-10M':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.valor <= 10000000);
                break;
              case '10M-30M':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.valor > 10000000 && j.valor <= 30000000);
                break;
              case '30M-50M':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.valor > 30000000 && j.valor <= 50000000);
                break;
              case '50M+':
                jogadoresFiltrados = jogadoresFiltrados.filter(j => j.valor > 50000000);
                break;
            }
          }
          
          // Renderizar jogadores filtrados
          this.renderizarMercado(jogadoresFiltrados);
        }
        
        // Atualizar orçamento disponível
        atualizarOrcamentoDisponivel() {
          const orcamentoElement = document.getElementById('orcamento-disponivel');
          if (orcamentoElement && this.clubeSelecionado) {
            orcamentoElement.textContent = formatarMoeda(this.clubeSelecionado.orcamento);
          }
        }
        
        // Diminuir orçamento ao contratar
        diminuirOrcamento(valor) {
          if (this.clubeSelecionado) {
            this.clubeSelecionado.orcamento -= valor;
            this.atualizarOrcamentoDisponivel();
            this.atualizarOrcamentoERiqueza();
          }
        }
        
        // Sistema de Imprensa
        gerarNoticiasImprensa() {
          const container = document.getElementById('imprensa-noticias');
          if (!container) return;
          
          const noticias = [
            {
              titulo: "Cruzeiro anuncia contratação de novo atacante",
              fonte: "ESPN Brasil",
              data: "Hoje",
              conteudo: "O Cruzeiro confirmou a contratação de um novo atacante para reforçar o ataque na próxima temporada.",
              tipo: "contratacao"
            },
            {
              titulo: "Diretoria do Cruzeiro planeja investimentos no mercado",
              fonte: "Globo Esporte",
              data: "Ontem",
              conteudo: "A diretoria do Cruzeiro anunciou que planeja investir pesado no mercado de transferências.",
              tipo: "financeiro"
            },
            {
              titulo: "Cruzeiro vence clássico e sobe na tabela",
              fonte: "UOL Esporte",
              data: "2 dias atrás",
              conteudo: "O Cruzeiro venceu o clássico e subiu posições na tabela do Brasileirão.",
              tipo: "resultado"
            },
            {
              titulo: "Torcida do Cruzeiro lota estádio em jogo decisivo",
              fonte: "R7 Esporte",
              data: "3 dias atrás",
              conteudo: "A torcida do Cruzeiro lotou o estádio em jogo decisivo pela Libertadores.",
              tipo: "torcida"
            }
          ];
          
          container.innerHTML = noticias.map(noticia => `
            <div class="noticia-item ${noticia.tipo}">
              <div class="noticia-header">
                <h4>${noticia.titulo}</h4>
                <div class="noticia-meta">
                  <span class="fonte">${noticia.fonte}</span>
                  <span class="data">${noticia.data}</span>
                </div>
              </div>
              <p>${noticia.conteudo}</p>
            </div>
          `).join('');
        }
        
        // Sistema de Opinião da Torcida
        gerarOpiniaoTorcida() {
          const container = document.getElementById('torcida-opiniao');
          if (!container) return;
          
          const opinioes = [
            {
              tipo: "positiva",
              titulo: "🎉 Torcida Satisfeita",
              conteudo: "A torcida está muito satisfeita com as recentes contratações e resultados do time. O clima é de otimismo para a temporada."
            },
            {
              tipo: "neutra",
              titulo: "🤔 Torcida Cautelosa",
              conteudo: "A torcida está cautelosa com as próximas decisões da diretoria. Aguarda mais investimentos no elenco."
            },
            {
              tipo: "negativa",
              titulo: "😤 Torcida Insatisfeita",
              conteudo: "A torcida está insatisfeita com os recentes resultados e pede mais investimentos no mercado."
            }
          ];
          
          // Escolher opinião baseada no desempenho (simulado)
          const opiniao = opinioes[Math.floor(Math.random() * opinioes.length)];
          
          container.innerHTML = `
            <div class="opiniao-torcida ${opiniao.tipo}">
              <h4>${opiniao.titulo}</h4>
              <p>${opiniao.conteudo}</p>
              <div class="torcida-stats">
                <div class="stat-item">
                  <span class="stat-label">Apoio:</span>
                  <span class="stat-value">${Math.floor(Math.random() * 30) + 70}%</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Expectativa:</span>
                  <span class="stat-value">${Math.floor(Math.random() * 40) + 60}%</span>
                </div>
              </div>
            </div>
          `;
        }
        
        // Métodos financeiros
        atualizarFinancas() {
          console.log('Atualizando finanças...');
          
          if (this.clubeAtual) {
            // Atualizar orçamento atual
            const orcamentoElement = document.getElementById('orcamento-atual');
            if (orcamentoElement) {
              orcamentoElement.textContent = formatarMoeda(this.clubeAtual.orcamento);
            }
            
            // Atualizar folha salarial (estimativa baseada no orçamento)
            const folhaElement = document.getElementById('folha-salarial');
            if (folhaElement) {
              const folhaSalarial = Math.floor(this.clubeAtual.orcamento * 0.4); // 40% do orçamento
              folhaElement.textContent = formatarMoeda(folhaSalarial);
            }
            
            // Atualizar próximos vencimentos
            const vencimentosElement = document.getElementById('proximos-vencimentos');
            if (vencimentosElement) {
              const proximosVencimentos = Math.floor(this.clubeAtual.orcamento * 0.1); // 10% do orçamento
              vencimentosElement.textContent = formatarMoeda(proximosVencimentos);
            }
          }
        }

        atualizarMercado() {
          console.log('Atualizando mercado...');
          
          // Jogadores reais famosos para o mercado
          const jogadoresReais = [
            // Goleiros
            { id: 101, nome: "Alisson", posicao: "Goleiro", idade: 31, habilidade: 89, valor: 45000000, salario: 120000, moral: 85, clube: "Liverpool", nacionalidade: "Brasil" },
            { id: 102, nome: "Ederson", posicao: "Goleiro", idade: 30, habilidade: 88, valor: 40000000, salario: 110000, moral: 83, clube: "Manchester City", nacionalidade: "Brasil" },
            { id: 103, nome: "Emiliano Martínez", posicao: "Goleiro", idade: 31, habilidade: 85, valor: 35000000, salario: 95000, moral: 80, clube: "Aston Villa", nacionalidade: "Argentina" },
            
            // Laterais
            { id: 104, nome: "João Cancelo", posicao: "Lateral Direito", idade: 29, habilidade: 86, valor: 50000000, salario: 130000, moral: 82, clube: "Barcelona", nacionalidade: "Portugal" },
            { id: 105, nome: "Alphonso Davies", posicao: "Lateral Esquerdo", idade: 23, habilidade: 84, valor: 55000000, salario: 100000, moral: 88, clube: "Bayern Munich", nacionalidade: "Canadá" },
            { id: 106, nome: "Reece James", posicao: "Lateral Direito", idade: 24, habilidade: 83, valor: 48000000, salario: 110000, moral: 85, clube: "Chelsea", nacionalidade: "Inglaterra" },
            
            // Zagueiros
            { id: 107, nome: "Virgil van Dijk", posicao: "Zagueiro", idade: 32, habilidade: 89, valor: 60000000, salario: 150000, moral: 87, clube: "Liverpool", nacionalidade: "Holanda" },
            { id: 108, nome: "Rúben Dias", posicao: "Zagueiro", idade: 26, habilidade: 87, valor: 65000000, salario: 140000, moral: 86, clube: "Manchester City", nacionalidade: "Portugal" },
            { id: 109, nome: "Antonio Rüdiger", posicao: "Zagueiro", idade: 30, habilidade: 85, valor: 45000000, salario: 120000, moral: 84, clube: "Real Madrid", nacionalidade: "Alemanha" },
            { id: 110, nome: "Matthijs de Ligt", posicao: "Zagueiro", idade: 24, habilidade: 84, valor: 52000000, salario: 110000, moral: 83, clube: "Bayern Munich", nacionalidade: "Holanda" },
            
            // Meias
            { id: 111, nome: "Kevin De Bruyne", posicao: "Meia", idade: 32, habilidade: 91, valor: 70000000, salario: 180000, moral: 89, clube: "Manchester City", nacionalidade: "Bélgica" },
            { id: 112, nome: "Jude Bellingham", posicao: "Meia", idade: 20, habilidade: 88, valor: 80000000, salario: 160000, moral: 90, clube: "Real Madrid", nacionalidade: "Inglaterra" },
            { id: 113, nome: "Bruno Fernandes", posicao: "Meia", idade: 29, habilidade: 86, valor: 55000000, salario: 140000, moral: 85, clube: "Manchester United", nacionalidade: "Portugal" },
            { id: 114, nome: "Federico Valverde", posicao: "Meia", idade: 25, habilidade: 85, valor: 58000000, salario: 130000, moral: 87, clube: "Real Madrid", nacionalidade: "Uruguai" },
            { id: 115, nome: "Phil Foden", posicao: "Meia", idade: 23, habilidade: 84, valor: 60000000, salario: 120000, moral: 88, clube: "Manchester City", nacionalidade: "Inglaterra" },
            
            // Atacantes
            { id: 116, nome: "Erling Haaland", posicao: "Atacante", idade: 23, habilidade: 91, valor: 90000000, salario: 200000, moral: 92, clube: "Manchester City", nacionalidade: "Noruega" },
            { id: 117, nome: "Kylian Mbappé", posicao: "Atacante", idade: 25, habilidade: 92, valor: 100000000, salario: 220000, moral: 90, clube: "PSG", nacionalidade: "França" },
            { id: 118, nome: "Vinicius Jr", posicao: "Atacante", idade: 23, habilidade: 88, valor: 75000000, salario: 160000, moral: 89, clube: "Real Madrid", nacionalidade: "Brasil" },
            { id: 119, nome: "Bukayo Saka", posicao: "Atacante", idade: 22, habilidade: 85, valor: 65000000, salario: 130000, moral: 87, clube: "Arsenal", nacionalidade: "Inglaterra" },
            { id: 120, nome: "Victor Osimhen", posicao: "Atacante", idade: 25, habilidade: 86, valor: 70000000, salario: 150000, moral: 85, clube: "Napoli", nacionalidade: "Nigéria" }
          ];
          
          // Misturar jogadores reais com aleatórios
          const jogadoresAleatorios = this.gerarJogadoresAleatorios(10);
          this.mercado = [...jogadoresReais, ...jogadoresAleatorios];
          
          // Renderizar mercado
          this.renderizarMercado(this.mercado);
          
          // Atualizar orçamento disponível
          this.atualizarOrcamentoDisponivel();
        }
        
        gerarJogadoresAleatorios(quantidade) {
          const jogadores = [];
          const posicoes = ['Goleiro', 'Lateral Direito', 'Lateral Esquerdo', 'Zagueiro', 'Volante', 'Meia', 'Atacante'];
          const nomes = [
            'João Silva', 'Pedro Santos', 'Carlos Oliveira', 'Lucas Costa', 'Gabriel Lima',
            'Rafael Pereira', 'Bruno Almeida', 'Thiago Rodrigues', 'Felipe Souza', 'André Ferreira',
            'Marcos Silva', 'Ricardo Santos', 'Daniel Costa', 'Roberto Lima', 'Eduardo Pereira',
            'Fernando Almeida', 'Alexandre Rodrigues', 'Leonardo Souza', 'Matheus Ferreira', 'Diego Silva',
            'Rodrigo Santos', 'Paulo Costa', 'Marcelo Lima', 'Julio Pereira', 'Antonio Almeida',
            'Francisco Rodrigues', 'Manuel Souza', 'Jose Ferreira', 'Miguel Silva', 'David Santos'
          ];
          const clubes = [
            'Flamengo', 'Palmeiras', 'São Paulo', 'Santos', 'Corinthians', 'Grêmio', 'Internacional',
            'Athletico-PR', 'Vasco', 'Botafogo', 'Fortaleza', 'Ceará', 'Bahia', 'Vitória', 'Sport',
            'Náutico', 'Santa Cruz', 'Salvador', 'Recife', 'Olinda', 'Cruzeiro', 'Atlético-MG'
          ];
          const nacionalidades = ['Brasil', 'Argentina', 'Uruguai', 'Colômbia', 'Chile', 'Paraguai', 'Peru'];
          
          for (let i = 0; i < quantidade; i++) {
            const posicao = posicoes[Math.floor(Math.random() * posicoes.length)];
            const idade = Math.floor(Math.random() * 15) + 18; // 18-32 anos
            const habilidade = Math.floor(Math.random() * 30) + 60; // 60-89 habilidade
            const valor = Math.floor(Math.random() * 50000000) + 1000000; // 1M-50M
            const salario = Math.floor(valor * 0.01); // 1% do valor como salário
            
            jogadores.push({
              id: 1000 + i,
              nome: nomes[Math.floor(Math.random() * nomes.length)],
              posicao: posicao,
              idade: idade,
              habilidade: habilidade,
              valor: valor,
              salario: salario,
              clube: clubes[Math.floor(Math.random() * clubes.length)],
              nacionalidade: nacionalidades[Math.floor(Math.random() * nacionalidades.length)],
              status: 'Disponível',
              moral: Math.floor(Math.random() * 20) + 70, // 70-89 moral
              // Sistema de contratos
              contrato: {
                inicio: new Date(2024, 0, 1),
                fim: new Date(2027, 11, 31), // 4 anos de contrato
                salario: salario,
                multaRescisoria: Math.floor(valor * 0.2), // 20% do valor
                clausulaLiberacao: Math.floor(valor * 1.5) // 150% do valor
              },
              // Sistema de negociações
              negociacoes: [],
              propostasRecebidas: [],
              // Sistema de personalidade
              personalidade: {
                ambicao: Math.floor(Math.random() * 100),
                lealdade: Math.floor(Math.random() * 100),
                profissionalismo: Math.floor(Math.random() * 100),
                preferenciaLocal: Math.random() > 0.5 ? 'local' : 'internacional'
              }
            });
          }
          
          return jogadores;
        }

        renderizarMercado(jogadores) {
          const container = document.querySelector('#mercado-lista') || document.querySelector('.mercado-lista') || document.getElementById('mercado-container');
          if (!container) {
            console.error('Container do mercado não encontrado');
            return;
          }
          
          container.innerHTML = '';
          
          jogadores.forEach((jogador, index) => {
            const jogadorElement = document.createElement('div');
            jogadorElement.className = 'jogador-card';
            jogadorElement.innerHTML = `
              <div class="card-header">
                <div class="card-number">${jogador.id}</div>
                <div class="card-position">${jogador.posicao}</div>
              </div>
              
              <div class="card-photo">
                <div class="player-avatar">👤</div>
                <div class="player-rating">${jogador.habilidade}</div>
              </div>
              
              <div class="card-name">${jogador.nome}</div>
              
              <div class="card-stats">
                <div class="stat-item">
                  <span class="stat-label">Idade</span>
                  <span class="stat-value">${jogador.idade}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Moral</span>
                  <span class="stat-value">${jogador.moral}</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Valor</span>
                  <span class="stat-value">${formatarMoeda(jogador.valor)}</span>
                </div>
              </div>
              
              <div class="card-club">
                <span class="club-name">${jogador.clube}</span>
                <span class="nationality">${jogador.nacionalidade}</span>
              </div>
              
              <div class="card-actions">
                <button onclick="window.gameController.contratarJogador(${jogador.id})" class="btn-card-action contratar">
                  💰 Contratar
                </button>
                <button onclick="window.gameController.verDetalhesJogador(${jogador.id})" class="btn-card-action detalhes">
                  📊 Detalhes
                </button>
              </div>
            `;
            container.appendChild(jogadorElement);
          });
        }

        // Métodos de tática
        carregarTatica() {
          console.log('Carregando tática...');
          this.renderizarCampinho();
        }

        limparTatica() {
          console.log('Limpando tática...');
          this.renderizarCampinho();
        }

        // Métodos de criação de times (com personalização)
        criarTimeGenerico() {
          console.log('Abrindo modal para criar time genérico personalizado...');
          const overlay = document.createElement('div');
          overlay.className = 'tabela-overlay';
          overlay.innerHTML = `
            <div class="tabela-container">
              <div class="tabela-header">
                <h2>⚙️ Criar Time Genérico</h2>
                <button class="btn-fechar" onclick="this.parentElement.parentElement.parentElement.remove()">✕</button>
              </div>
              <div class="tabela-content">
                <div class="form-grid">
                  <label>Nome do Time<input id="gen-nome" type="text" placeholder="Ex: União Lavras" /></label>
                  <label>Apelido<input id="gen-apelido" type="text" placeholder="Ex: Tricolor do Sul de Minas" /></label>
                  <label>Cidade<input id="gen-cidade" type="text" placeholder="Ex: Lavras" /></label>
                  <label>Estado (UF)<input id="gen-estado" type="text" maxlength="2" placeholder="MG" /></label>
                  <label>Riqueza
                    <select id="gen-riqueza">
                      <option value="baixa">baixa</option>
                      <option value="media">média</option>
                      <option value="alta">alta</option>
                    </select>
                  </label>
                  <label>Orçamento (R$)
                    <input id="gen-orcamento" type="number" min="1000000" step="100000" placeholder="10000000" />
                  </label>
                  <label>Cor Primária<input id="gen-cor1" type="color" value="#0066cc" /></label>
                  <label>Cor Secundária<input id="gen-cor2" type="color" value="#ffffff" /></label>
                </div>
                <div style="margin-top:16px;display:flex;gap:8px;justify-content:flex-end;">
                  <button class="btn-simular" id="btn-criar-conf">Criar</button>
                </div>
              </div>
            </div>`;
          document.body.appendChild(overlay);
          document.getElementById('btn-criar-conf').onclick = () => this.confirmarCriacaoTimeGenerico(overlay);
        }

        confirmarCriacaoTimeGenerico(overlay) {
          const nome = (document.getElementById('gen-nome').value || 'Time Genérico').trim();
          const apelido = (document.getElementById('gen-apelido').value || 'Genérico').trim();
          const cidade = (document.getElementById('gen-cidade').value || 'Cidade').trim();
          const estado = (document.getElementById('gen-estado').value || 'BR').toUpperCase();
          const riqueza = document.getElementById('gen-riqueza').value || 'baixa';
          const orcamento = parseInt(document.getElementById('gen-orcamento').value || '12000000', 10);
          const cor1 = document.getElementById('gen-cor1').value || '#0066CC';
          const cor2 = document.getElementById('gen-cor2').value || '#FFFFFF';

          const timeGenerico = {
            id: Math.floor(Math.random() * 1000) + 2000,
            nome,
            apelido,
            cidade,
            estado,
            tipo: 'Clube Genérico',
            riqueza,
            orcamento,
            folha_salarial: Math.floor(orcamento * 0.08),
            estadio: 'Estádio Municipal',
            capacidade: 15000 + Math.floor(Math.random() * 20000),
            ano_fundacao: 1970 + Math.floor(Math.random() * 50),
            cores: ['Primária', 'Secundária'],
            cores_hex: [cor1, cor2],
            cor_primaria: cor1,
            cor_secundaria: cor2,
            cor_accent: '#FFD700',
            rival: 'Time Local',
            torcida: riqueza === 'alta' ? 'Grande' : riqueza === 'media' ? 'Média' : 'Pequena'
          };

          this.clubeAtual = timeGenerico;
          localStorage.setItem('jogoIniciado', 'true');
          localStorage.setItem('timeEscolhido', timeGenerico.nome);

          this.aplicarCoresDoTime(timeGenerico);
          this.atualizarNomeDoTime(timeGenerico.nome);
          this.atualizarOrcamentoERiqueza(timeGenerico);

          if (overlay && overlay.parentElement) overlay.remove();

          document.getElementById('tela-time').classList.add('hidden');
          const jogoPrincipal = document.getElementById('jogo-principal');
          if (jogoPrincipal) {
            jogoPrincipal.classList.remove('hidden');
            alert(`Time "${timeGenerico.nome}" criado com sucesso!`);
          }
        }

        mostrarAba(aba) {
          console.log("Mostrando aba:", aba);

          // Ocultar todas as abas
          const abas = document.querySelectorAll(".tab-panel");
          abas.forEach((tab) => tab.classList.remove("active"));

          // Mostrar aba selecionada
          const abaSelecionada = document.getElementById(`${aba}-tab`);
          if (abaSelecionada) {
            abaSelecionada.classList.add("active");

            // Carregar dados específicos da aba usando GameController
            if (window.gameController) {
              switch (aba) {
                case "elenco":
                  window.gameController.atualizarElenco();
                  break;
                case "dono":
                  window.gameController.atualizarDono();
                  break;
                case "colaboradores":
                  window.gameController.atualizarColaboradores();
                  break;
                case "escalacao":
                  window.gameController.atualizarEscalacao();
                  break;
                case "financeiro":
                  window.gameController.atualizarFinancas();
                  break;
                case "mercado":
                  window.gameController.atualizarMercado();
                  break;
                case "estadio":
                  // Aba estádio já está implementada
                  break;
                case "sala-negocios":
                  // Aba sala de negócios já está implementada
                  break;
                case "social":
                  window.gameController.gerarNoticiasImprensa();
                  window.gameController.gerarOpiniaoTorcida();
                  break;
                            case "competicoes":
              window.gameController.carregarCompeticoes();
              break;
                case "titulos":
                  // Implementar quando necessário
                  break;
                case "simulacao":
                  // Implementar quando necessário
                  break;
              }
            }
          } else {
            console.log('Aba não encontrada:', aba + "-tab");
          }
        }

        // Métodos adicionais para completar funcionalidades
        atualizarElenco() {
          console.log('Atualizando elenco...');
          
          // Gerar jogadores aleatórios para o elenco se não existir
          if (!this.elenco || this.elenco.length === 0) {
            this.elenco = this.gerarJogadoresAleatorios(25);
          }
          
          // Renderizar elenco na interface
          this.renderizarElenco(this.elenco);
          
          // Atualizar estatísticas do elenco
          this.atualizarEstatisticasElenco(this.elenco);
          
          // Atualizar lista de jogadores na aba de táticas
          this.atualizarListaJogadoresTaticas();
          
          // Atualizar orçamento disponível
          this.atualizarOrcamentoDisponivel();
        }

        renderizarElenco(elenco) {
          const container = document.querySelector('#squad-table-body') || document.querySelector('.elenco-lista') || document.getElementById('elenco-container');
          if (!container) {
            console.error('Container do elenco não encontrado');
            return;
          }
          
          container.innerHTML = '';
          
          elenco.forEach((jogador, index) => {
            const jogadorElement = document.createElement('tr');
            jogadorElement.className = 'jogador-row';
            jogadorElement.innerHTML = `
              <td>${index + 1}</td>
              <td>${jogador.nome}</td>
              <td>${jogador.posicao}</td>
              <td>${jogador.idade}</td>
              <td>${jogador.habilidade}</td>
              <td>${formatarMoeda(jogador.valor)}</td>
              <td>${formatarMoeda(jogador.salario)}</td>
              <td>${jogador.moral}</td>
              <td>${jogador.status}</td>
              <td>
                <button onclick="window.gameController.verDetalhesJogador(${jogador.id})" class="btn-detalhes">Detalhes</button>
              </td>
            `;
            container.appendChild(jogadorElement);
          });
        }

        atualizarEstatisticasElenco(elenco) {
          const totalJogadores = elenco.length;
          const folhaSalarial = elenco.reduce((total, jogador) => total + jogador.salario, 0);
          const idadeMedia = Math.round(elenco.reduce((total, jogador) => total + jogador.idade, 0) / totalJogadores * 10) / 10;
          const habilidadeMedia = Math.round(elenco.reduce((total, jogador) => total + jogador.habilidade, 0) / totalJogadores * 10) / 10;
          
          // Atualizar cards de estatísticas
          const elementos = {
            'total-jogadores': `${totalJogadores} Jogadores`,
            'folha-salarial': `R$ ${Math.floor(folhaSalarial / 1000000)}M Folha Salarial`,
            'idade-media': `${idadeMedia} Idade Média`,
            'habilidade-media': `${habilidadeMedia} Habilidade Média`
          };
          
          Object.keys(elementos).forEach(id => {
            const elemento = document.getElementById(id);
            if (elemento) {
              elemento.textContent = elementos[id];
            }
          });
        }

        atualizarDono() {
          console.log('Atualizando informações do dono...');
          // Implementação básica
        }

        atualizarColaboradores() {
          console.log('Atualizando colaboradores...');
          // Implementação básica
        }

        salvarJogo() {
          console.log('Salvando jogo...');
          const dadosJogo = {
            clubeAtual: this.clubeAtual,
            dataSalvamento: new Date().toISOString(),
            jogoIniciado: true
          };
          localStorage.setItem('dadosJogo', JSON.stringify(dadosJogo));
          alert('Jogo salvo com sucesso!');
        }

        testeController() {
          console.log('Teste do controller funcionando!');
          alert('GameController funcionando perfeitamente!');
        }

        carregarJogo() {
          console.log('Carregando jogo...');
          
          try {
            const dadosSalvos = localStorage.getItem('dadosJogo');
            if (dadosSalvos) {
              const jogo = JSON.parse(dadosSalvos);
              
              if (jogo.clubeAtual) {
                this.clubeAtual = jogo.clubeAtual;
                
                // Aplicar dados do clube
                this.aplicarCoresDoTime(jogo.clubeAtual);
                this.atualizarNomeDoTime(jogo.clubeAtual.nome);
                this.atualizarOrcamentoERiqueza(jogo.clubeAtual);
                
                // Mostrar tela de jogo
                document.getElementById("tela-time").classList.add("hidden");
                document.getElementById("tela-titulo").classList.add("hidden");
                document.getElementById("jogo-principal").classList.remove("hidden");
                
                alert(`Jogo carregado! Time: ${jogo.clubeAtual.nome}`);
              } else {
                alert('Nenhum time encontrado no jogo salvo');
              }
            } else {
              alert('Nenhum jogo salvo encontrado');
            }
          } catch (error) {
            console.error('Erro ao carregar jogo:', error);
            alert('Erro ao carregar jogo. Tente novamente.');
          }
        }

        // Removido: todas as funções locais agora são tratadas pelo GameController e GameView

        setFormacao(formacao) {
          this.formacao = formacao;
          this.renderizarCampinho();
          console.log(`Formação alterada para: ${formacao}`);
        }

        setMentalidade(mentalidade) {
          this.mentalidade = mentalidade;
          console.log(`Mentalidade alterada para: ${mentalidade}`);
        }

        setEstiloJogo(estilo) {
          this.estiloJogo = estilo;
          console.log(`Estilo de jogo alterado para: ${estilo}`);
        }

        salvarTatica() {
          const tatica = {
            formacao: this.formacao,
            mentalidade: this.mentalidade,
            estiloJogo: this.estiloJogo,
            instrucoes: this.getInstrucoesAtivas(),
            data: new Date().toISOString(),
          };

          localStorage.setItem("taticaSalva", JSON.stringify(tatica));
          alert("Tática salva com sucesso!");
        }

        carregarTatica() {
          const taticaSalva = localStorage.getItem("taticaSalva");
          if (taticaSalva) {
            const tatica = JSON.parse(taticaSalva);
            this.formacao = tatica.formacao;
            this.mentalidade = tatica.mentalidade;
            this.estiloJogo = tatica.estiloJogo;

            // Atualizar interface
            document.getElementById("formacao-tatica").value = this.formacao;
            document.getElementById("mentalidade").value = this.mentalidade;
            document.getElementById("estilo-jogo").value = this.estiloJogo;

            this.renderizarCampinho();
            alert("Tática carregada com sucesso!");
          } else {
            alert("Nenhuma tática salva encontrada.");
          }
        }

        getInstrucoesAtivas() {
          const instrucoes = {};
          const checkboxes = document.querySelectorAll(
            '.instruction-group input[type="checkbox"]'
          );
          checkboxes.forEach((checkbox) => {
            instrucoes[checkbox.id] = checkbox.checked;
          });
          return instrucoes;
        }

        limparTatica() {
          if (confirm("Tem certeza que deseja limpar a tática atual?")) {
            this.formacao = "4-4-2";
            this.mentalidade = "positiva";
            this.estiloJogo = "gegenpress";

            // Limpar checkboxes
            document
              .querySelectorAll('.instruction-group input[type="checkbox"]')
              .forEach((cb) => (cb.checked = false));

            // Atualizar interface
            document.getElementById("formacao-tatica").value = this.formacao;
            document.getElementById("mentalidade").value = this.mentalidade;
            document.getElementById("estilo-jogo").value = this.estiloJogo;

            this.renderizarCampinho();
            alert("Tática limpa com sucesso!");
          }
        }

        carregarFinanceiro() {
          if (!this.clubeAtual) return;

          document.getElementById("orcamento-atual").textContent =
            formatarMoeda(this.clubeAtual.orcamento);
          document.getElementById("folha-salarial").textContent = formatarMoeda(
            this.clubeAtual.folha_salarial
          );
          document.getElementById("proximos-vencimentos").textContent =
            formatarMoeda(this.clubeAtual.folha_salarial);
        }

        carregarDono() {
          if (!this.clubeAtual || !this.clubeAtual.dono) return;

          const container = document.getElementById("dono-container");
          if (!container) return;

          const dono = this.clubeAtual.dono;
          container.innerHTML = `
                    <div class="staff-card">
                        <div class="staff-header">
                            <h4>👑 ${dono.nome}</h4>
                            <span class="staff-cargo">Dono/Presidente</span>
                        </div>
                        <div class="staff-info">
                            <p><strong>Idade:</strong> ${dono.idade} anos</p>
                            <p><strong>Nacionalidade:</strong> ${dono.nacionalidade}</p>
                            <p><strong>Empresa:</strong> ${dono.empresa}</p>
                            <p><strong>Patrimônio:</strong> ${dono.patrimonio}</p>
                        </div>
                    </div>
                `;
        }

        carregarColaboradores() {
          if (!this.clubeAtual || !this.clubeAtual.colaboradores) return;

          const container = document.getElementById("colaboradores-container");
          if (!container) return;

          container.innerHTML = this.clubeAtual.colaboradores
            .map(
              (colab) => `
                    <div class="staff-card">
                        <div class="staff-header">
                            <h4>👤 ${colab.nome}</h4>
                            <span class="staff-cargo">${colab.cargo}</span>
                        </div>
                        <div class="staff-info">
                            <p><strong>Idade:</strong> ${colab.idade} anos</p>
                            <p><strong>Salário:</strong> ${formatarMoeda(
                              colab.salario
                            )}</p>
                        </div>
                    </div>
                `
            )
            .join("");
        }

        carregarCompeticoes() {
          console.log('Carregando competições...');
          
          // Atualizar informações do Brasileirão
          const brasileirao = this.competicoes.ativas.brasileirao;
          if (brasileirao) {
            const posicao = brasileirao.classificacao.findIndex(t => t.time === this.clubeSelecionado?.nome) + 1;
            const pontos = brasileirao.classificacao.find(t => t.time === this.clubeSelecionado?.nome)?.pontos || 0;
            const jogos = brasileirao.classificacao.find(t => t.time === this.clubeSelecionado?.nome)?.jogos || 0;
            
            document.getElementById('posicao-brasileirao').textContent = posicao || '-';
            document.getElementById('pontos-brasileirao').textContent = pontos;
            document.getElementById('jogos-brasileirao').textContent = `${jogos}/38`;
          }
          
          // Atualizar informações da Libertadores
          const libertadores = this.competicoes.ativas.libertadores;
          if (libertadores) {
            document.getElementById('fase-libertadores').textContent = libertadores.fase;
            document.getElementById('proximo-libertadores').textContent = 'Próximo jogo';
          }
          
          // Atualizar informações da Copa do Brasil
          const copaBrasil = this.competicoes.ativas.copaBrasil;
          if (copaBrasil) {
            document.getElementById('fase-copa-brasil').textContent = copaBrasil.fase;
            document.getElementById('proximo-copa-brasil').textContent = 'Próximo jogo';
          }
          
          // Atualizar informações do Estadual
          const estadual = this.competicoes.ativas.estadual;
          if (estadual) {
            const posicao = estadual.classificacao.findIndex(t => t.time === this.clubeSelecionado?.nome) + 1;
            const pontos = estadual.classificacao.find(t => t.time === this.clubeSelecionado?.nome)?.pontos || 0;
            
            document.getElementById('posicao-estadual').textContent = posicao || '-';
            document.getElementById('pontos-estadual').textContent = pontos;
            document.getElementById('fase-estadual').textContent = estadual.fase;
          }
        }

        carregarTitulos() {
          if (!this.clubeAtual) return;

          document.getElementById("ano-fundacao").textContent =
            this.clubeAtual.ano_fundacao;
          document.getElementById("total-titulos").textContent = "0"; // Por enquanto
        }

        carregarSimulacao() {
          if (!this.clubeAtual) return;

          // Configurar próximo jogo
          const adversarios = [
            "Palmeiras",
            "São Paulo",
            "Corinthians",
            "Santos",
            "Vasco",
          ];
          const adversario =
            adversarios[Math.floor(Math.random() * adversarios.length)];

          document.getElementById("proximo-jogo-info").innerHTML = `
                    <p><strong>Próximo:</strong> ${this.clubeAtual.nome} vs ${adversario}</p>
                    <p><strong>Data:</strong> Próximo domingo, 16h</p>
                    <p><strong>Local:</strong> ${this.clubeAtual.estadio}</p>
                `;
        }

        simularProximoJogo() {
          if (!this.clubeAtual) {
            alert("Nenhum clube selecionado");
            return;
          }

          const adversarios = [
            "Palmeiras",
            "São Paulo",
            "Corinthians",
            "Santos",
            "Vasco",
          ];
          const adversario =
            adversarios[Math.floor(Math.random() * adversarios.length)];

          const golsCasa = Math.floor(Math.random() * 4);
          const golsFora = Math.floor(Math.random() * 4);

          const resultado = `${this.clubeAtual.nome} ${golsCasa} x ${golsFora} ${adversario}`;

          // Adicionar aos resultados
          const resultadosContainer =
            document.getElementById("ultimos-resultados");
          const novoResultado = document.createElement("div");
          novoResultado.className = "resultado-item";
          novoResultado.innerHTML = `
                    <span class="resultado">${resultado}</span>
                    <span class="data">Hoje</span>
                `;
          resultadosContainer.appendChild(novoResultado);

          alert(`Resultado: ${resultado}`);
        }

        simularRodada() {
          alert("Simulando rodada completa do Brasileirão...");
        }

        simularTemporada() {
          alert("Simulando temporada completa...");
        }

        escalarJogador(jogadorId) {
          console.log('Escalando jogador:', jogadorId);
          alert(`Jogador ${jogadorId} escalado com sucesso!`);
        }

        contratarJogador(jogadorId) {
          console.log('Contratando jogador:', jogadorId);
          
          // Inicializar mercado se não existir
          if (!this.mercado) {
            this.atualizarMercado();
          }
          
          // Encontrar o jogador no mercado
          const jogador = this.mercado.find(j => j.id === jogadorId);
          if (!jogador) {
            alert('Jogador não encontrado no mercado!');
            return;
          }
          
          // Mostrar tela de negociação
          this.mostrarTelaNegociacao(jogador);
        }
        
        mostrarTelaNegociacao(jogador) {
          const overlay = document.createElement('div');
          overlay.className = 'negociacao-overlay';
          overlay.innerHTML = `
            <div class="negociacao-container">
              <div class="negociacao-header">
                <h2>💰 NEGOCIAÇÃO</h2>
                <button class="btn-fechar" onclick="this.parentElement.parentElement.parentElement.remove()">✕</button>
              </div>
              
              <div class="jogador-info-negociacao">
                <div class="jogador-foto">👤</div>
                <div class="jogador-detalhes">
                  <h3>${jogador.nome}</h3>
                  <p><strong>Posição:</strong> ${jogador.posicao}</p>
                  <p><strong>Idade:</strong> ${jogador.idade} anos</p>
                  <p><strong>Habilidade:</strong> ${jogador.habilidade}/100</p>
                  <p><strong>Clube Atual:</strong> ${jogador.clube}</p>
                  <p><strong>Valor de Mercado:</strong> ${formatarMoeda(jogador.valor)}</p>
                  <p><strong>Salário:</strong> ${formatarMoeda(jogador.salario)}/mês</p>
                </div>
              </div>
              
              <div class="negociacao-opcoes">
                <div class="opcao-negociacao">
                  <h4>💵 Proposta Direta</h4>
                  <p>Valor: ${formatarMoeda(jogador.valor)}</p>
                  <p>Chance de aceite: ${this.calcularChanceAceite(jogador, jogador.valor)}%</p>
                  <button onclick="window.gameController.fazerProposta(${jogador.id}, ${jogador.valor})" class="btn-proposta">
                    Fazer Proposta
                  </button>
                </div>
                
                <div class="opcao-negociacao">
                  <h4>📈 Proposta Alta</h4>
                  <p>Valor: ${formatarMoeda(jogador.valor * 1.2)}</p>
                  <p>Chance de aceite: ${this.calcularChanceAceite(jogador, jogador.valor * 1.2)}%</p>
                  <button onclick="window.gameController.fazerProposta(${jogador.id}, ${jogador.valor * 1.2})" class="btn-proposta alta">
                    Proposta Alta
                  </button>
                </div>
                
                <div class="opcao-negociacao">
                  <h4>📉 Proposta Baixa</h4>
                  <p>Valor: ${formatarMoeda(jogador.valor * 0.8)}</p>
                  <p>Chance de aceite: ${this.calcularChanceAceite(jogador, jogador.valor * 0.8)}%</p>
                  <button onclick="window.gameController.fazerProposta(${jogador.id}, ${jogador.valor * 0.8})" class="btn-proposta baixa">
                    Proposta Baixa
                  </button>
                </div>
              </div>
              
              <div class="negociacao-info">
                <p><strong>Seu orçamento:</strong> ${formatarMoeda(this.clubeAtual.orcamento)}</p>
                <p><strong>Jogadores no elenco:</strong> ${this.elenco.length}/30</p>
              </div>
            </div>
          `;
          
          document.body.appendChild(overlay);
        }
        
        calcularChanceAceite(jogador, valor) {
          const valorMercado = jogador.valor;
          const razao = valor / valorMercado;
          
          if (razao >= 1.2) return 95;
          if (razao >= 1.0) return 80;
          if (razao >= 0.9) return 60;
          if (razao >= 0.8) return 30;
          return 10;
        }
        
        fazerProposta(jogadorId, valor) {
          const jogador = this.mercado.find(j => j.id === jogadorId);
          if (!jogador) return;
          
          // Verificar se tem dinheiro
          if (this.clubeAtual.orcamento < valor) {
            alert(`Orçamento insuficiente! Você tem R$ ${formatarMoeda(this.clubeAtual.orcamento)} e a proposta é de R$ ${formatarMoeda(valor)}`);
            return;
          }
          
          // Verificar se o jogador aceita a proposta
          const aceitaProposta = this.verificarAceitacaoProposta(jogador, this.clubeAtual, valor);
          
          if (aceitaProposta) {
            // Transferir jogador para o elenco
            this.elenco.push(jogador);
            this.mercado = this.mercado.filter(j => j.id !== jogadorId);
            
            // Diminuir orçamento
            this.diminuirOrcamento(valor);
            
            // Atualizar interface
            this.renderizarMercado(this.mercado);
            this.renderizarElenco(this.elenco);
            
            // Gerar notícia de contratação
            this.gerarNoticiaContratacao(jogador, this.clubeAtual, valor);
            
            // Fechar overlay
            document.querySelector('.negociacao-overlay')?.remove();
            
            alert(`Jogador ${jogador.nome} contratado com sucesso!`);
          } else {
            // Jogador recusou a proposta
            const motivo = this.obterMotivoRecusa(jogador, this.clubeAtual);
            alert(`Jogador ${jogador.nome} recusou a proposta: ${motivo}`);
            
            // Gerar notícia de recusa
            this.gerarNoticiaRecusa(jogador, this.clubeAtual, motivo);
          }
        }
        
        // Sistema de Negociações
        verificarAceitacaoProposta(jogador, clube, valor) {
          const personalidade = jogador.personalidade;
          const prestigioClube = this.calcularPrestigioClube(clube);
          const salarioOferecido = jogador.salario;
          
          // Fatores que influenciam a aceitação
          let probabilidadeAceitacao = 50; // Base 50%
          
          // Prestígio do clube
          if (prestigioClube > 80) {
            probabilidadeAceitacao += 20;
          } else if (prestigioClube < 40) {
            probabilidadeAceitacao -= 20;
          }
          
          // Salário oferecido
          if (salarioOferecido > jogador.contrato.salario * 1.5) {
            probabilidadeAceitacao += 15;
          } else if (salarioOferecido < jogador.contrato.salario * 0.8) {
            probabilidadeAceitacao -= 15;
          }
          
          // Ambição do jogador
          if (personalidade.ambicao > 80) {
            probabilidadeAceitacao += 10;
          } else if (personalidade.ambicao < 30) {
            probabilidadeAceitacao -= 10;
          }
          
          // Lealdade do jogador
          if (personalidade.lealdade > 80) {
            probabilidadeAceitacao -= 10;
          }
          
          // Preferência local/internacional
          if (personalidade.preferenciaLocal === 'local' && clube.nome.includes('Brasil')) {
            probabilidadeAceitacao += 5;
          }
          
          // Valor da proposta
          const razaoValor = valor / jogador.valor;
          if (razaoValor >= 1.2) {
            probabilidadeAceitacao += 20;
          } else if (razaoValor <= 0.8) {
            probabilidadeAceitacao -= 20;
          }
          
          // Retornar se aceita baseado na probabilidade
          return Math.random() * 100 < probabilidadeAceitacao;
        }
        
        calcularPrestigioClube(clube) {
          // Prestígio baseado no orçamento e histórico
          const prestigioBase = Math.min(100, clube.orcamento / 10000000); // 10M = 100 prestígio
          
          // Ajustes baseados no nome do clube
          const ajustes = {
            'Flamengo': 20,
            'Palmeiras': 15,
            'São Paulo': 15,
            'Corinthians': 10,
            'Santos': 10,
            'Grêmio': 10,
            'Internacional': 10,
            'Cruzeiro': 5,
            'Atlético-MG': 5
          };
          
          return Math.min(100, prestigioBase + (ajustes[clube.nome] || 0));
        }
        
        obterMotivoRecusa(jogador, clube) {
          const prestigioClube = this.calcularPrestigioClube(clube);
          const personalidade = jogador.personalidade;
          
          const motivos = [];
          
          if (prestigioClube < 40) {
            motivos.push('Prestígio do clube insuficiente');
          }
          
          if (jogador.salario < jogador.contrato.salario * 0.8) {
            motivos.push('Proposta salarial baixa');
          }
          
          if (personalidade.lealdade > 80) {
            motivos.push('Lealdade ao clube atual');
          }
          
          if (personalidade.preferenciaLocal === 'internacional' && clube.nome.includes('Brasil')) {
            motivos.push('Prefere jogar no exterior');
          }
          
          return motivos.length > 0 ? motivos.join(', ') : 'Motivo pessoal';
        }
        
        // Sistema de Imprensa
        gerarNoticiaContratacao(jogador, clube, valor) {
          const manchetes = [
            `${clube.nome} anuncia contratação de ${jogador.nome} por ${formatarMoeda(valor)}`,
            `${jogador.nome} é o novo reforço do ${clube.nome}`,
            `${clube.nome} investe pesado e contrata ${jogador.nome}`,
            `${jogador.nome} deixa ${jogador.clube} e acerta com ${clube.nome}`,
            `${clube.nome} fecha contratação milionária de ${jogador.nome}`
          ];
          
          const manchete = manchetes[Math.floor(Math.random() * manchetes.length)];
          const impacto = this.calcularImpactoNoticia('contratacao', valor);
          
          this.adicionarNoticia(manchete, 'contratacao', impacto);
        }
        
        gerarNoticiaRecusa(jogador, clube, motivo) {
          const manchetes = [
            `${jogador.nome} recusa proposta do ${clube.nome}`,
            `${clube.nome} tem proposta recusada por ${jogador.nome}`,
            `${jogador.nome} não aceita sair do ${jogador.clube}`,
            `${clube.nome} perde ${jogador.nome} para ${jogador.clube}`,
            `${jogador.nome} prefere ficar no ${jogador.clube}`
          ];
          
          const manchete = manchetes[Math.floor(Math.random() * manchetes.length)];
          const impacto = this.calcularImpactoNoticia('recusa', 0);
          
          this.adicionarNoticia(manchete, 'recusa', impacto);
        }
        
        gerarNoticiaVenda(jogador, proposta) {
          const manchetes = [
            `${jogador.nome} é vendido por ${formatarMoeda(proposta.valor)}`,
            `${this.clubeSelecionado.nome} vende ${jogador.nome} para ${proposta.clubeOfertante.nome}`,
            `${jogador.nome} deixa ${this.clubeSelecionado.nome} por ${formatarMoeda(proposta.valor)}`,
            `${proposta.clubeOfertante.nome} anuncia contratação de ${jogador.nome}`,
            `${this.clubeSelecionado.nome} lucra com venda de ${jogador.nome}`
          ];
          
          const manchete = manchetes[Math.floor(Math.random() * manchetes.length)];
          const impacto = this.calcularImpactoNoticia('venda', proposta.valor);
          
          this.adicionarNoticia(manchete, 'venda', impacto);
        }
        
        gerarNoticiaFaltaTreino(jogador) {
          const manchetes = [
            `${jogador.nome} falta ao treino pela ${Math.floor(Math.random() * 5) + 1}ª vez`,
            `${jogador.nome} não aparece no treino do ${this.clubeSelecionado.nome}`,
            `${jogador.nome} é multado por falta ao treino`,
            `${jogador.nome} gera polêmica ao faltar treino`,
            `Técnico do ${this.clubeSelecionado.nome} critica ${jogador.nome} por falta`
          ];
          
          const manchete = manchetes[Math.floor(Math.random() * manchetes.length)];
          const impacto = this.calcularImpactoNoticia('falta', 0);
          
          this.adicionarNoticia(manchete, 'falta', impacto);
          
          // Diminuir moral do jogador
          jogador.moral = Math.max(0, jogador.moral - 10);
        }
        
        gerarNoticiaGoleada(resultado) {
          const manchetes = [
            `${resultado.casa} goleia ${resultado.visitante} por ${resultado.golsCasa} a ${resultado.golsVisitante}`,
            `${resultado.casa} aplica goleada histórica em ${resultado.visitante}`,
            `${resultado.casa} humilha ${resultado.visitante} com goleada`,
            `${resultado.visitante} sofre goleada do ${resultado.casa}`,
            `${resultado.casa} faz festa e goleia ${resultado.visitante}`
          ];
          
          const manchete = manchetes[Math.floor(Math.random() * manchetes.length)];
          const impacto = this.calcularImpactoNoticia('goleada', 0);
          
          this.adicionarNoticia(manchete, 'goleada', impacto);
        }
        
        gerarNoticiaPolêmica() {
          const polêmicas = [
            'Clube pequeno oferece carro como bicho e gera polêmica',
            'Jogador critica diretoria nas redes sociais',
            'Técnico critica elenco após derrota',
            'Torcida invade campo durante jogo',
            'Jogador é flagrado em festa na véspera de jogo',
            'Diretoria demite técnico após sequência de derrotas',
            'Jogador recusa renovação e gera crise no clube',
            'Clube é punido por dívidas trabalhistas'
          ];
          
          const manchete = polêmicas[Math.floor(Math.random() * polêmicas.length)];
          const impacto = this.calcularImpactoNoticia('polemica', 0);
          
          this.adicionarNoticia(manchete, 'polemica', impacto);
        }
        
        calcularImpactoNoticia(tipo, valor) {
          let impacto = 0;
          
          switch (tipo) {
            case 'contratacao':
              impacto = Math.min(100, valor / 1000000); // 1M = 100 impacto
              break;
            case 'recusa':
              impacto = -20;
              break;
            case 'venda':
              impacto = Math.min(50, valor / 2000000); // 2M = 50 impacto
              break;
            case 'falta':
              impacto = -30;
              break;
            case 'goleada':
              impacto = 40;
              break;
            case 'polemica':
              impacto = -50;
              break;
          }
          
          return impacto;
        }
        
        adicionarNoticia(manchete, tipo, impacto) {
          // Inicializar sistema de notícias se não existir
          if (!this.noticias) {
            this.noticias = [];
          }
          
          const noticia = {
            id: Date.now(),
            manchete: manchete,
            tipo: tipo,
            impacto: impacto,
            data: new Date(),
            lida: false
          };
          
          this.noticias.unshift(noticia); // Adicionar no início
          
          // Manter apenas as últimas 50 notícias
          if (this.noticias.length > 50) {
            this.noticias = this.noticias.slice(0, 50);
          }
          
          // Aplicar impacto na moral e reputação
          this.aplicarImpactoNoticia(noticia);
          
          // Mostrar notificação
          this.mostrarNotificacaoNoticia(noticia);
          
          // Atualizar interface da imprensa
          this.atualizarInterfaceImprensa();
        }
        
        aplicarImpactoNoticia(noticia) {
          // Impacto na moral dos jogadores
          if (this.elenco) {
            this.elenco.forEach(jogador => {
              if (noticia.impacto > 0) {
                jogador.moral = Math.min(100, jogador.moral + noticia.impacto * 0.1);
              } else {
                jogador.moral = Math.max(0, jogador.moral + noticia.impacto * 0.1);
              }
            });
          }
          
          // Impacto na reputação do clube
          if (this.clubeSelecionado) {
            if (!this.clubeSelecionado.reputacao) {
              this.clubeSelecionado.reputacao = 50;
            }
            
            this.clubeSelecionado.reputacao = Math.max(0, Math.min(100, 
              this.clubeSelecionado.reputacao + noticia.impacto * 0.2
            ));
          }
        }
        
        mostrarNotificacaoNoticia(noticia) {
          const icone = this.getIconeNoticia(noticia.tipo);
          const mensagem = `${icone} ${noticia.manchete}`;
          this.criarNotificacao(mensagem, 'noticia');
        }
        
        getIconeNoticia(tipo) {
          const icones = {
            'contratacao': '💰',
            'recusa': '❌',
            'venda': '💸',
            'falta': '⚠️',
            'goleada': '⚽',
            'polemica': '🔥'
          };
          return icones[tipo] || '📰';
        }
        
        atualizarInterfaceImprensa() {
          const container = document.getElementById('imprensa-noticias');
          if (!container) return;
          
          container.innerHTML = '';
          
          if (!this.noticias || this.noticias.length === 0) {
            container.innerHTML = '<p class="sem-noticias">Nenhuma notícia ainda. As notícias aparecerão conforme eventos do jogo.</p>';
            return;
          }
          
          this.noticias.slice(0, 10).forEach(noticia => {
            const noticiaElement = document.createElement('div');
            noticiaElement.className = `noticia-item noticia-${noticia.tipo}`;
            noticiaElement.innerHTML = `
              <div class="noticia-header">
                <span class="noticia-tipo">${this.getIconeNoticia(noticia.tipo)}</span>
                <span class="noticia-data">${noticia.data.toLocaleDateString()}</span>
              </div>
              <div class="noticia-manchete">${noticia.manchete}</div>
              <div class="noticia-impacto ${noticia.impacto > 0 ? 'positivo' : 'negativo'}">
                Impacto: ${noticia.impacto > 0 ? '+' : ''}${noticia.impacto}
              </div>
            `;
            container.appendChild(noticiaElement);
          });
          
          // Atualizar estatísticas
          this.atualizarEstatisticasImprensa();
        }
        
        atualizarEstatisticasImprensa() {
          // Atualizar reputação do clube
          const reputacaoElement = document.getElementById('reputacao-clube');
          if (reputacaoElement && this.clubeSelecionado) {
            reputacaoElement.textContent = Math.round(this.clubeSelecionado.reputacao || 50);
          }
          
          // Atualizar moral média
          const moralElement = document.getElementById('moral-media');
          if (moralElement && this.elenco) {
            const moralMedia = this.elenco.reduce((sum, jogador) => sum + (jogador.moral || 50), 0) / this.elenco.length;
            moralElement.textContent = Math.round(moralMedia);
          }
        }
        
        gerarFaltaAleatoria() {
          if (!this.elenco || this.elenco.length === 0) {
            alert('Nenhum jogador no elenco para gerar falta!');
            return;
          }
          
          // Selecionar jogador aleatório
          const jogador = this.elenco[Math.floor(Math.random() * this.elenco.length)];
          
          // Gerar notícia de falta
          this.gerarNoticiaFaltaTreino(jogador);
          
          // Atualizar interface
          this.atualizarInterfaceImprensa();
        }
        
        // Método para mostrar detalhes do jogador com contrato e personalidade
        verDetalhesJogador(jogadorId) {
          const jogador = this.elenco.find(j => j.id === jogadorId) || this.mercado.find(j => j.id === jogadorId);
          if (!jogador) return;
          
          const overlay = document.createElement('div');
          overlay.className = 'tabela-overlay';
          overlay.innerHTML = `
            <div class="tabela-container">
              <div class="tabela-header">
                <h2>👤 ${jogador.nome}</h2>
                <button class="btn-fechar" onclick="this.parentElement.parentElement.parentElement.remove()">✕</button>
              </div>
              
              <div class="tabela-content">
                <div class="jogador-info-detalhada">
                  <div class="jogador-basico">
                    <h3>Informações Básicas</h3>
                    <p><strong>Posição:</strong> ${jogador.posicao}</p>
                    <p><strong>Idade:</strong> ${jogador.idade} anos</p>
                    <p><strong>Habilidade:</strong> ${jogador.habilidade}/100</p>
                    <p><strong>Moral:</strong> ${jogador.moral}/100</p>
                    <p><strong>Valor:</strong> ${formatarMoeda(jogador.valor)}</p>
                    <p><strong>Salário:</strong> ${formatarMoeda(jogador.salario)}/mês</p>
                  </div>
                  
                  ${jogador.contrato ? `
                    <div class="contrato-info">
                      <h4>📋 Contrato</h4>
                      <div class="contrato-detalhes">
                        <div class="contrato-item">
                          <span class="contrato-label">Início:</span>
                          <span class="contrato-valor">${jogador.contrato.inicio.toLocaleDateString()}</span>
                        </div>
                        <div class="contrato-item">
                          <span class="contrato-label">Fim:</span>
                          <span class="contrato-valor">${jogador.contrato.fim.toLocaleDateString()}</span>
                        </div>
                        <div class="contrato-item">
                          <span class="contrato-label">Salário:</span>
                          <span class="contrato-valor">${formatarMoeda(jogador.contrato.salario)}</span>
                        </div>
                        <div class="contrato-item">
                          <span class="contrato-label">Multa Rescisória:</span>
                          <span class="contrato-valor">${formatarMoeda(jogador.contrato.multaRescisoria)}</span>
                        </div>
                        <div class="contrato-item">
                          <span class="contrato-label">Cláusula de Liberação:</span>
                          <span class="contrato-valor">${formatarMoeda(jogador.contrato.clausulaLiberacao)}</span>
                        </div>
                      </div>
                    </div>
                  ` : ''}
                  
                  ${jogador.personalidade ? `
                    <div class="personalidade-info">
                      <h4>🧠 Personalidade</h4>
                      <div class="personalidade-stats">
                        <div class="personalidade-stat">
                          <span class="personalidade-label">Ambição:</span>
                          <span class="personalidade-valor">${jogador.personalidade.ambicao}</span>
                        </div>
                        <div class="personalidade-stat">
                          <span class="personalidade-label">Lealdade:</span>
                          <span class="personalidade-valor">${jogador.personalidade.lealdade}</span>
                        </div>
                        <div class="personalidade-stat">
                          <span class="personalidade-label">Profissionalismo:</span>
                          <span class="personalidade-valor">${jogador.personalidade.profissionalismo}</span>
                        </div>
                        <div class="personalidade-stat">
                          <span class="personalidade-label">Preferência:</span>
                          <span class="personalidade-valor">${jogador.personalidade.preferenciaLocal}</span>
                        </div>
                      </div>
                    </div>
                  ` : ''}
                </div>
              </div>
            </div>
          `;
          
          document.body.appendChild(overlay);
        }
        
        mostrarResultadoNegociacao(jogador, valor, sucesso) {
          const overlay = document.createElement('div');
          overlay.className = 'resultado-negociacao-overlay';
          overlay.innerHTML = `
            <div class="resultado-negociacao-container">
              <div class="resultado-negociacao-header ${sucesso ? 'sucesso' : 'falha'}">
                <h2>${sucesso ? '✅ CONTRATAÇÃO REALIZADA!' : '❌ PROPOSTA REJEITADA'}</h2>
                <button class="btn-fechar" onclick="this.parentElement.parentElement.parentElement.remove()">✕</button>
              </div>
              
              <div class="resultado-negociacao-content">
                <div class="jogador-info-resultado">
                  <h3>${jogador.nome}</h3>
                  <p><strong>Proposta:</strong> ${formatarMoeda(valor)}</p>
                  ${sucesso ? `
                    <p><strong>Status:</strong> Contratado com sucesso!</p>
                    <p><strong>Novo orçamento:</strong> ${formatarMoeda(this.clubeAtual.orcamento)}</p>
                  ` : `
                    <p><strong>Status:</strong> Proposta rejeitada pelo clube</p>
                    <p><strong>Motivo:</strong> Valor abaixo do esperado</p>
                  `}
                </div>
                
                <div class="resultado-negociacao-acoes">
                  <button onclick="this.parentElement.parentElement.parentElement.remove()" class="btn-continuar">
                    Continuar
                  </button>
                </div>
              </div>
            </div>
          `;
          
          document.body.appendChild(overlay);
        }

        verDetalhesJogador(jogadorId) {
          console.log('Ver detalhes do jogador:', jogadorId);
          alert(`Detalhes do jogador ${jogadorId} - Funcionalidade em desenvolvimento`);
        }
        
        // Sistema de Competições
        atualizarCompeticoes() {
          console.log('Atualizando competições...');
          
          // Removido: não simular automaticamente; apenas carregar estado atual
          
          // Atualizar interface das competições
          this.atualizarInterfaceCompeticoes();
        }
        
        atualizarInterfaceCompeticoes() {
          // Atualizar tabela do Brasileirão
          const containerBrasileirao = document.getElementById('brasileirao-tab');
          if (containerBrasileirao) {
            const competicao = this.competicoes.ativas.brasileirao;
            if (competicao && competicao.classificacao) {
              const classificacao = competicao.classificacao
                .sort((a, b) => b.pontos - a.pontos || b.saldoGols - a.saldoGols)
                .map((time, index) => ({ ...time, posicao: index + 1 }));
              
              containerBrasileirao.innerHTML = this.gerarHTMLTabelaCompeticao('Brasileirão Série A', classificacao);
            }
          }
          
          // Atualizar tabela do Estadual
          const containerEstadual = document.getElementById('estadual-tab');
          if (containerEstadual) {
            const competicao = this.competicoes.ativas.estadual;
            if (competicao && competicao.classificacao) {
              const classificacao = competicao.classificacao
                .sort((a, b) => b.pontos - a.pontos || b.saldoGols - a.saldoGols)
                .map((time, index) => ({ ...time, posicao: index + 1 }));
              
              containerEstadual.innerHTML = this.gerarHTMLTabelaCompeticao('Campeonato Mineiro', classificacao);
            }
          }
        }
        
        gerarHTMLTabelaCompeticao(nome, classificacao) {
          return `
            <div class="competicao-container">
              <div class="competicao-header">
                <h3>🏆 ${nome}</h3>
                <div class="competicao-controls">
                  <button onclick="window.gameController.simularProximaRodada('${nome}')" class="btn-simular">
                    ▶️ Simular Próxima Rodada
                  </button>
                  <button onclick="window.gameController.verCalendario('${nome}')" class="btn-calendario">
                    📅 Ver Calendário
                  </button>
                </div>
              </div>
              
              <div class="tabela-competicao">
                <table class="tabela-classificacao">
                  <thead>
                    <tr>
                      <th>Pos</th>
                      <th>Time</th>
                      <th>P</th>
                      <th>J</th>
                      <th>V</th>
                      <th>E</th>
                      <th>D</th>
                      <th>GP</th>
                      <th>GC</th>
                      <th>SG</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${classificacao.map((time, index) => `
                      <tr class="${time.time === this.clubeAtual?.nome ? 'time-atual' : ''}">
                        <td>${index + 1}</td>
                        <td>${time.time}</td>
                        <td>${time.pontos}</td>
                        <td>${time.jogos}</td>
                        <td>${time.vitorias}</td>
                        <td>${time.empates}</td>
                        <td>${time.derrotas}</td>
                        <td>${time.golsPro}</td>
                        <td>${time.golsContra}</td>
                        <td>${time.saldoGols}</td>
                      </tr>
                    `).join('')}
                  </tbody>
                </table>
              </div>
            </div>
          `;
        }

        // Exibir calendário da competição
        verCalendario(nomeCompeticao) {
          const map = {
            'Brasileirão Série A': 'brasileirao',
            'Campeonato Mineiro': 'estadual',
            'Libertadores': 'libertadores',
            'Copa do Brasil': 'copaBrasil',
            'Sul-Americana': 'sulAmericana'
          };
          const key = map[nomeCompeticao] || 'brasileirao';
          const comp = this.competicoes.ativas[key];
          if (!comp) return;

          let conteudo = '';
          if (comp.rodadas && comp.rodadas.length) {
            const proximas = comp.rodadas.slice(0, 5);
            conteudo = `
              <div class="calendario-lista">
                ${proximas.map(r => `
                  <div class="calendario-rodada">
                    <h4>Rodada ${r.numero}</h4>
                    ${r.jogos.slice(0,5).map(j => `
                      <div class="calendario-jogo">
                        <span>${j.casa} x ${j.visitante}</span>
                        <span>${new Date(j.data).toLocaleDateString('pt-BR')}</span>
                      </div>
                    `).join('')}
                  </div>
                `).join('')}
              </div>`;
          } else if (key === 'copaBrasil' && comp.chaveamento) {
            conteudo = `<p>Chaveamento em ${comp.regras?.faseAtual || 'andamento'}.</p>`;
          } else if ((key === 'libertadores' || key === 'sulAmericana') && comp.grupos) {
            conteudo = `<p>Fase: ${comp.regras?.faseAtual || comp.fase}</p>`;
          } else {
            conteudo = '<p>Calendário indisponível.</p>';
          }

          const overlay = document.createElement('div');
          overlay.className = 'tabela-overlay';
          overlay.innerHTML = `
            <div class="tabela-container">
              <div class="tabela-header">
                <h2>📅 Calendário - ${nomeCompeticao}</h2>
                <button class="btn-fechar" onclick="this.parentElement.parentElement.parentElement.remove()">✕</button>
              </div>
              <div class="tabela-content">${conteudo}</div>
            </div>`;
          document.body.appendChild(overlay);
        }
        
        // Sistema de Treinadores
        gerarTreinador() {
          const nomes = [
            'Abel Ferreira', 'Renato Gaúcho', 'Jorge Sampaoli', 'Cuca', 'Felipão',
            'Tite', 'Dorival Júnior', 'Vanderlei Luxemburgo', 'Muricy Ramalho',
            'Ricardo Gomes', 'Joel Santana', 'Oswaldo de Oliveira', 'Levir Culpi',
            'Marcelo Oliveira', 'Ricardo Drubscky', 'Roger Machado', 'Alberto Valentim',
            'Marcelo Chamusca', 'Guto Ferreira', 'Marcelo Cabo'
          ];
          
          const nacionalidades = ['Brasil', 'Argentina', 'Portugal', 'Uruguai', 'Chile'];
          const formacoes = ['4-4-2', '4-3-3', '4-2-3-1', '3-5-2', '4-1-4-1', '5-3-2'];
          const filosofias = ['Ofensiva', 'Defensiva', 'Equilibrada', 'Contra-ataque', 'Posse de bola'];
          
          const treinador = {
            id: Date.now(),
            nome: nomes[Math.floor(Math.random() * nomes.length)],
            nacionalidade: nacionalidades[Math.floor(Math.random() * nacionalidades.length)],
            idade: Math.floor(Math.random() * 30) + 40, // 40-70 anos
            experiencia: Math.floor(Math.random() * 20) + 5, // 5-25 anos
            reputacao: Math.floor(Math.random() * 100) + 20, // 20-120
            formacaoPreferida: formacoes[Math.floor(Math.random() * formacoes.length)],
            filosofia: filosofias[Math.floor(Math.random() * filosofias.length)],
            salario: Math.floor(Math.random() * 500000) + 100000, // 100k-600k
            contrato: {
              inicio: new Date(),
              fim: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000), // 1 ano
              salario: 0 // será definido acima
            },
            atributos: {
              tecnica: Math.floor(Math.random() * 100) + 30,
              motivacao: Math.floor(Math.random() * 100) + 30,
              disciplina: Math.floor(Math.random() * 100) + 30,
              comunicacao: Math.floor(Math.random() * 100) + 30,
              lideranca: Math.floor(Math.random() * 100) + 30
            },
            historico: [],
            conquistas: []
          };
          
          treinador.contrato.salario = treinador.salario;
          return treinador;
        }
        
        contratarTreinador(treinador) {
          this.treinador = treinador;
          this.formacao = treinador.formacaoPreferida;
          
          // Atualizar interface
          this.atualizarInterfaceTreinador();
          
          console.log(`Treinador ${treinador.nome} contratado!`);
        }
        
        atualizarInterfaceTreinador() {
          const container = document.getElementById('treinador-info');
          if (!container || !this.treinador) return;
        }
        
        // Sistema de Notificações
        criarNotificacao(tipo, titulo, mensagem, importancia = 'normal') {
          const notificacao = {
            id: Date.now(),
            tipo: tipo, // 'sucesso', 'erro', 'aviso', 'info'
            titulo: titulo,
            mensagem: mensagem,
            importancia: importancia, // 'baixa', 'normal', 'alta', 'critica'
            data: new Date(),
            lida: false
          };
          
          this.notificacoes.unshift(notificacao);
          this.mostrarNotificacao(notificacao);
          
          return notificacao;
        }
        
        mostrarNotificacao(notificacao) {
          const container = document.getElementById('notificacoes-container');
          if (!container) return;
          
          const notificacaoElement = document.createElement('div');
          notificacaoElement.className = `notificacao-item notificacao-${notificacao.tipo} notificacao-${notificacao.importancia}`;
          notificacaoElement.innerHTML = `
            <div class="notificacao-header">
              <span class="notificacao-tipo">${this.getIconeNotificacao(notificacao.tipo)}</span>
              <span class="notificacao-titulo">${notificacao.titulo}</span>
              <button class="btn-fechar-notificacao" onclick="this.parentElement.parentElement.remove()">✕</button>
            </div>
            <div class="notificacao-mensagem">${notificacao.mensagem}</div>
            <div class="notificacao-data">${notificacao.data.toLocaleTimeString()}</div>
          `;
          
          container.appendChild(notificacaoElement);
          
          // Auto-remover após 5 segundos
          setTimeout(() => {
            if (notificacaoElement.parentNode) {
              notificacaoElement.remove();
            }
          }, 5000);
        }
        
        getIconeNotificacao(tipo) {
          const icones = {
            'sucesso': '✅',
            'erro': '❌',
            'aviso': '⚠️',
            'info': 'ℹ️'
          };
          return icones[tipo] || '📢';
        }
        
        // Sistema de Imprensa Melhorado
        gerarNoticiaImprensa(evento) {
          const noticias = {
            'contratacao': [
              `${evento.jogador} é contratado pelo ${evento.clube}`,
              `${evento.clube} anuncia contratação de ${evento.jogador}`,
              `Reforço chega: ${evento.jogador} é apresentado`
            ],
            'vitoria': [
              `${evento.clube} vence e sobe na tabela`,
              `Vitória importante para ${evento.clube}`,
              `${evento.clube} mantém boa fase`
            ],
            'derrota': [
              `${evento.clube} perde e cai na tabela`,
              `Má fase para ${evento.clube}`,
              `${evento.clube} precisa reagir`
            ],
            'lesao': [
              `${evento.jogador} se lesiona e será desfalque`,
              `Lesão preocupa ${evento.clube}`,
              `${evento.jogador} deve ficar fora por ${evento.dias} dias`
            ],
            'falta_treino': [
              `${evento.jogador} falta ao treino`,
              `Técnico critica ${evento.jogador} após falta`,
              `Problema disciplinar em ${evento.clube}`
            ]
          };
          
          const noticiasDisponiveis = noticias[evento.tipo] || ['Evento ocorreu no clube'];
          const manchete = noticiasDisponiveis[Math.floor(Math.random() * noticiasDisponiveis.length)];
          
          const noticia = {
            id: Date.now(),
            manchete: manchete,
            evento: evento,
            data: new Date(),
            impacto: this.calcularImpactoNoticia(evento)
          };
          
          this.imprensa.unshift(noticia);
          this.atualizarInterfaceImprensa();
          
          // Criar notificação
          this.criarNotificacao('info', '📰 Nova Notícia', manchete);
          
          return noticia;
        }
        
        // Sistema de Torcida Melhorado
        atualizarOpiniaoTorcida(evento) {
          const impactos = {
            'vitoria': 10,
            'derrota': -10,
            'contratacao': 5,
            'lesao': -5,
            'falta_treino': -3
          };
          
          const impacto = impactos[evento.tipo] || 0;
          this.torcida.moral = Math.max(0, Math.min(100, this.torcida.moral + impacto));
          
          // Atualizar opinião baseada na moral
          if (this.torcida.moral >= 80) {
            this.torcida.opiniao = 'Muito Satisfeita';
          } else if (this.torcida.moral >= 60) {
            this.torcida.opiniao = 'Satisfeita';
          } else if (this.torcida.moral >= 40) {
            this.torcida.opiniao = 'Neutra';
          } else if (this.torcida.moral >= 20) {
            this.torcida.opiniao = 'Insatisfeita';
          } else {
            this.torcida.opiniao = 'Muito Insatisfeita';
          }
          
          // Adicionar ao histórico
          this.torcida.historico.push({
            evento: evento,
            moral: this.torcida.moral,
            opiniao: this.torcida.opiniao,
            data: new Date()
          });
          
          this.atualizarInterfaceTorcida();
        }
        
        atualizarInterfaceTorcida() {
          const container = document.getElementById('torcida-opiniao');
          if (!container) return;
        }
        
        // Métodos auxiliares para notificações
        gerarNoticiaAleatoria() {
          const eventos = [
            { tipo: 'contratacao', jogador: 'João Silva', clube: this.clubeAtual?.nome || 'Clube' },
            { tipo: 'vitoria', clube: this.clubeAtual?.nome || 'Clube' },
            { tipo: 'derrota', clube: this.clubeAtual?.nome || 'Clube' },
            { tipo: 'lesao', jogador: 'Pedro Santos', clube: this.clubeAtual?.nome || 'Clube', dias: Math.floor(Math.random() * 30) + 1 },
            { tipo: 'falta_treino', jogador: 'Carlos Lima', clube: this.clubeAtual?.nome || 'Clube' }
          ];
          
          const evento = eventos[Math.floor(Math.random() * eventos.length)];
          this.gerarNoticiaImprensa(evento);
          this.atualizarOpiniaoTorcida(evento);
        }
        
        limparNotificacoes() {
          this.notificacoes = [];
          const container = document.getElementById('notificacoes-container');
          if (container) {
            container.innerHTML = '<p>Nenhuma notificação.</p>';
          }
        }
        
        atualizarInterfaceImprensa() {
          const container = document.getElementById('imprensa-noticias');
          if (!container) return;
          
          if (!this.imprensa || this.imprensa.length === 0) {
            container.innerHTML = '<p class="sem-noticias">Nenhuma notícia ainda. As notícias aparecerão conforme eventos do jogo.</p>';
            return;
          }
          
          container.innerHTML = this.imprensa.slice(0, 10).map(noticia => `
            <div class="noticia-item noticia-${noticia.evento.tipo}">
              <div class="noticia-header">
                <span class="noticia-tipo">${this.getIconeNoticia(noticia.evento.tipo)}</span>
                <span class="noticia-data">${noticia.data.toLocaleDateString()}</span>
              </div>
              <div class="noticia-manchete">${noticia.manchete}</div>
              <div class="noticia-impacto ${noticia.impacto > 0 ? 'positivo' : 'negativo'}">
                Impacto: ${noticia.impacto > 0 ? '+' : ''}${noticia.impacto}
              </div>
            </div>
          `).join('');
        }
        
        getIconeNoticia(tipo) {
          const icones = {
            'contratacao': '📝',
            'vitoria': '🏆',
            'derrota': '😞',
            'lesao': '🏥',
            'falta_treino': '⚠️'
          };
          return icones[tipo] || '📰';
        }
        
        atualizarInterfaceTorcida() {
          const container = document.getElementById('torcida-opiniao');
          if (!container) return;
          
          container.innerHTML = `
            <div class="torcida-container">
              <div class="torcida-header">
                <h4>🎭 OPINIÃO DA TORCIDA</h4>
              </div>
              
              <div class="torcida-stats">
                <div class="torcida-stat">
                  <span class="stat-label">Moral:</span>
                  <div class="moral-bar">
                    <div class="moral-fill" style="width: ${this.torcida.moral}%"></div>
                  </div>
                  <span class="stat-value">${this.torcida.moral}/100</span>
                </div>
                
                <div class="torcida-stat">
                  <span class="stat-label">Opinião:</span>
                  <span class="stat-value">${this.torcida.opiniao}</span>
                </div>
              </div>
              
              <div class="torcida-historico">
                <h5>📜 Histórico Recente</h5>
                ${this.torcida.historico.slice(0, 5).map(item => `
                  <div class="historico-item">
                    <span class="historico-data">${item.data.toLocaleDateString()}</span>
                    <span class="historico-evento">${item.evento.tipo}</span>
                    <span class="historico-moral">${item.moral}</span>
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        }
        
        atualizarInterfaceTreinador() {
          const container = document.getElementById('treinador-info');
          if (!container || !this.treinador) return;
          
          container.innerHTML = `
            <div class="treinador-card">
              <div class="treinador-header">
                <h3>👨‍💼 ${this.treinador.nome}</h3>
                <span class="treinador-nacionalidade">${this.treinador.nacionalidade}</span>
              </div>
              
              <div class="treinador-info">
                <div class="treinador-stat">
                  <span class="stat-label">Idade:</span>
                  <span class="stat-value">${this.treinador.idade} anos</span>
                </div>
                <div class="treinador-stat">
                  <span class="stat-label">Experiência:</span>
                  <span class="stat-value">${this.treinador.experiencia} anos</span>
                </div>
                <div class="treinador-stat">
                  <span class="stat-label">Reputação:</span>
                  <span class="stat-value">${this.treinador.reputacao}/100</span>
                </div>
                <div class="treinador-stat">
                  <span class="stat-label">Formação:</span>
                  <span class="stat-value">${this.treinador.formacaoPreferida}</span>
                </div>
                <div class="treinador-stat">
                  <span class="stat-label">Filosofia:</span>
                  <span class="stat-value">${this.treinador.filosofia}</span>
                </div>
                <div class="treinador-stat">
                  <span class="stat-label">Salário:</span>
                  <span class="stat-value">${formatarMoeda(this.treinador.salario)}/mês</span>
                </div>
              </div>
              
              <div class="treinador-atributos">
                <h4>Atributos</h4>
                <div class="atributos-grid">
                  <div class="atributo">
                    <span class="atributo-label">Técnica</span>
                    <div class="atributo-bar">
                      <div class="atributo-fill" style="width: ${this.treinador.atributos.tecnica}%"></div>
                    </div>
                    <span class="atributo-valor">${this.treinador.atributos.tecnica}</span>
                  </div>
                  <div class="atributo">
                    <span class="atributo-label">Motivação</span>
                    <div class="atributo-bar">
                      <div class="atributo-fill" style="width: ${this.treinador.atributos.motivacao}%"></div>
                    </div>
                    <span class="atributo-valor">${this.treinador.atributos.motivacao}</span>
                  </div>
                  <div class="atributo">
                    <span class="atributo-label">Disciplina</span>
                    <div class="atributo-bar">
                      <div class="atributo-fill" style="width: ${this.treinador.atributos.disciplina}%"></div>
                    </div>
                    <span class="atributo-valor">${this.treinador.atributos.disciplina}</span>
                  </div>
                  <div class="atributo">
                    <span class="atributo-label">Comunicação</span>
                    <div class="atributo-bar">
                      <div class="atributo-fill" style="width: ${this.treinador.atributos.comunicacao}%"></div>
                    </div>
                    <span class="atributo-valor">${this.treinador.atributos.comunicacao}</span>
                  </div>
                  <div class="atributo">
                    <span class="atributo-label">Liderança</span>
                    <div class="atributo-bar">
                      <div class="atributo-fill" style="width: ${this.treinador.atributos.lideranca}%"></div>
                    </div>
                    <span class="atributo-valor">${this.treinador.atributos.lideranca}</span>
                  </div>
                </div>
              </div>
            </div>
          `;
        }
      }

      // Função para rebindar eventos dos cards de renda
      function rebindarEventosRenda() {
        console.log("Rebindando eventos dos cards de renda...");
        const cardsRenda = document.querySelectorAll(".renda-card");
        console.log("Cards de renda encontrados:", cardsRenda.length);

        cardsRenda.forEach((card, index) => {
          const renda = card.dataset.renda;
          console.log(`Card de renda ${index}: ${renda}`);

          // Remover event listener anterior
          if (card._rendaHandler) {
            card.removeEventListener("click", card._rendaHandler);
          }

          // Adicionar novo event listener
          card._rendaHandler = function (e) {
            e.stopPropagation();
            console.log("Renda clicada:", renda);

            if (
              window.gameController &&
              window.gameController.selecionarRenda
            ) {
              window.gameController.selecionarRenda(renda);
            } else {
              console.log("Controller não disponível ou método inválido");
              // Fallback: mostrar tela de jogador diretamente
              document.getElementById("tela-renda").classList.add("hidden");
              document
                .getElementById("tela-jogador")
                .classList.remove("hidden");
              setTimeout(() => {
                rebindarEventosJogador();
              }, 100);
            }
          };

          card.addEventListener("click", card._rendaHandler);
        });

        console.log("Eventos dos cards de renda rebindados");
      }

      // Função para rebindar eventos dos cards de jogador
      function rebindarEventosJogador() {
        console.log("Rebindando eventos dos cards de jogador...");
        const cardsJogador = document.querySelectorAll(".jogador-card");
        console.log("Cards de jogador encontrados:", cardsJogador.length);

        cardsJogador.forEach((card, index) => {
          const jogador = card.dataset.jogador;
          console.log(`Card de jogador ${index}: ${jogador}`);

          // Remover event listener anterior
          if (card._jogadorHandler) {
            card.removeEventListener("click", card._jogadorHandler);
          }

          // Adicionar novo event listener
          card._jogadorHandler = function (e) {
            e.stopPropagation();
            console.log("Jogador clicado:", jogador);

            if (window.gameController) {
              window.gameController.iniciarJogo();
            } else {
              console.log("Controller não disponível");
              // Fallback: mostrar tela de time diretamente
              document.getElementById("tela-jogador").classList.add("hidden");
              mostrarTelaTimeSimplificada();
            }
          };

          card.addEventListener("click", card._jogadorHandler);
        });

        console.log("Eventos dos cards de jogador rebindados");
      }

      // Função para mostrar tela de time simplificada
      function mostrarTelaTimeSimplificada() {
        console.log("Mostrando tela de time (versão simplificada)...");

        // Esconder todas as outras telas
        document.getElementById("tela-titulo").classList.add("hidden");
        document.getElementById("tela-desafio").classList.add("hidden");
        document.getElementById("tela-renda").classList.add("hidden");
        document.getElementById("tela-jogador").classList.add("hidden");

        // Mostrar tela de time
        document.getElementById("tela-time").classList.remove("hidden");

        // Carregar clubes
        carregarClubesSimplificado();
      }

      // Função para renderizar clubes
      function renderizarClubes(clubes) {
        console.log("Renderizando clubes:", clubes.length);
        const container = document.getElementById("clubes-container");

        if (!container) {
          console.error("Container de clubes não encontrado");
          return;
        }

        container.innerHTML = "";

        clubes.forEach((clube) => {
          const clubeCard = document.createElement("div");
          clubeCard.className = "clube-card";
          clubeCard.innerHTML = `
                    <div class="clube-logo" style="background: linear-gradient(135deg, ${
                      clube.cor_primaria
                    }, ${clube.cor_secundaria});">
                        <div class="logo-inner">
                            <span class="logo-text" style="color: ${getContrastColor(
                              clube.cor_primaria
                            )};">${clube.nome
            .split(" ")
            .map((palavra) => palavra[0])
            .join("")}</span>
                        </div>
                    </div>
                    <div class="clube-header">
                        <h3>${clube.nome}</h3>
                        <span class="clube-apelido">${clube.apelido}</span>
                    </div>
                    <div class="clube-info">
                        <p><strong>Cidade:</strong> ${clube.cidade}, ${
            clube.estado
          }</p>
                        <p><strong>Estádio:</strong> ${clube.estadio}</p>
                        <p><strong>Orçamento:</strong> ${formatarMoeda(
                          clube.orcamento
                        )}</p>
                        ${clube.situacao ? `<p><strong>Situação:</strong> <span style="color: ${clube.situacao.includes('crise') ? '#ff4444' : '#44aa44'}; font-weight: bold;">${clube.situacao}</span></p>` : ''}
                    </div>
                    <div class="clube-cores">
                        <div class="cores-display">
                            <span class="cor-badge" style="background-color: ${
                              clube.cor_primaria
                            }; color: ${getContrastColor(
            clube.cor_primaria
          )};">${clube.cores[0]}</span>
                            <span class="cor-badge" style="background-color: ${
                              clube.cor_secundaria
                            }; color: ${getContrastColor(
            clube.cor_secundaria
          )};">${clube.cores[1]}</span>
                        </div>
                    </div>
                    <div class="clube-acoes">
                        <button class="btn-selecionar" onclick="selecionarClube(${
                          clube.id
                        })" style="background-color: ${
            clube.cor_primaria
          }; color: ${getContrastColor(clube.cor_primaria)};">
                            🎯 Selecionar Time
                        </button>
                    </div>
                `;
          container.appendChild(clubeCard);
        });

        console.log("Clubes renderizados com sucesso");
      }

      // Variável global para armazenar todos os clubes
      let todosClubes = [];

      // Função para aplicar filtros e ordenação
      function aplicarFiltrosTimes() {
        const filtroOrdem = document.getElementById('filtro-ordem').value;
        const filtroRiqueza = document.getElementById('filtro-riqueza').value;
        const filtroSituacao = document.getElementById('filtro-situacao').value;

        let clubesFiltrados = [...todosClubes];

        // Aplicar filtro de riqueza
        if (filtroRiqueza !== 'todos') {
          clubesFiltrados = clubesFiltrados.filter(clube => {
            const riqueza = getRiquezaClube(clube.orcamento);
            return riqueza === filtroRiqueza;
          });
        }

        // Aplicar filtro de situação
        if (filtroSituacao !== 'todos') {
          clubesFiltrados = clubesFiltrados.filter(clube => {
            if (filtroSituacao === 'SAF') {
              return clube.situacao && clube.situacao.includes('SAF');
            } else if (filtroSituacao === 'Associação') {
              return clube.situacao && clube.situacao.includes('Associação');
            } else if (filtroSituacao === 'crise') {
              return clube.situacao && clube.situacao.includes('crise');
            }
            return true;
          });
        }

        // Aplicar ordenação
        switch (filtroOrdem) {
          case 'nome':
            clubesFiltrados.sort((a, b) => a.nome.localeCompare(b.nome, 'pt-BR'));
            break;
          case 'nome-desc':
            clubesFiltrados.sort((a, b) => b.nome.localeCompare(a.nome, 'pt-BR'));
            break;
          case 'riqueza':
            clubesFiltrados.sort((a, b) => b.orcamento - a.orcamento);
            break;
          case 'orcamento':
            clubesFiltrados.sort((a, b) => b.orcamento - a.orcamento);
            break;
          case 'facilidade':
            clubesFiltrados.sort((a, b) => {
              const facilidadeA = getFacilidadeClube(a);
              const facilidadeB = getFacilidadeClube(b);
              return facilidadeB - facilidadeA;
            });
            break;
        }

        renderizarClubes(clubesFiltrados);
      }

      // Função para determinar a riqueza do clube baseada no orçamento
      function getRiquezaClube(orcamento) {
        if (orcamento >= 150000000) return 'alta';
        if (orcamento >= 80000000) return 'média';
        return 'baixa';
      }

      // Função para calcular a facilidade do clube (0-100)
      function getFacilidadeClube(clube) {
        let facilidade = 50; // Base

        // Fator orçamento (0-30 pontos)
        if (clube.orcamento >= 200000000) facilidade += 30;
        else if (clube.orcamento >= 150000000) facilidade += 25;
        else if (clube.orcamento >= 100000000) facilidade += 20;
        else if (clube.orcamento >= 50000000) facilidade += 15;
        else if (clube.orcamento >= 20000000) facilidade += 10;
        else facilidade += 5;

        // Fator situação (0-20 pontos)
        if (clube.situacao && clube.situacao.includes('SAF')) facilidade += 20;
        else if (clube.situacao && clube.situacao.includes('Associação')) facilidade += 10;
        else if (clube.situacao && clube.situacao.includes('crise')) facilidade -= 10;

        // Fator histórico (0-20 pontos)
        const clubesGrandes = ['Flamengo', 'Palmeiras', 'Corinthians', 'São Paulo', 'Santos'];
        if (clubesGrandes.includes(clube.nome)) facilidade += 20;

        // Fator localização (0-10 pontos)
        if (clube.estado === 'SP' || clube.estado === 'RJ') facilidade += 10;

        return Math.max(0, Math.min(100, facilidade));
      }

      // Função para carregar clubes de forma simplificada
      function carregarClubesSimplificado() {
        console.log("Carregando clubes de forma simplificada...");

        // Usar dados hardcoded para evitar problemas de CORS
        todosClubes = [
          {
            id: 1,
            nome: "Flamengo",
            apelido: "Mengão",
            cidade: "Rio de Janeiro",
            estado: "RJ",
            orcamento: 200000000,
            estadio: "Maracanã",
            cores: ["Preto", "Vermelho"],
            cor_primaria: "#000000",
            cor_secundaria: "#E31B23",
          },
          {
            id: 2,
            nome: "Palmeiras",
            apelido: "Verdao",
            cidade: "São Paulo",
            estado: "SP",
            orcamento: 180000000,
            estadio: "Allianz Parque",
            cores: ["Verde", "Branco"],
            cor_primaria: "#006400",
            cor_secundaria: "#FFFFFF",
          },
          {
            id: 3,
            nome: "Corinthians",
            apelido: "Timão",
            cidade: "São Paulo",
            estado: "SP",
            orcamento: 150000000,
            estadio: "Neo Química Arena",
            cores: ["Preto", "Branco"],
            cor_primaria: "#000000",
            cor_secundaria: "#FFFFFF",
          },
          {
            id: 4,
            nome: "São Paulo",
            apelido: "Tricolor",
            cidade: "São Paulo",
            estado: "SP",
            orcamento: 120000000,
            estadio: "Morumbi",
            cores: ["Vermelho", "Branco", "Preto"],
            cor_primaria: "#E31B23",
            cor_secundaria: "#FFFFFF",
          },
          {
            id: 5,
            nome: "Santos",
            apelido: "Peixe",
            cidade: "Santos",
            estado: "SP",
            orcamento: 80000000,
            estadio: "Vila Belmiro",
            cores: ["Preto", "Branco"],
            cor_primaria: "#000000",
            cor_secundaria: "#FFFFFF",
          },
          {
            id: 6,
            nome: "Grêmio",
            apelido: "Imortal",
            cidade: "Porto Alegre",
            estado: "RS",
            orcamento: 100000000,
            estadio: "Arena do Grêmio",
            cores: ["Azul", "Preto", "Branco"],
            cor_primaria: "#0066CC",
            cor_secundaria: "#000000",
          },
          {
            id: 7,
            nome: "Internacional",
            apelido: "Colorado",
            cidade: "Porto Alegre",
            estado: "RS",
            orcamento: 110000000,
            estadio: "Beira-Rio",
            cores: ["Vermelho", "Branco"],
            cor_primaria: "#E31B23",
            cor_secundaria: "#FFFFFF",
          },
          {
            id: 8,
            nome: "Atlético Mineiro",
            apelido: "Galo",
            cidade: "Belo Horizonte",
            estado: "MG",
            orcamento: 30000000,
            estadio: "Mineirão",
            cores: ["Preto", "Branco"],
            cor_primaria: "#000000",
            cor_secundaria: "#FFFFFF",
            situacao: "Em crise financeira - deve para bancos"
          },
          {
            id: 9,
            nome: "Cruzeiro",
            apelido: "Raposa",
            cidade: "Belo Horizonte",
            estado: "MG",
            orcamento: 150000000,
            estadio: "Mineirão",
            cores: ["Azul", "Branco"],
            cor_primaria: "#0066CC",
            cor_secundaria: "#FFFFFF",
            situacao: "SAF forte - dono bilionário, gestão consciente"
          }
        ];
        
        console.log("Clubes carregados:", clubes.length);
        renderizarClubes(clubes);
      }

      // Inicializar o jogo quando a página carregar
      document.addEventListener("DOMContentLoaded", function () {
        console.log("=== INICIALIZAÇÃO DO JOGO ===");
        console.log("DOM carregado, inicializando jogo...");

        // Teste: verificar se as funções estão definidas
        console.log("=== TESTE DE FUNÇÕES ===");
        console.log("criarTimeAleatorio definida?", typeof criarTimeAleatorio);
        console.log("criarTimeGenerico definida?", typeof criarTimeGenerico);
        console.log("selecionarClube definida?", typeof selecionarClube);

        // Criar partículas
        criarParticulasBrasileiras();

        // Função para inicializar o jogo
        function inicializarJogo() {
          try {
            console.log("Criando GameController...");
            window.gameController = new GameController();
            console.log(
              "GameController criado com sucesso:",
              window.gameController
            );

            // Inicializar o controller
            console.log("Inicializando controller...");
            window.gameController
              .init()
              .then(() => {
                console.log("Controller inicializado com sucesso!");

                // Adicionar event listeners aos menus
                adicionarEventListeners();
              })
              .catch((error) => {
                console.error("Erro ao inicializar controller:", error);
                // Tentar adicionar event listeners mesmo com erro
                adicionarEventListeners();
              });
          } catch (error) {
            console.error("Erro ao criar GameController:", error);
            // Tentar adicionar event listeners mesmo com erro
            adicionarEventListeners();
          }
        }

        // Função para adicionar event listeners
        function adicionarEventListeners() {
          console.log("Adicionando event listeners...");

          // Event listeners para menus principais
          const menuItems = document.querySelectorAll(".menu-item");
          console.log("Menu items encontrados:", menuItems.length);

          menuItems.forEach((item, index) => {
            const menu = item.dataset.menu;
            console.log(`Menu ${index}: ${menu}`);

            // Remover event listeners anteriores
            if (item._clickHandler) {
              item.removeEventListener("click", item._clickHandler);
            }

            // Adicionar novo event listener
            item._clickHandler = function (e) {
              e.preventDefault();
              e.stopPropagation();
              console.log(`Menu "${menu}" clicado!`);

              if (window.gameController && menu) {
                window.gameController.lidarMenuPrincipal(menu);
              } else {
                console.log("Controller não disponível ou menu inválido");
                // Fallback para testes
                if (menu === "iniciar") {
                  document
                    .getElementById("tela-desafio")
                    .classList.remove("hidden");
                  document
                    .getElementById("tela-titulo")
                    .classList.add("hidden");
                  // Rebindar eventos dos cards de desafio
                  setTimeout(() => {
                    rebindarEventosDesafio();
                  }, 100);
                }
              }
            };

            item.addEventListener("click", item._clickHandler);
          });

          // Rebindar eventos dos cards existentes
          rebindarEventosDesafio();
          rebindarEventosRenda();
          rebindarEventosJogador();

          console.log("Event listeners adicionados com sucesso!");
        }

        // Função simplificada para mostrar tela de time
        function mostrarTelaTimeSimplificada() {
          console.log("Mostrando tela de time (versão simplificada)...");
          document.getElementById("tela-time").classList.remove("hidden");
          document.getElementById("tela-desafio").classList.add("hidden");

          // Carregar clubes diretamente
          carregarClubesSimplificado();
        }

        // Função para carregar clubes de forma simplificada
        async function carregarClubesSimplificado() {
          try {
            console.log("Carregando clubes de forma simplificada...");

            // Usar dados hardcoded para evitar problemas de CORS
            const clubes = [
              {
                id: 1,
                nome: "Flamengo",
                apelido: "Mengão",
                cidade: "Rio de Janeiro",
                estado: "RJ",
                orcamento: 200000000,
                estadio: "Maracanã",
                cores: ["Preto", "Vermelho"],
                cor_primaria: "#000000",
                cor_secundaria: "#E31B23",
              },
              {
                id: 2,
                nome: "Palmeiras",
                apelido: "Verdao",
                cidade: "São Paulo",
                estado: "SP",
                orcamento: 180000000,
                estadio: "Allianz Parque",
                cores: ["Verde", "Branco"],
                cor_primaria: "#006400",
                cor_secundaria: "#FFFFFF",
              },
              {
                id: 3,
                nome: "Corinthians",
                apelido: "Timão",
                cidade: "São Paulo",
                estado: "SP",
                orcamento: 150000000,
                estadio: "Neo Química Arena",
                cores: ["Preto", "Branco"],
                cor_primaria: "#000000",
                cor_secundaria: "#FFFFFF",
              },
              {
                id: 4,
                nome: "São Paulo",
                apelido: "Tricolor",
                cidade: "São Paulo",
                estado: "SP",
                orcamento: 120000000,
                estadio: "Morumbi",
                cores: ["Vermelho", "Branco", "Preto"],
                cor_primaria: "#E31B23",
                cor_secundaria: "#FFFFFF",
              },
              {
                id: 5,
                nome: "Santos",
                apelido: "Peixe",
                cidade: "Santos",
                estado: "SP",
                orcamento: 80000000,
                estadio: "Vila Belmiro",
                cores: ["Preto", "Branco"],
                cor_primaria: "#000000",
                cor_secundaria: "#FFFFFF",
              },
              {
                id: 6,
                nome: "Grêmio",
                apelido: "Imortal",
                cidade: "Porto Alegre",
                estado: "RS",
                orcamento: 100000000,
                estadio: "Arena do Grêmio",
                cores: ["Azul", "Preto", "Branco"],
                cor_primaria: "#0066CC",
                cor_secundaria: "#000000",
              },
              {
                id: 7,
                nome: "Internacional",
                apelido: "Colorado",
                cidade: "Porto Alegre",
                estado: "RS",
                orcamento: 110000000,
                estadio: "Beira-Rio",
                cores: ["Vermelho", "Branco"],
                cor_primaria: "#E31B23",
                cor_secundaria: "#FFFFFF",
              },
                          {
              id: 8,
              nome: "Atlético Mineiro",
              apelido: "Galo",
              cidade: "Belo Horizonte",
              estado: "MG",
              orcamento: 30000000,
              estadio: "Mineirão",
              cores: ["Preto", "Branco"],
              cor_primaria: "#000000",
              cor_secundaria: "#FFFFFF",
              situacao: "Em crise financeira - deve para bancos"
            },
            {
              id: 9,
              nome: "Cruzeiro",
              apelido: "Raposa",
              cidade: "Belo Horizonte",
              estado: "MG",
              orcamento: 150000000,
              estadio: "Mineirão",
              cores: ["Azul", "Branco"],
              cor_primaria: "#0066CC",
              cor_secundaria: "#FFFFFF",
              situacao: "SAF forte - dono bilionário, gestão consciente"
            }
            ];
            
            console.log("Clubes carregados:", todosClubes.length);
            
            // Aplicar ordenação alfabética por padrão
            aplicarFiltrosTimes();
          } catch (error) {
            console.error("Erro ao carregar clubes:", error);
            document.getElementById("clubes-container").innerHTML = `
                        <div style="text-align: center; padding: 20px; color: red;">
                            <h3>Erro ao carregar clubes</h3>
                            <p>${error.message}</p>
                            <button onclick="carregarClubesSimplificado()" style="margin-top: 10px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Tentar Novamente
                            </button>
                        </div>
                    `;
          }
        }

        // Função para adicionar event listeners
        function adicionarEventListeners() {
          console.log("Adicionando event listeners...");

          // Event listeners para menus principais
          const menuItems = document.querySelectorAll(".menu-item");
          console.log("Menu items encontrados:", menuItems.length);

          menuItems.forEach((item, index) => {
            const menu = item.dataset.menu;
            console.log(`Menu ${index}: ${menu}`);

            // Remover event listeners anteriores
            if (item._clickHandler) {
              item.removeEventListener("click", item._clickHandler);
            }

            // Adicionar novo event listener
            item._clickHandler = function (e) {
              e.preventDefault();
              e.stopPropagation();
              console.log(`Menu "${menu}" clicado!`);

              if (window.gameController && menu) {
                window.gameController.lidarMenuPrincipal(menu);
              } else {
                console.log("Controller não disponível ou menu inválido");
                // Fallback para testes
                if (menu === "iniciar") {
                  document
                    .getElementById("tela-desafio")
                    .classList.remove("hidden");
                  document
                    .getElementById("tela-titulo")
                    .classList.add("hidden");
                  // Rebindar eventos dos cards de desafio
                  setTimeout(() => {
                    rebindarEventosDesafio();
                  }, 100);
                }
              }
            };

            item.addEventListener("click", item._clickHandler);
          });

          // Rebindar eventos dos cards existentes
          rebindarEventosDesafio();
          rebindarEventosRenda();
          rebindarEventosJogador();

          console.log("Event listeners adicionados com sucesso!");
        }

        // Função para rebindar eventos dos cards de desafio
        function rebindarEventosDesafio() {
          console.log("Rebindando eventos dos cards de desafio...");
          const desafioCards = document.querySelectorAll(".desafio-card");
          console.log("Cards de desafio encontrados:", desafioCards.length);

          desafioCards.forEach((card, index) => {
            // Remover event listeners anteriores
            if (card._desafioHandler) {
              card.removeEventListener("click", card._desafioHandler);
            }

            const desafio = card.dataset.desafio;
            console.log(`Card de desafio ${index}: ${desafio}`);

            card._desafioHandler = function (e) {
              e.preventDefault();
              e.stopPropagation();
              console.log("Desafio clicado:", desafio);

              if (window.gameController && desafio) {
                window.gameController.selecionarDesafio(desafio);
              } else {
                console.log("Controller não disponível ou desafio inválido");
                // Fallback: mostrar tela de time diretamente
                mostrarTelaTimeSimplificada();
              }
            };

            card.addEventListener("click", card._desafioHandler);
          });
          console.log("Eventos dos cards de desafio rebindados");
        }

        // Função para renderizar clubes
        function renderizarClubes(clubes) {
          console.log("Renderizando clubes:", clubes.length);
          const container = document.getElementById("clubes-container");
          if (!container) {
            console.error("Container de clubes não encontrado");
            return;
          }

          container.innerHTML = clubes
            .map(
              (clube) => `
                    <div class="clube-card" data-clube="${clube.id}">
                        <div class="clube-logo" style="background: linear-gradient(135deg, ${
                          clube.cor_primaria
                        }, ${clube.cor_secundaria});">
                            <div class="logo-inner" style="border: 3px solid ${
                              clube.cor_accent || "#FFFFFF"
                            };">
                                <span class="logo-text" style="color: ${getContrastColor(
                                  clube.cor_primaria
                                )};">${clube.nome.charAt(0)}</span>
                            </div>
                        </div>
                        <div class="clube-header">
                            <h3>${clube.nome}</h3>
                            <span class="clube-apelido">${clube.apelido}</span>
                        </div>
                        <div class="clube-info">
                            <p><strong>🏙️ Cidade:</strong> ${clube.cidade} - ${
                clube.estado
              }</p>
                            <p><strong>💰 Riqueza:</strong> ${capitalizeFirst(
                              clube.riqueza
                            )}</p>
                            <p><strong>💵 Orçamento:</strong> ${formatarMoeda(
                              clube.orcamento
                            )}</p>
                            <p><strong>🏟️ Estádio:</strong> ${clube.estadio}</p>
                            <p><strong>👥 Torcida:</strong> ${capitalizeFirst(
                              clube.torcida
                            )}</p>
                        </div>
                        <div class="clube-cores">
                            <div class="cores-display">
                                <span class="cor-badge" style="background-color: ${
                                  clube.cor_primaria
                                }; color: ${getContrastColor(
                clube.cor_primaria
              )};">Primária</span>
                                <span class="cor-badge" style="background-color: ${
                                  clube.cor_secundaria
                                }; color: ${getContrastColor(
                clube.cor_secundaria
              )};">Secundária</span>
                                ${
                                  clube.cor_accent
                                    ? `<span class="cor-badge" style="background-color: ${
                                        clube.cor_accent
                                      }; color: ${getContrastColor(
                                        clube.cor_accent
                                      )};">Accent</span>`
                                    : ""
                                }
                            </div>
                        </div>
                        <div class="clube-acoes">
                            <button class="btn-selecionar" onclick="selecionarClube(${
                              clube.id
                            })">
                                🎯 Selecionar Time
                            </button>
                        </div>
                    </div>
                `
            )
            .join("");

          console.log("Clubes renderizados com sucesso");
        }

        // Funções auxiliares
        function capitalizeFirst(str) {
          return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function getContrastColor(hexColor) {
          const hex = hexColor.replace("#", "");
          const r = parseInt(hex.substr(0, 2), 16);
          const g = parseInt(hex.substr(2, 2), 16);
          const b = parseInt(hex.substr(4, 2), 16);
          const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
          return luminance > 0.5 ? "#000000" : "#FFFFFF";
        }

        function formatarMoeda(valor) {
          return new Intl.NumberFormat("pt-BR", {
            style: "currency",
            currency: "BRL",
          }).format(valor);
        }

        function selecionarClube(clubeId) {
          console.log("=== SELEÇÃO DE CLUBE INICIADA ===");
          console.log("Clube ID recebido:", clubeId);
          console.log("Tipo do clubeId:", typeof clubeId);

          try {
            // Converter para número se necessário
            const clubeIdNum = parseInt(clubeId);
            console.log("Clube ID convertido:", clubeIdNum);

            // Verificar se o ID é válido
            if (!clubeIdNum || isNaN(clubeIdNum)) {
              console.error("ID de clube inválido:", clubeId);
              alert("Erro: ID de clube inválido");
              return;
            }

            // Tentar carregar dados do clube diretamente
            carregarClubeEDireto(clubeIdNum);
          } catch (error) {
            console.error("Erro geral em selecionarClube:", error);
            console.error("Stack trace:", error.stack);
            alert(
              "Erro ao selecionar time. Tente novamente. Erro: " + error.message
            );
          }
        }

        // Função para carregar clube e selecionar diretamente
        async function carregarClubeEDireto(clubeId) {
          try {
            console.log("Carregando dados do clube:", clubeId);

            // Carregar dados dos clubes
            const response = await fetch("dados/clubes.json");
            if (!response.ok) {
              throw new Error("Erro ao carregar dados dos clubes");
            }

            const clubes = await response.json();
            const clube = clubes.find((c) => c.id === clubeId);

            if (!clube) {
              throw new Error(`Clube com ID ${clubeId} não encontrado`);
            }

            console.log("Clube encontrado:", clube);

            // Marcar jogo como iniciado
            localStorage.setItem("jogoIniciado", "true");
            localStorage.setItem("timeEscolhido", clube.nome);

            // Aplicar cores do time
            aplicarCoresDoTime(clube);

            // Atualizar nome do time
            atualizarNomeDoTime(clube.nome);

            // Ocultar tela de time
            document.getElementById("tela-time").classList.add("hidden");

            // Mostrar tela de jogo principal
            const jogoPrincipal = document.getElementById("jogo-principal");
            if (jogoPrincipal) {
              jogoPrincipal.classList.remove("hidden");
              console.log("Tela de jogo principal mostrada");

              // Mostrar mensagem de sucesso
              alert(`Time "${clube.nome}" selecionado com sucesso!`);
            } else {
              console.error("Elemento jogo-principal não encontrado");
              alert("Erro: Tela de jogo não encontrada");
            }
          } catch (error) {
            console.error("Erro ao carregar clube:", error);
            alert(
              "Erro ao selecionar time. Tente novamente. Erro: " + error.message
            );
          }
        }

        // Função auxiliar para inicializar controller e fazer fallback
        function inicializarControllerEFallback(clubeId) {
          console.log("Inicializando controller com fallback...");

          try {
            // Tentar inicializar o controller
            if (!window.gameController) {
              console.log("Criando novo GameController...");
              window.gameController = new GameController();
            }

            console.log("Inicializando controller...");
            window.gameController
              .init()
              .then(() => {
                console.log("Controller inicializado com sucesso");
                try {
                  window.gameController.selecionarClube(clubeId);
                  console.log("Seleção de clube bem-sucedida via controller");
                } catch (error) {
                  console.error(
                    "Erro ao selecionar clube via controller:",
                    error
                  );
                  // Fallback final: mostrar tela de jogo diretamente
                  mostrarJogoDiretamente(clubeId);
                }
              })
              .catch((error) => {
                console.error("Erro ao inicializar controller:", error);
                // Fallback: mostrar jogo diretamente
                mostrarJogoDiretamente(clubeId);
              });
          } catch (error) {
            console.error("Erro ao criar controller:", error);
            // Fallback: mostrar jogo diretamente
            mostrarJogoDiretamente(clubeId);
          }
        }

        // Função de fallback para mostrar jogo diretamente
        function mostrarJogoDiretamente(clubeId) {
          console.log(
            "Usando fallback: mostrar jogo diretamente para clube",
            clubeId
          );

          try {
            // Ocultar tela de time
            document.getElementById("tela-time").classList.add("hidden");

            // Mostrar tela de jogo principal
            const jogoPrincipal = document.getElementById("jogo-principal");
            if (jogoPrincipal) {
              jogoPrincipal.classList.remove("hidden");
              console.log("Tela de jogo principal mostrada");

              // Marcar jogo como iniciado
              localStorage.setItem("jogoIniciado", "true");
              localStorage.setItem("timeEscolhido", `Clube ${clubeId}`);

              // Mostrar mensagem de sucesso
              alert(`Clube ${clubeId} selecionado! Jogo iniciado.`);

              // Atualizar nome do time no header se existir
              const nomeTimeElement = document.querySelector(".nome-time");
              if (nomeTimeElement) {
                nomeTimeElement.textContent = `Clube ${clubeId}`;
              }
            } else {
              console.error("Elemento jogo-principal não encontrado");
              alert("Erro: Tela de jogo não encontrada");
            }
          } catch (error) {
            console.error("Erro no fallback:", error);
            alert("Erro ao iniciar jogo. Tente recarregar a página.");
          }
        }

        // Função para rebindar eventos dos cards de renda
        function rebindarEventosRenda() {
          console.log("Rebindando eventos dos cards de renda...");
          const rendaCards = document.querySelectorAll(".renda-card");
          console.log("Cards de renda encontrados:", rendaCards.length);

          rendaCards.forEach((card, index) => {
            // Remover event listeners anteriores
            if (card._rendaHandler) {
              card.removeEventListener("click", card._rendaHandler);
            }

            const renda = card.dataset.renda;
            console.log(`Card de renda ${index}: ${renda}`);

            card._rendaHandler = function (e) {
              e.preventDefault();
              e.stopPropagation();
              console.log("Renda clicada:", renda);

              if (window.gameController && renda) {
                window.gameController.selecionarRenda(renda);
              } else {
                console.log("Controller não disponível ou renda inválida");
                // Fallback: mostrar tela de jogador
                document
                  .getElementById("tela-jogador")
                  .classList.remove("hidden");
                document.getElementById("tela-renda").classList.add("hidden");
              }
            };

            card.addEventListener("click", card._rendaHandler);
          });
          console.log("Eventos dos cards de renda rebindados");
        }

        // Função para rebindar eventos dos cards de jogador
        function rebindarEventosJogador() {
          console.log("Rebindando eventos dos cards de jogador...");
          const jogadorCards = document.querySelectorAll(".jogador-card");
          console.log("Cards de jogador encontrados:", jogadorCards.length);

          jogadorCards.forEach((card, index) => {
            // Remover event listeners anteriores
            if (card._jogadorHandler) {
              card.removeEventListener("click", card._jogadorHandler);
            }

            const jogador = card.dataset.jogador;
            console.log(`Card de jogador ${index}: ${jogador}`);

            card._jogadorHandler = function (e) {
              e.preventDefault();
              e.stopPropagation();
              console.log("Jogador clicado:", jogador);

              if (window.gameController) {
                window.gameController.iniciarJogo();
              } else {
                console.log("Controller não disponível");
                // Fallback: mostrar tela de time diretamente
                document.getElementById("tela-jogador").classList.add("hidden");
                document.getElementById("tela-time").classList.remove("hidden");
                carregarClubesSimplificado();
              }
            };

            card.addEventListener("click", card._jogadorHandler);
          });
          console.log("Eventos dos cards de jogador rebindados");
        }

        // Funções auxiliares para gerar dados aleatórios
        function gerarNomeTimeAleatorio() {
          const prefixos = [
            "Sport",
            "Atlético",
            "Grêmio",
            "Internacional",
            "Palmeiras",
            "Corinthians",
            "Flamengo",
            "Vasco",
            "Fluminense",
            "Botafogo",
            "Santos",
            "São Paulo",
            "Cruzeiro",
            "Atlético Mineiro",
            "Bahia",
            "Vitória",
            "Fortaleza",
            "Ceará",
            "Sport Recife",
            "Náutico",
          ];
          const sufixos = [
            "Clube",
            "Futebol Clube",
            "Esporte Clube",
            "Atlético Clube",
            "Sport Club",
          ];

          const prefixo = prefixos[Math.floor(Math.random() * prefixos.length)];
          const sufixo = sufixos[Math.floor(Math.random() * sufixos.length)];

          return `${prefixo} ${sufixo}`;
        }

        function gerarNomeTimeGenerico() {
          const nomes = [
            "Time Genérico",
            "Clube Local",
            "Esporte Clube",
            "Futebol Clube",
            "Atlético Local",
          ];
          return nomes[Math.floor(Math.random() * nomes.length)];
        }

        function gerarApelidoAleatorio() {
          const apelidos = [
            "Leão",
            "Tigre",
            "Águia",
            "Falcão",
            "Dragão",
            "Urso",
            "Lobo",
            "Pantera",
            "Gavião",
            "Condor",
          ];
          return apelidos[Math.floor(Math.random() * apelidos.length)];
        }

        function gerarApelidoGenerico() {
          return "Genérico";
        }

        function gerarCidadeAleatoria() {
          const cidades = [
            "São Paulo",
            "Rio de Janeiro",
            "Belo Horizonte",
            "Salvador",
            "Recife",
            "Fortaleza",
            "Curitiba",
            "Porto Alegre",
            "Brasília",
            "Goiânia",
            "Manaus",
            "Belém",
            "Natal",
            "João Pessoa",
            "Maceió",
            "Aracaju",
            "Teresina",
            "São Luís",
            "Cuiabá",
            "Campo Grande",
          ];
          return cidades[Math.floor(Math.random() * cidades.length)];
        }

        function gerarEstadoAleatorio() {
          const estados = [
            "SP", "RJ", "MG", "BA", "PE", "CE", "PR", "RS", "DF", "GO",
            "AM", "PA", "RN", "PB", "AL", "SE", "PI", "MA", "MT", "MS"
          ];
          return estados[Math.floor(Math.random() * estados.length)];
        }

        function gerarCidadeGenerica() {
          return "Cidade Genérica";
        }

        function gerarRiquezaAleatoria() {
          const riquezas = ["alta", "média", "baixa"];
          return riquezas[Math.floor(Math.random() * riquezas.length)];
        }

        function gerarOrcamentoAleatorio() {
          const orcamentos = [
            50000000, 80000000, 120000000, 150000000, 200000000,
          ];
          return orcamentos[Math.floor(Math.random() * orcamentos.length)];
        }

        function gerarEstadioAleatorio() {
          const estadios = [
            "Arena Municipal",
            "Estádio Olímpico",
            "Complexo Esportivo",
            "Arena Multiuso",
            "Estádio Principal",
          ];
          return estadios[Math.floor(Math.random() * estadios.length)];
        }

        function gerarTorcidaAleatoria() {
          const torcidas = ["grande", "média", "pequena"];
          return torcidas[Math.floor(Math.random() * torcidas.length)];
        }

        function gerarCorAleatoria() {
          const cores = [
            "#FF0000",
            "#0000FF",
            "#00FF00",
            "#FFFF00",
            "#FF00FF",
            "#00FFFF",
            "#FFA500",
            "#800080",
            "#008000",
            "#000000",
            "#FFFFFF",
          ];
          return cores[Math.floor(Math.random() * cores.length)];
        }

        function gerarTecnicoAleatorio() {
          const nomes = [
            "João Silva",
            "Pedro Santos",
            "Carlos Oliveira",
            "Miguel Costa",
            "Lucas Ferreira",
          ];
          const especialidades = [
            "Futebol ofensivo",
            "Futebol defensivo",
            "Futebol moderno",
            "Futebol organizado",
            "Futebol posicional",
          ];

          return {
            nome: nomes[Math.floor(Math.random() * nomes.length)],
            idade: Math.floor(Math.random() * 20) + 40,
            nacionalidade: "Brasil",
            contrato_ate: 2025,
            salario: Math.floor(Math.random() * 100000) + 50000,
            especialidade:
              especialidades[Math.floor(Math.random() * especialidades.length)],
          };
        }

        function gerarDonoAleatorio() {
          const nomes = [
            "Roberto Silva",
            "Antônio Santos",
            "Francisco Costa",
            "José Oliveira",
            "Manuel Ferreira",
          ];
          const empresas = [
            "Associação",
            "Empresa Local",
            "Grupo Esportivo",
            "Consórcio",
            "Fundação",
          ];

          return {
            nome: nomes[Math.floor(Math.random() * nomes.length)],
            idade: Math.floor(Math.random() * 30) + 40,
            nacionalidade: "Brasil",
            empresa: empresas[Math.floor(Math.random() * empresas.length)],
            patrimonio: `R$ ${Math.floor(Math.random() * 100) + 10} milhões`,
          };
        }

        function gerarColaboradoresAleatorios() {
          const nomes = [
            "João",
            "Pedro",
            "Carlos",
            "Miguel",
            "Lucas",
            "André",
            "Rafael",
            "Daniel",
            "Marcos",
            "Thiago",
          ];
          const cargos = ["Atacante", "Meia", "Goleiro", "Lateral", "Zagueiro"];

          return [
            {
              nome: `${nomes[Math.floor(Math.random() * nomes.length)]} ${
                nomes[Math.floor(Math.random() * nomes.length)]
              }`,
              cargo: cargos[Math.floor(Math.random() * cargos.length)],
              idade: Math.floor(Math.random() * 15) + 20,
              salario: Math.floor(Math.random() * 200000) + 50000,
            },
            {
              nome: `${nomes[Math.floor(Math.random() * nomes.length)]} ${
                nomes[Math.floor(Math.random() * nomes.length)]
              }`,
              cargo: cargos[Math.floor(Math.random() * cargos.length)],
              idade: Math.floor(Math.random() * 15) + 20,
              salario: Math.floor(Math.random() * 200000) + 50000,
            },
            {
              nome: `${nomes[Math.floor(Math.random() * nomes.length)]} ${
                nomes[Math.floor(Math.random() * nomes.length)]
              }`,
              cargo: cargos[Math.floor(Math.random() * cargos.length)],
              idade: Math.floor(Math.random() * 15) + 20,
              salario: Math.floor(Math.random() * 200000) + 50000,
            },
          ];
        }

        function gerarParceirosAleatorios() {
          const parceiros = [
            "Patrocinador Local",
            "Fornecedor Regional",
            "Banco Local",
            "Empresa Comercial",
            "Loja Esportiva",
          ];

          return [
            {
              nome: parceiros[Math.floor(Math.random() * parceiros.length)],
              tipo: "Patrocinador Oficial",
              valor: `R$ ${Math.floor(Math.random() * 20) + 5} milhões/ano`,
            },
          ];
        }

        function gerarElencoAleatorio() {
          const elenco = [];
          for (let i = 0; i < 25; i++) {
            elenco.push(Math.floor(Math.random() * 10000) + 10000);
          }
          return elenco;
        }

        function gerarElencoGenerico() {
          const elenco = [];
          for (let i = 0; i < 25; i++) {
            elenco.push(Math.floor(Math.random() * 10000) + 20000);
          }
          return elenco;
        }

        function gerarJovensPromessasAleatorias() {
          const promessas = [];
          for (let i = 0; i < 5; i++) {
            promessas.push(Math.floor(Math.random() * 10000) + 10000);
          }
          return promessas;
        }

        function gerarJovensPromessasGenericas() {
          const promessas = [];
          for (let i = 0; i < 5; i++) {
            promessas.push(Math.floor(Math.random() * 10000) + 20000);
          }
          return promessas;
        }

        // Adicionar testes
        const testeBotao = document.getElementById("teste-botao");
        if (testeBotao) {
          testeBotao.addEventListener("click", function () {
            console.log("BOTÃO DE TESTE CLICADO!");
            alert("Botão de teste funcionando!");
          });
        }

        const testeController = document.getElementById("teste-controller");
        if (testeController) {
          testeController.addEventListener("click", function () {
            console.log("TESTE CONTROLLER CLICADO!");
            if (window.gameController) {
              window.gameController.testeController();
            } else {
              alert("Controller não encontrado!");
            }
          });
        }

        // Adicionar event listener para beforeunload (atualizar página)
        window.addEventListener("beforeunload", function (e) {
          // Verificar se o usuário já escolheu um time (jogo iniciado)
          const jogoIniciado = localStorage.getItem("jogoIniciado");
          const timeEscolhido = localStorage.getItem("timeEscolhido");

          if (jogoIniciado === "true" && timeEscolhido) {
            // Mostrar mensagem de confirmação
            e.preventDefault();
            e.returnValue =
              "Você tem um jogo em andamento. Tem certeza que deseja sair sem salvar?";
            return "Você tem um jogo em andamento. Tem certeza que deseja sair sem salvar?";
          }
        });

        // Adicionar event listener para visibilitychange (mudança de aba)
        document.addEventListener("visibilitychange", function () {
          if (document.visibilityState === "hidden") {
            const jogoIniciado = localStorage.getItem("jogoIniciado");
            const timeEscolhido = localStorage.getItem("timeEscolhido");

            if (jogoIniciado === "true" && timeEscolhido) {
              // Salvar automaticamente quando o usuário muda de aba
              if (window.gameController) {
                window.gameController.salvarJogo();
              }
            }
          }
        });

        // Inicializar o jogo
        inicializarJogo();
      });
      //
    </script>

    <!-- AdSense Script (load asynchronously) -->
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4848539261829137"
      crossorigin="anonymous"
    ></script>

    <!-- Ad Container (initially hidden) -->
    <div
      id="ad-container"
      style="display: none; margin: 20px auto; text-align: center"
    >
      <ins
        class="adsbygoogle"
        style="display: block"
        data-ad-client="ca-pub-4848539261829137"
        data-ad-slot="auto"
        data-ad-format="auto"
        data-full-width-responsive="true"
      ></ins>
    </div>
    <script>
      // Function to show and load ads when appropriate
      function loadAds() {
        const adScript = document.createElement("script");
        adScript.src =
          "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4848539261829137";
        adScript.crossOrigin = "anonymous";
        adScript.async = true;

        adScript.onerror = () => {
          console.log("AdSense blocked or failed to load");
          // Implement fallback monetization or analytics
        };

        document.head.appendChild(adScript);
      }

      // Call this when you want to show ads (e.g., after game loads)
      window.addEventListener("DOMContentLoaded", function () {
        // You might want to delay this until after your game is interactive
        setTimeout(loadAds, 2000);
      });
    </script>
  </body>
</html>

